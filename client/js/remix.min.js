(function(f,k){function j(p,a,m){this.categories={};this.resources={};this.eventListeners=[];this.loadingCount=0;this.callbackQueue=[];this._head=b.getElementsByTagName("head")[0];p&&this.load(p,a,m)}var a,b=f.document,g=f.console;g===k&&(g={log:function(){}});var e=/^(([A-Za-z]+):\/\/)+(([a-zA-Z0-9\._\-]+\.[a-zA-Z]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|localhost)(\:([0-9]+))*(\/[^#]*)?(\#.*)?$/;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(p){if(this===void 0||this===
null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(a===0)return-1;var c=0;arguments.length>0&&(c=Number(arguments[1]),c!==c?c=0:c!==0&&c!==1/0&&c!==-(1/0)&&(c=(c>0||-1)*Math.floor(Math.abs(c))));if(c>=a)return-1;for(c=c>=0?c:Math.max(a-Math.abs(c),0);c<a;c++)if(c in b&&b[c]===p)return c;return-1};f.Loaderator=j;j.Category=function(p,a){this.name=p;this.resources=[];this.resourcesById={};this.loader=a;this.eventListeners={load:[],single:{}}};j.Category.prototype.addResource=function(a){var b=
a.id||a.url;this.resourcesById[b]||(this.resources.push(a),this.resourcesById[b]=a,a.categories.push(this))};j.Category.prototype.checkForAllLoaded=function(){var a,b;if(this.loader.loadingCount)this.loader.callbackQueue.indexOf(this)<0&&this.loader.callbackQueue.push(this);else{var d=this.resources;if(a=d.length){var c=this.eventListeners.load;if(b=c.length){for(a--;a>=0;a--)if(!d[a].loaded)return;a=function(c,a,o){return function(){c.call(a,o)}};for(b--;b>=0;b--)d=c.pop(),d.async?setTimeout(a(d,
this.loader,this.resourcesById),0):d.call(this.loader,this.resourcesById)}}}};j.prototype.setBase=function(a){var d=b.getElementsByTagName("base"),m;this.base=null;if(a){if(a=e.exec(a))this.base={},this.base.protocol=a[2]+":",this.base.hostname=a[3],this.base.port=a[7]||"",this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:""),this.base.pathname=a[8]}else for(m=0;m<d.length;m++)if(a=d.item(m),a=a.getAttribute("href"))if(a=e.exec(a)){this.base={};this.base.protocol=a[2]+":";this.base.hostname=
a[3];this.base.port=a[7]||"";this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:"");this.base.pathname=a[8];break}if(!this.base)this.base={},this.base.protocol=f.location.protocol,this.base.host=f.location.host,this.base.port=f.location.port,this.base.hostname=f.location.hostname,this.base.pathname=f.location.pathname;d=this.base.pathname.split("?");d=d[0].split("/");d.pop();this.base.directory=d.join("/");return this};j.prototype.resolveUrl=function(a){this.base||this.setBase();
if(e.test(a))return a;var b=this.base,d=a.split("/");if(d.length&&d[0]==="")return b.protocol+"//"+b.host+a;var a=b.directory.split("/"),c;for(c=0;c<d.length;c++)d[c]===".."?a.pop():d[c]!=="."&&a.push(d[c]);return b.protocol+"//"+b.host+a.join("/")};var l=function(a,b){var d=!1;try{a.sheet&&a.sheet.cssRules.length>0?d=!0:a.styleSheet&&a.styleSheet.cssText.length>0?d=!0:a.innerHTML&&a.innerHTML.length>0&&(d=!0)}catch(c){}d?b():setTimeout(function(){l(a,b)},10)};j.prototype.loaders={script:function(a){var d=
this;if(!a.element){var e=b.createElement("script");e.type=a.mime||"text/javascript";e.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;a.element=e;e.src=a.fullUrl;this._head.appendChild(e)}a.element.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState===4)a.loaded||d.resLoadCallback(a,this)};a.element.onload=function(){a.loaded||d.resLoadCallback(a,this)}},css:function(a){var d,e,c,g=b.getElementsByTagName("link");for(d=0,e=g.length;d<e;d++)if(c=g.item(d),
c.getAttribute("rel").toLowerCase()==="stylesheet"&&c.href===a.fullUrl){a.element=c;break}if(!a.element){var j=this;c=b.createElement("link");c.type=a.mime||"text/css";c.setAttribute("rel","stylesheet");c.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;c.href=a.fullUrl;a.element=c;this._head.appendChild(c);l(c,function(){j.resLoadCallback(a,this)})}return!0},ajax:function(a){if(!a.element){var b=this,d=new XMLHttpRequest;a.element=d;d.open("GET",a.fullUrl,!0);d.onreadystatechange=
function(){d.readyState===4&&b.resLoadCallback(a,this)};d.send(null)}},object:function(a){var d,e=this,c;if(!a.element||!a.element.tagName){switch(a.type){case "audio":case "video":d=b.createElement(a.type);d.controls=a.controls||!1;d.loop=a.loop||!1;d.preload=a.preload||!1;d.autobuffer=d.preload;d.doMediaEvents=!0;d.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;if(a.sources){if(Object.prototype.toString.call(a.sources)!=="[object Array]")a.sources=[a.sources];for(c=0;c<a.sources.length;c++){var j=
b.createElement("source");j.src=this.resolveUrl(a.sources[c]);d.appendChild(j)}}else d.src=a.fullUrl;d.doMediaEvents=!0;d.load();break;case "image":d=new Image;d.src=a.fullUrl;break;case "html":d=b.createElement("iframe");d.src=a.fullUrl;d.width=0;d.height=0;b.body.appendChild(d);break;default:return g.log("Resource Loader: unknown object type "+a.type),!1}a.element=d;if(!d.doMediaEvents)d.onload=function(c){e.resLoadCallback(a,c)}}else{a.type=a.element.tagName.toLowerCase();if(a.type==="img")a.type=
"image";else if(a.type==="iframe")a.type="html";else if(a.type==="audio"||a.type==="video")a.element.doMediaEvents=!0;else return g.log("Resource Loader: unknown object type "+a.type),!1;d=a.element}if(d.loaded)e.resLoadCallback(a,event);else if(d.doMediaEvents){d.addEventListener("canplay",function(c){a.loaded||e.resLoadCallback(a,c)},!0);var f=function(){d.readyState>=4?a.loaded||e.resLoadCallback(a,event):setTimeout(f,0)};f()}return!0},font:function(d){var e=this;a.load({url:this.base.protocol+
"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",id:"webfont-script",type:"script",mode:"script"},"webfont");a.addEventListener("webfont",function(){var a,c=d.families.concat([]),j,f,o=!1,s=[],r=b.getElementsByTagName("link");for(a=0,j=r.length;a<j;a++)if(f=r.item(a),f.getAttribute("rel").toLowerCase()==="stylesheet"&&(f=f.href,f===d.fullUrl)){o=!0;break}o||s.push(d.fullUrl);WebFont.load({custom:{families:d.families,urls:s},fontactive:function(o){for(a=0;a<c.length;a++)if(c[a]===o){c.splice(a,
1);break}c.length||e.resLoadCallback(d,this)},fontinactive:function(a){g.log("problem loading font:"+a)},inactive:function(){g.log("WebFonts are inactive!")},active:function(){}})})}};j.prototype.extensionTypes={js:"script",ogg:"audio",mp3:"audio",wav:"audio",ogv:"video",webm:"video",mp4:"video",jpg:"image",jpeg:"image",png:"image",gif:"image",css:"style",xml:"xml",xhtml:"xml",json:"json",txt:"text",html:"html"};j.prototype.load=function(a,b,d){if(Object.prototype.toString.call(a)!=="[object Array]")if(a)a=
[a];else return this;this.loadingCount+=1;var c,e,g,o,s,r=[];for(s=0;s<a.length;s++)if(c=a[s]){if(Object.prototype.toString.call(c)==="[object String]"||typeof c==="string")c={url:c};if(c.url){var i;c.fullUrl===k&&(i=this.resolveUrl(c.url));g="";if((e=this.resources[i])&&(!c.mode||c.mode===e.mode))a[s]=e;else{e&&(g="#"+c.mode);e=c;e.Loaderator=this;this.resources[i+g]=e;e.fullUrl=i;if(!c.type)g=c.fullUrl.split("."),g.length>1&&(g=g.pop().toLowerCase()),c.type=this.extensionTypes[g]||"text";if(!c.mode)switch(c.type){case "script":c.mode=
"script";break;case "style":case "css":c.mode="css";break;case "audio":case "video":case "image":case "html":c.mode="object";break;case "xml":case "json":case "text":c.mode="ajax";break;default:c.mode="ajax"}}}else e=c.loader?c:!1;g=[];b&&g.push(b);var w;if(c.category){o=Object.prototype.toString.call(c.category)==="[object Array]"?c.category:[c.category];for(c=0;c<o.length;c++)w=o[c],g.indexOf(w)<0&&g.push(w)}g.length||g.push(e.fullUrl);if(e&&g.length&&(e.loader||e.mode&&this.loaders[e.mode])){for(c=
0;c<g.length;c++){w=g[c];o=this.categories[w]||(this.categories[w]=new j.Category(w,this));if(e.categories===k)e.categories=[];o.addResource(e)}e.loader||e.fullUrl&&this.loaders[e.mode].call(this,e)&&r.push(e)}}d!==k&&Object.prototype.toString.call(d)==="[object Function]"&&b!==k&&this.addEventListener(b,d);for(this.loadingCount-=1;this.callbackQueue.length;)this.callbackQueue.splice(0,1)[0].checkForAllLoaded();return this};j.prototype.resLoadCallback=function(a,b){a.loaded=!0;a.event=b;var d,c;c=
this.eventListeners.length;for(d=0;d<c;d++)this.eventListeners[d].call(this,a);var e=function(a,c,o){return function(){a.call(c,o)}};c=a.categories.length;var g;for(d=0;d<c;d++){var o;o=a.categories[d].eventListeners.single;if(a.id&&(g=o[a.id])||(g=o[a.url])||(g=o[a.fullUrl]))for(o=0;o<g.length;o++){var s=g[o];s.async?setTimeout(e(s,this,a),0):s.call(this,a)}}for(d=0;d<c;d++)a.categories[d].checkForAllLoaded()};j.prototype.addEventListener=function(a,b,d){if(!b||Object.prototype.toString.call(b)!==
"[object Function]")return this;b.runAsync=d||!1;if(a==="*")this.eventListeners.push(b);else{typeof a==="string"&&(a=a.split(":"));var c=a[0],c=this.categories[c]||(this.categories[c]=new j.Category(c,this)),e=a.length>1?a[1]:!1;if(e){var g,o;if(!(g=c.resourcesById[e]))for(a=c.resources.length-1;a>=0;a--)if(o=c.resources[a],o!==k&&o.fullUrl===e){g=o;break}g&&g.loaded?d?setTimeout(function(){b.call(this,g)},0):b.call(this,g):(c.eventListeners.single[e]||(c.eventListeners.single[e]=[])).push(b)}else c.eventListeners.load.push(b),
c.checkForAllLoaded()}return this};var d=function(){var a=f.LDR8R;if(a){var b;for(b=0;b<a.length;b++)a[b]()}};d.prototype.push=function(a){if(Object.prototype.toString.call(a)==="[object Function]"){var b=Array.prototype.slice.call(arguments,1);a.apply(null,b)}};a=new j;f.LDR8R=new d})(window);(function(f,k){if(k.addEventListener){var j=Array.prototype,a=Object.prototype,b=j.forEach,g=j.slice,e=a.hasOwnProperty,l=a.toString,d=/^(#([\w\-\_\.]+))$/,p=[],q=!1,m=function(){return f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(a){f.setTimeout(a,16)}}(),c=function(a,b){return new c.p.init(a,b||null)};c.instances=[];c.instanceIds={};c.removeInstance=function(a){if(c.instances.length)return c.instances.splice(c.instanceIds[a.id],
1),delete c.instanceIds[a.id],c.instances};c.addInstance=function(a){var b=c.instances.length,d=a.media.id&&a.media.id;a.id=!(d in c.instanceIds)&&d||"__popcorn"+b;c.instanceIds[a.id]=b;c.instances.push(a);return c.instances};c.getInstanceById=function(a){return c.instances[c.instanceIds[a]]};c.removeInstanceById=function(a){return c.removeInstance(c.instances[c.instanceIds[a]])};c.p=c.prototype={init:function(a,b){var e;if(typeof a==="function")if(k.readyState==="interactive"||k.readyState==="complete")a(k,
c);else{if(p.push(a),!q){q=!0;var i=function(){k.removeEventListener("DOMContentLoaded",i,!1);for(var a=0,b=p.length;a<b;a++)p[a].call(k,c);p=null};k.addEventListener("DOMContentLoaded",i,!1)}}else{this.media=(e=d.exec(a))&&e.length&&e[2]?k.getElementById(e[2]):a;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;c.addInstance(this);this.options=b||{};this.data={disabled:[],events:{},history:[],trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],
startIndex:0,endIndex:0,previousUpdateTime:-1},loading:[],loadingListener:!1};var g=function(a){if(a.media.readyState>=2){var b=a.media.duration,b=b!=b?Number.MAX_VALUE:b+1;c.addTrackEvent(a,{start:b,end:b});a.media.addEventListener("timeupdate",function(c){a.data.timeupdateEvent=c},!1);var o=function(){var b=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,i=a.data.trackEvents,e=i.byEnd,h=i.byStart,r=i.animating,g=a.data.timeupdateEvent,s=0;if(d<b){for(;e[i.endIndex]&&e[i.endIndex].end<=
b;)if(!e[i.endIndex]._natives||a[e[i.endIndex]._natives.type]){if(e[i.endIndex]._running===!0)e[i.endIndex]._running=!1,e[i.endIndex]._natives.end.call(a,g,e[i.endIndex]);i.endIndex++}else{c.removeTrackEvent(a,e[i.endIndex]._id);return}for(;h[i.startIndex]&&h[i.startIndex].start<=b;)if(!h[i.startIndex]._natives||a[h[i.startIndex]._natives.type]){if(h[i.startIndex].end>b&&h[i.startIndex]._running===!1&&a.data.disabled.indexOf(h[i.startIndex]._natives.type)===-1)h[i.startIndex]._running=!0,h[i.startIndex]._natives.start.call(a,
g,h[i.startIndex]),h[i.startIndex]._natives.frame&&r.push(h[i.startIndex]);i.startIndex++}else{c.removeTrackEvent(a,h[i.startIndex]._id);return}for(;s<r.length;)r[s]._running==!1?r.splice(s,1):(r[s]._natives.frame.call(a,g,r[s],b),s++)}else if(d>b){for(;h[i.startIndex]&&h[i.startIndex].start>b;)if(!h[i.startIndex]._natives||a[h[i.startIndex]._natives.type]){if(h[i.startIndex]._running===!0)h[i.startIndex]._running=!1,h[i.startIndex]._natives.end.call(a,g,h[i.startIndex]);i.startIndex--}else{c.removeTrackEvent(a,
h[i.startIndex]._id);return}for(;e[i.endIndex]&&e[i.endIndex].end>b;)if(!e[i.endIndex]._natives||a[e[i.endIndex]._natives.type]){if(e[i.endIndex].start<=b&&e[i.endIndex]._running===!1&&a.data.disabled.indexOf(h[i.endIndex]._natives.type)===-1)e[i.endIndex]._running=!0,e[i.endIndex]._natives.start.call(a,g,e[i.endIndex]),e[i.endIndex]._natives.frame&&r.push(e[i.endIndex]);i.endIndex--}else{c.removeTrackEvent(a,e[i.endIndex]._id);return}for(;s<r.length;)r[s]._running==!1?r.splice(s,1):(r[s]._natives.frame.call(a,
g,r[s],b),s++)}i.previousUpdateTime=b;m(o)};m(o)}else f.setTimeout(function(){g(a)},1)};g(this);return this}}};c.p.init.prototype=c.p;c.forEach=function(a,c,d){if(!a||!c)return{};d=d||this;if(b&&a.forEach===b)return a.forEach(c,d);for(var i in a)e.call(a,i)&&c.call(d,a[i],i,a);return a};c.extend=function(a){var b=a,d=g.call(arguments,1);c.forEach(d,function(a){for(var c in a)b[c]=a[c]});return b};c.extend(c,{error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+
c.guid.counter)},sizeOf:function(a){var c=0,b;for(b in a)c++;return c},isArray:Array.isArray||function(a){return l.call(a)==="[object Array]"},nop:function(){},position:function(a){var a=a.getBoundingClientRect(),b={},d=k.documentElement,i=k.body,e,g,j;e=d.clientTop||i.clientTop||0;g=d.clientLeft||i.clientLeft||0;j=f.pageYOffset&&d.scrollTop||i.scrollTop;d=f.pageXOffset&&d.scrollLeft||i.scrollLeft;e=Math.ceil(a.top+j-e);g=Math.ceil(a.left+d-g);for(var A in a)b[A]=Math.round(a[A]);return c.extend({},
b,{top:e,left:g})},disable:function(a,c){var b=a.data.disabled;b.indexOf(c)===-1&&b.push(c);return a},enable:function(a,c){var b=a.data.disabled,d=b.indexOf(c);d>-1&&b.splice(d,1);return a}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate mute volume duration paused".split(/\s+/g),function(c){a[c]=function(a){if(typeof this.media[c]==="function")return this.media[c](),this;return a!==!1&&a!==null&&typeof a!=="undefined"?(this.media[c]=a,this):
this.media[c]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return-~this.media.currentTime},exec:function(a,b){c.addTrackEvent(this,{start:a,end:a+1,_running:!1,_natives:{start:b||c.nop,end:c.nop,type:"exec"}});return this},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled.indexOf(a)>-1?"enable":"disable"](this,a)}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload  ",
MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;c.events={isNative:function(a){for(var b=c.Events.Natives.split(/\s+/g),d=0;d<b.length;d++)if(b[d]===a)return!0;return!1},getInterface:function(a){if(!c.events.isNative(a))return!1;
var b=c.Events,d,i;for(i in b)i!=="Natives"&&b[i].indexOf(a)>-1&&(d=i);return d},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){if(this.data.events[a]&&c.sizeOf(this.data.events[a])){var d=c.events.getInterface(a);if(d)return d=k.createEvent(d),d.initEvent(a,!0,!0,f,1),this.media.dispatchEvent(d),this;c.forEach(this.data.events[a],function(a){a.call(this,b)},this)}return this},listen:function(a,b){var d=this,i=!0;this.data.events[a]||(this.data.events[a]={},i=!1);this.data.events[a][b.name||
b.toString()+c.guid()]=b;!i&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(b){c.forEach(d.data.events[a],function(a){typeof a==="function"&&a.call(d,b)})},!1);return this},unlisten:function(a,c){if(this.data.events[a]&&this.data.events[a][c])return delete this.data.events[a][c],this;this.data.events[a]=null;return this}}};c.forEach(["trigger","listen","unlisten"],function(a){c.p[a]=c.events.fn[a]});c.protect={natives:"load play pause currenttime playbackrate mute volume duration removeplugin roundtime trigger listen unlisten".split(/\s+/)};
c.addTrackEvent=function(a,b){if(b._natives)b._id=!b.id?c.guid(b._natives.type):b.id,a.data.history.push(b._id),b._natives.start=b._natives.start||c.nop,b._natives.end=b._natives.end||c.nop;b.start=c.util.toSeconds(b.start,a.options.framerate);b.end=c.util.toSeconds(b.end,a.options.framerate);var d=a.data.trackEvents.byStart,i=a.data.trackEvents.byEnd,e;for(e=d.length-1;e>=0;e--)if(b.start>=d[e].start){d.splice(e+1,0,b);break}for(e=i.length-1;e>=0;e--)if(b.start>=i[e].start){i.splice(e+1,0,b);break}};
c.removePlugin=function(a,b){if(!b){var b=a,a=c.p,d=c.registry.length,i;for(i=0;i<d;i++)if(c.registry[i].name===b){c.registry.splice(i,1);delete c.registryByName[b];delete a[b];return}}d=a.data.trackEvents.byStart;i=a.data.trackEvents.byEnd;var e,g;for(e=0,g=d.length;e<g;e++)d[e]&&d[e]._natives&&d[e]._natives.type===b&&i[e]&&i[e]._natives&&i[e]._natives.type===b&&(d.splice(e,1),i.splice(e,1),e--,g--,a.data.trackEvents.startIndex<=e&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--))};
c.removeTrackEvent=function(a,b){var d=a.data.history.length,i=0,e=[],g=[],j=[];c.forEach(a.data.trackEvents.byStart,function(c,d){c._id||(e.push(a.data.trackEvents.byStart[d]),g.push(a.data.trackEvents.byEnd[d]));c._id&&(c._id!==b&&(e.push(a.data.trackEvents.byStart[d]),g.push(a.data.trackEvents.byEnd[d])),c._id===b&&(i=d,c._natives._teardown&&c._natives._teardown.call(a,c)))});i<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;i<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;
a.data.trackEvents.byStart=e;a.data.trackEvents.byEnd=g;for(var f=0;f<d;f++)a.data.history[f]!==b&&j.push(a.data.history[f]);a.data.history=j};c.getTrackEvents=function(a){var b=[];c.forEach(a.data.trackEvents.byStart,function(a){a._id&&b.push(a)});return b};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,
this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else{var e=["start","end"],g={},j=typeof b==="function";d||(d=b.manifest||{});var f=function(b,g){if(!g)return this;g._natives=b;g._natives.type=a;g._running=!1;g._natives.manifest=d;if(!("start"in g))g.start=0;if(!("end"in g))g.end=this.duration();
if("_setup"in b&&typeof b._setup==="function"){if(!g.target){var j="options"in d&&d.options;g.target=j&&"target"in j&&j.target}b._setup.call(this,g)}c.addTrackEvent(this,g);c.forEach(b,function(a,b){b!=="type"&&e.indexOf(b)===-1&&this.listen(b,a)},this);return this};if(d||"manifest"in b)c.manifest[a]=d||b.manifest;g[a]=function(a){return f.call(this,j?b.call(this,a):b,a)};c.extend(c.p,g);var A={fn:g[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(g,A,{type:a}));c.registryByName[a]=
A;return g}};c.plugin.getDefinition=function(a){var b=c.registryByName;if(b[a])return b[a];c.error("Cannot inherit from "+a+"; Object does not exist")};c.plugin.delegate=function(a,b,c){return function(){var d=arguments;c.forEach(function(c){c[b]&&c[b].apply(a,d)})}};c.plugin.inherit=function(a,b,d,i){function g(a,b){var d=b||c.plugin.getDefinition(a).parents,i;for(i in d)if(e.call(d,i)){var r=d[i];g(r);j.indexOf(r)===-1&&j.push(r)}}var j=[];g(a,c.isArray(b)?b:[b]);j.push(a);i=c.plugin(a,function(a){var b=
this,d;d=j.map(function(d){d=c.plugin.getDefinition(d).base;return d.call&&d.call(b,a)||d});return{_setup:c.plugin.delegate(b,"_setup",d),start:c.plugin.delegate(b,"start",d),end:c.plugin.delegate(b,"end",d)}},i||d.manifest);a=c.plugin.getDefinition(a);a.base=d;a.parents=b;return i};c.inherit=c.plugin.inherit;c.parsers={};c.parser=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else if(typeof b==="function"&&!d&&(d=b,b=""),!(typeof d!==
"function"||typeof b!=="string")){var i={};i[a]=function(a,i){if(!a)return this;var g=this;c.xhr({url:a,dataType:b,success:function(a){var b,c,j=0,a=d(a).data||[];if(b=a.length){for(;j<b;j++){c=a[j];for(var o in c)if(e.call(c,o)&&g[o])g[o](c[o])}i&&i()}}});return this};c.extend(c.p,i);return i}};var t=/\?/,u={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:!0,xhr:function(){return new f.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&
(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else if(a=c.extend({},u,a),a.ajax=a.xhr(),a.ajax){if(a.type==="GET"&&a.data)a.url+=(t.test(a.url)?"&":"?")+a.data,a.data=null;a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}};c.xhr.httpData=function(a){var b,c=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{c=JSON.parse(a.ajax.responseText)}catch(d){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,
json:c};a.dataType&&(b=b[a.dataType]);a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,d){if(d&&k.querySelectorAll('script[src="'+a+'"]').length)b&&b(!0);else{var e=k.head||k.getElementsByTagName("head")[0]||k.documentElement,g=k.createElement("script"),j=a.split("?")[1],f=!1,l=[],m,p;j&&!d&&(l=j.split("&"));l.length&&(p=l[l.length-1].split("="));m=l.length?p[1]?p[1]:p[0]:"jsonp";!j&&!d&&(a+="?callback="+m);m&&!d&&(window[m]&&(m=c.guid(m)),window[m]=function(a){b&&b(a);f=!0},a=a.replace(p.join("="),
p[0]+"="+m));g.onload=g.onreadystatechange=function(){if(!g.readyState||/loaded|complete/.test(g.readyState))d&&b&&b(),f&&(delete window[m],e.removeChild(g))};g.src=a;e.insertBefore(g,e.firstChild)}};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,!0)};c.util={toSeconds:function(a,b){var d=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/;if(typeof a==="number")return a;else typeof a==="string"?d.test(a)||c.error("Invalid time format"):c.error("Invalid time format");
var d=a.split(":"),e=d.length-1,g=d[e];if(g.indexOf(";")>-1){var g=g.split(";"),j=0;b&&typeof b==="number"&&(j=parseFloat(g[1],10)/b);d[e]=parseInt(g[0],10)+j}if(d.length===1)return parseFloat(d[0],10);else if(d.length===2)return parseInt(d[0],10)*60+parseFloat(d[1],10);else if(d.length===3)return parseInt(d[0],10)*3600+parseInt(d[1],10)*60+parseFloat(d[2],10)}};f.Popcorn=c;k.addEventListener("DOMContentLoaded",function(){var a=k.querySelectorAll("[data-timeline-sources]");c.forEach(a,function(b,
d){var e=a[d],g,j,f;if(!e.id)e.id=c.guid("__popcorn");e.nodeType&&e.nodeType===1&&(f=c("#"+e.id),g=(e.getAttribute("data-timeline-sources")||"").split(","),g[0]&&c.forEach(g,function(a){j=a.split("!");j.length===1&&(j=a.split("."),j[0]="parse"+j[j.length-1].toUpperCase(),j[1]=a);if(g[0]&&f[j[0]])f[j[0]](j[1])}),f.autoplay&&f.play())})},!1)}})(window,window.document);(function(f){f&&f.plugin("code",function(f){if(!f.onStart||typeof f.onStart!=="function")throw"Popcorn Code Plugin Error: onStart must be a function.";if(f.onEnd&&typeof f.onEnd!=="function")throw"Popcorn Code Plugin Error: onEnd  must be a function.";if(f.onFrame&&typeof f.onFrame!=="function")throw"Popcorn Code Plugin Error: onFrame  must be a function.";return{start:function(j,a){a.onStart(a)},end:function(j,a){if(a.onEnd)a.onEnd(a)},frame:f.onFrame}},{about:{name:"Popcorn Code Plugin",version:"0.1",
author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame"},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(window.Popcorn);(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0;f.plugin("europeana",function(a){var b,g,e,f,d,p,q=this,m=!1,c,t,u,o;if(!a||!a.id)return{_setup:function(){}};o=function(a){(a.keyCode||a.which)===27&&u()};c=function(a){if(!k(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);u();return!1}};t=function(a){if(!k(a)){m=q.media.paused;q.pause();g.removeEventListener("click",t,!1);window.addEventListener("click",
c,!0);window.addEventListener("keydown",o,!0);b.classList.add("active");b.style.cssText="";if(f&&16/9*0.4*e.height/e.width>0.8)b.style.width=e.width/e.height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};u=function(a){if(!k(a)){b.classList.remove("active");b.style.width=f;if(d||p)b.style.top=d,b.style.left=p,b.style.position="absolute";g.addEventListener("click",t,!1);window.removeEventListener("keydown",
o,!0);window.removeEventListener("click",c,!0);m||q.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","europeana");b.id="europeana"+j;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";j++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"europeana target container doesn't exist";
if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);var s=new XMLHttpRequest;s.open("GET","europeana.php?id="+a.id);s.onreadystatechange=function(){function b(a){return r[a]||null}function c(a,d){var h,e;h=d.ownerDocument||d;if(h.evaluate)return(h=h.evaluate(a,d,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null))&&h.singleNodeValue;else{h.setProperty("SelectionLanguage","XPath");if(!j){j=[];for(e in r)j.push("xmlns:"+
e+'="'+r[e]+'"');j=j.join(" ");h.setProperty("SelectionNamespaces",j)}if(d===h&&h.documentElement)d=h.documentElement;return d.selectSingleNode(a)}}var j="",r={srw:"http://www.loc.gov/zing/srw/",diag:"http://www.loc.gov/zing/srw/diagnostic/",xcql:"http://www.loc.gov/zing/cql/xcql/",mods:"http://www.loc.gov/mods/v3",europeana:"http://www.europeana.eu",enrichment:"http://www.europeana.eu/schemas/ese/enrichment/",dcterms:"http://purl.org/dc/terms/",dc:"http://purl.org/dc/elements/1.1/",dcx:"http://purl.org/dc/elements/1.1/",
tel:"http://krait.kb.nl/coop/tel/handbook/telterms.html",xsi:"http://www.w3.org/2001/XMLSchema-instance"};if(s.readyState===4&&s.status===200){var m=s.responseXML;if(m){var k=!m.ownerDocument?m.documentElement:m.ownerDocument.documentElement,m=(m=c("//dc:title",k))?m.firstChild.nodeValue||"":"",q=c("//dc:description",k),q=q?q.firstChild.nodeValue||"":"",o=c("//dc:source",k);o=o?o.firstChild.nodeValue||"":(o=c("//europeana:provider",k))?o.firstChild.nodeValue||"":"";o&&(o="/"+o);var k=(k=c("//europeana:object",
k))?k.firstChild.nodeValue||"":"",z=document.createElement("div");z.setAttribute("class","content");var h=document.createElement("article");h.appendChild(document.createTextNode(q));z.appendChild(h);z.appendChild(document.createElement("br"));g.appendChild(z);q=document.createElement("div");q.setAttribute("class","info");m=m.replace("<","&lt;");m=m.replace(">","&gt;");q.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="http://www.europeana.eu/portal/record/'+
a.id+'.html" target="_new">Europeana'+o+'</a></span></div><div><a href="http://www.europeana.eu/portal/record/'+a.id+'.html" target="_new">'+m+'</a></div><div class="watch">view details</div>';q.getElementsByClassName("minimize").item(0).addEventListener("click",u,!1);g.appendChild(q);k?(e=document.createElement("img"),e.src=k,e.onload=function(){a.loaded=!0},z.insertBefore(e,z.firstChild)):a.loaded=!0;f=a.width;d=a.top;p=a.left;g.addEventListener("click",t,!1)}}};s.send(null);var r=a.end-a.start;
if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,r/8);else if(a.fadeIn>r)a.fadeIn=r;r-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>r)a.fadeIn=r;return{start:function(a,c){var d=function(){c.loaded||e.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/
c.fadeOut);b.style.opacity=e}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",
type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",type:"text",label:"Number of Images"}}})}})(window.Popcorn);(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0;f.plugin("flickr",function(a){var b,g,e,l,d,p,q=a.numberofimages||4,m,c,t,u,o=a.padding||"5px",s=a.border||"0px",r=this,i=!1,w,C,y,A;A=function(a){(a.keyCode||a.which)===27&&y()};w=function(a){if(!k(a)){a=a.target;do if(a===b)return!0;while(a=a.parentNode);y();return!1}};C=function(a){if(!k(a)){i=r.media.paused;r.pause();g.removeEventListener("click",C,!1);window.addEventListener("click",
w,!0);window.addEventListener("keydown",A,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};y=function(a){if(!k(a)){b.classList.remove("active");b.style.width=c;if(t||u)b.style.top=t,b.style.left=u,b.style.position="absolute";g.addEventListener("click",C,!1);window.removeEventListener("keydown",A,!0);window.removeEventListener("click",w,!0);i||r.play();if(a)a.preventDefault&&
a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","flickr");b.id="flickr"+j;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";j++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"flickr target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=
a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);var J=function(){l="http://api.flickr.com/services/feeds/photos_public.gne?";e&&(l+="id="+e+"&");a.tags&&(l+="tags="+a.tags+"&");l+="lang=en-us&format=json&jsoncallback=flickr";f.xhr.getJSONP(l,function(b){g.innerHTML="<p style='padding:"+o+";'>"+b.title+"<p/>";f.forEach(b.items,function(b,e){if(e<q)d=document.createElement("a"),d.setAttribute("href",b.link),d.setAttribute("target","_blank"),p=document.createElement("img"),
p.setAttribute("src",b.media.m),p.setAttribute("height",m),p.setAttribute("width",c),p.setAttribute("style","border:"+s+";padding:"+o),d.appendChild(p),g.appendChild(d),a.loaded=!0;else return!1})})},L=function(){e?setTimeout(function(){L()},5):(l="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",l+="username="+a.username+"&api_key="+a.apikey+"&format=json&jsoncallback=flickr",f.getJSONP(l,function(a){e=a.user.nsid;J()}))},G=function(){if(r.media&&r.media.buffered){var b,
d,e=!1,i,j,k=r.media.buffered;for(b=0,d=k.length;b<d;b++)if(i=k.start(b),j=k.end(b),i>r.media.duration&&(i=0),i<=a.end&&j>=a.start){e=!0;break}if(!e){setTimeout(G,10);return}}l="http://api.flickr.com/services/rest/?method=flickr.photos.getInfo";a.apikey&&(l+="&api_key="+a.apikey);l+="&photo_id="+a.photoid+"&lang=en-us&format=json&jsoncallback=flickr";f.xhr.getJSONP(l,function(b){if(b&&b.stat==="ok"&&b.photo){var b=b.photo,d=document.createElement("img");d.src="http://farm"+b.farm+".static.flickr.com/"+
b.server+"/"+b.id+"_"+b.secret+"_m.jpg";d.style.width="100%";var e=a.url;e||(e=b.urls&&b.urls.url&&b.urls.url[0]&&b.urls.url[0]._content?b.urls.url[0]._content:"http://www.flickr.com/photos/"+b.owner.nsid+"/"+b.id+"/");g.appendChild(d);var h=document.createElement("div");h.setAttribute("class","info");h.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>photo<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
e+'" target="_new">Flickr</a></span></div><div><a href="'+e+'" target="_new">'+b.title._content+'</a></div><div class="watch">view photo</div>';h.getElementsByClassName("minimize").item(0).addEventListener("click",y,!1);g.appendChild(h);c=a.width;t=a.top;u=a.left;d.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c,e,h;e=d.width||d.naturalWidth;h=d.height||d.naturalHeight;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)if(b=c[3]||"",c=parseFloat(c[1]),g.style.height=
m=c*h/e+b,!d.width)d.style.height=100*h/e+"%";a.loaded=!0},!1);g.addEventListener("click",C,!1)}})};if(a.url&&!a.photoid){var z=/^((https?:\/\/)?(www\.)?flickr\.com\/photos\/[^\/]+\/)?(\d+)/.exec(a.url);if(z&&z.length>=5)a.photoid=z[4]}a.photoid?G():a.username&&a.apikey?L():(e=a.userid,J());z=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,z/8);else if(a.fadeIn>z)a.fadeIn=z;z-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>z)a.fadeIn=z;return{start:function(a,
c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",
label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",
type:"text",label:"Number of Images"}}})}})(window.Popcorn);var googleCallback;
(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0,a=0,b=!1,g=!1,e,l;googleCallback=function(a){typeof window.google!=="undefined"&&window.google.maps&&window.google.maps.Geocoder&&window.google.maps.LatLng?(e=new window.google.maps.Geocoder,g=!0):setTimeout(function(){googleCallback(a)},1)};l=function(){document.body?(b=!0,f.getScript("http://maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){l()},1)};
f.plugin("googlemap",function(d){var f,q,m,c,t=!1,u=this,o,s=!1,r,i,w,C,y,A,J;b||l();d.map=null;C=function(a){(a.keyCode||a.which)===27&&w()};r=function(a){if(k(a))return!0;var b=a.target;do if(b===m)return!0;while(b=b.parentNode);console.log("otherwindows",a);w();return!1};i=function(a){if(k(a))return!0;s=u.media.paused;u.pause();t||o();if(d.map)d.map.getDiv().style.display="block";c.removeEventListener("click",i,!1);window.addEventListener("click",r,!0);window.addEventListener("keydown",C,!0);m.classList.add("active");
m.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};w=function(a){if(k(a))return!0;if(d.map)d.map.getDiv().style.display="none";m.classList.remove("active");m.style.width=y;if(A||J)m.style.top=A,m.style.left=J,m.style.position="absolute";c.addEventListener("click",i,!1);window.removeEventListener("keydown",C,!0);window.removeEventListener("click",r,!0);s||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};d.loaded=!1;m=document.createElement("div");m.setAttribute("class","googlemap");m.id="googlemap"+j;if(d.width)m.style.width=d.width;if(d.height)m.style.height=d.height;m.style.display="none";j++;if(document.getElementById(d.target))document.getElementById(d.target).appendChild(m);else throw"googlemap target container doesn't exist";if(d.top||d.left)m.style.position="absolute",m.style.top=d.top,m.style.left=d.left;
c=document.createElement("div");c.style.position="relative";m.appendChild(c);var L=function(){if(u.media&&u.media.buffered){var a,b,e=!1,g,j,m=u.media.buffered;for(a=0,b=m.length;a<b;a++)if(g=m.start(a),j=m.end(a),g>u.media.duration&&(g=0),g<=d.end&&j>=d.start){e=!0;break}if(!e){setTimeout(L,10);return}}a="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=320x320&maptype=roadmap&"+[["center",d.center||d.location],["markers",d.location],["visible",d.location+"|"+d.center]].map(function(a){return a[0]+
"="+encodeURIComponent(a[1])}).join("&");var k=document.createElement("img");k.src=a;k.style.width="100%";c.appendChild(k);c.appendChild(f);b=document.createElement("div");b.setAttribute("class","info");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>map<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a+'" target="_new">Google Maps</a></span></div><div><a href="'+a+'" target="_new">'+d.location+
'</a></div><div class="watch">view map</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",w,!1);c.appendChild(b);y=d.width;A=d.top;J=d.left;k.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b;if(d.width&&!d.height&&(b=a.exec(d.width))&&b.length>1)a=b[3]||"",b=parseFloat(b[1]),b=b*k.height/k.width,c.style.height=b+a;d.loaded=!0},!1);c.addEventListener("click",i,!1)};L();var G=d.end-d.start;if(isNaN(d.fadeIn))d.fadeIn=Math.min(0.25,G/8);else if(d.fadeIn>
G)d.fadeIn=G;G-=d.fadeIn;if(isNaN(d.fadeOut))d.fadeOut=Math.min(0.25,(d.end-d.start)/8);else if(d.fadeOut>G)d.fadeIn=G;if(!d.type)d.type="ROADMAP";f=document.createElement("div");f.id="actualmap"+a;f.style.width="100%";f.style.height="100%";f.style.top=0;f.style.left=0;f.style.position="absolute";a++;o=function(){g?d.location?(t=!0,e.geocode({address:d.location},function(a,b){b===google.maps.GeocoderStatus.OK?(d.lat=a[0].geometry.location.lat(),d.lng=a[0].geometry.location.lng(),q=new google.maps.LatLng(d.lat,
d.lng),d.debug="now i have my map",d.map=new google.maps.Map(f,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:q,map:d.map,title:d.location})):console.log("cannot get google maps data",b)})):(q=new google.maps.LatLng(d.lat,d.lng),d.debug="now i have my damn map",d.map=new google.maps.Map(f,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:q,map:d.map,title:d.location})):
setTimeout(function(){o()},5)};return{start:function(a,b){var c=function(){if(!(u.media.currentTime>=b.end||u.media.currentTime<b.start))b.loaded?m.style.display="":setTimeout(c,1)};c();var d=this,e=function(){if(b.map){b.map.getDiv().style.display="block";google.maps.event.trigger(b.map,"resize");b.map.setCenter(q);if(b.zoom&&typeof b.zoom!=="number")b.zoom=+b.zoom;b.zoom=b.zoom||8;b.map.setZoom(b.zoom);if(b.heading&&typeof b.heading!=="number")b.heading=+b.heading;if(b.pitch&&typeof b.pitch!=="number")b.pitch=
+b.pitch}else d.media.currentTime>=b.start&&d.media.currentTime<=b.end&&setTimeout(function(){e()},13)};e()},end:function(a,b){m.style.display="none";if(b.map)b.map.getDiv().style.display="none"},_teardown:function(a){document.getElementById(a.target).removeChild(m);m=c=f=a.map=q=null},frame:function(a,b,c){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);m.style.opacity=d}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},
options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN"],label:"Type"},zoom:{elem:"input",type:"text",label:"Zoom"},lat:{elem:"input",type:"text",label:"Lat"},lng:{elem:"input",type:"text",label:"Lng"},location:{elem:"input",type:"text",label:"Location"},heading:{elem:"input",type:"text",label:"Heading"},pitch:{elem:"input",type:"text",label:"Pitch"}}})}})(window.Popcorn);(function(f){f&&f.plugin("html",{manifest:{about:{name:"Popcorn html Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"html-container",html:{elem:"input",type:"text",label:"Text"},fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(f){f.container=f.target&&f.target!=="html-container"?document.getElementById(f.target):
this.container;var j=f.end-f.start;if(isNaN(f.fadeIn))f.fadeIn=0;else if(f.fadeIn>j)f.fadeIn=j;j-=f.fadeIn;if(isNaN(f.fadeOut))f.fadeOut=0;else if(f.fadeOut>j)f.fadeIn=j;f.div=document.createElement("div");f.className&&f.div.setAttribute("class",f.className);f.div.style.display="none";f.div.innerHTML=f.html;f.container.appendChild(f.div)},start:function(f,j){j.div.style.display=""},end:function(f,j){j.div.style.display="none"},frame:function(f,j,a){var f=a-j.start,b=1;f<j.fadeIn?b=f/j.fadeIn:a>j.end-
j.fadeOut&&(b=(j.end-a)/j.fadeOut);j.div.style.opacity=b}})})(window.Popcorn);(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0;f.plugin("image",function(a){var b,g,e,f,d,p,q=this,m=!1,c,t,u,o;if(a.url){o=function(a){(a.keyCode||a.which)===27&&u()};c=function(a){if(!k(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);u();return!1}};t=function(a){if(!k(a)){m=q.media.paused;q.pause();g.removeEventListener("click",t,!1);window.addEventListener("click",c,!0);window.addEventListener("keydown",
o,!0);b.classList.add("active");b.style.cssText="";if(f&&16/9*0.4*e.height/e.width>0.8)b.style.width=e.width/e.height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};u=function(a){if(!k(a)){b.classList.remove("active");b.style.width=f;if(d||p)b.style.top=d,b.style.left=p,b.style.position="absolute";e.style.width="100%";g.addEventListener("click",t,!1);window.removeEventListener("keydown",o,!0);window.removeEventListener("click",
c,!0);m||q.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","image");b.id="image"+j;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";j++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"image target container doesn't exist";if(a.top||a.left)b.style.position=
"absolute",b.style.top=a.top,b.style.left=a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);var s=function(){if(q.media&&q.media.buffered){var b,c,j=!1,m,r,k=q.media.buffered;for(b=0,c=k.length;b<c;b++)if(m=k.start(b),r=k.end(b),m>q.media.duration&&(m=0),m<=a.end&&r>=a.start){j=!0;break}if(!j){setTimeout(s,10);return}}e=document.createElement("img");e.src=a.url;e.style.width="100%";g.appendChild(e);b=document.createElement("div");b.setAttribute("class","info");c=
a.source||"Image";j=a.title;a.link&&(j='<a href="'+a.link+'" target="_new">'+j+"</a>",c='<a href="'+a.link+'" target="_new">'+c+"</a>");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: '+c+"</span></div><div>"+j+'</div><div class="watch">view image</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",u,!1);g.appendChild(b);f=
a.width;d=a.top;p=a.left;e.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c,d,h;d=e.width||e.naturalWidth;h=e.height||e.naturalHeight;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)if(b=c[3]||"",c=parseFloat(c[1]),c=c*e.height/e.width,g.style.height=c+b,!e.width)e.style.height=100*h/d+"%";a.loaded=!0},!1);g.addEventListener("click",t,!1)};s();var r=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,r/8);else if(a.fadeIn>r)a.fadeIn=r;r-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=
Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>r)a.fadeIn=r;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}}},{about:{name:"Popcorn Image Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},
options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},target:"image-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"}}})}})(window.Popcorn);(function(f){if(f){var k=0,j=function(a){var g=a.container=document.createElement("div"),e=g.style,l=a.media;j=f.nop;var d=function(){var f=a.position();e.fontSize="18px";e.width=l.offsetWidth+"px";e.top=f.top+l.offsetHeight-g.offsetHeight-40+"px";e.left=f.left+"px";setTimeout(d,10)};g.id="subtitlediv";e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";d();document.body.appendChild(g)},a=function(a){if(a.languagesrc){if(typeof a.languagesrc===
"function")return a.languagesrc();if(a.languagesrc.tagName==="SELECT")return a.languagesrc.options[a.languagesrc.selectedIndex].value;if(a.languagesrc.value!==void 0)return a.languagesrc.value}};f.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"},
fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(b){var g=document.createElement("div"),e=document.getElementById(b.accessibilitysrc);g.id="subtitle-"+k;if(b.cssText)g.style.cssText=b.cssText;g.style.display="none";g.setAttribute("lang",b.language);k++;(!this.container&&!b.target||b.target==="subtitle-container")&&j(this);b.container=b.target&&b.target!=="subtitle-container"?document.getElementById(b.target):this.container;document.getElementById(b.container.id).appendChild(g);
b.innerContainer=g;b.showSubtitle=function(){b.innerContainer.innerHTML=b.text};b.toggleSubtitles=function(){};if(b.languagesrc){var f;if(typeof b.languagesrc==="string"&&(f=document.getElementById(b.languagesrc)))b.languagesrc=f;b.selectedLanguage=a(b);if(!this.languageSources)this.languageSources={};this.languageSources[b.languagesrc]||(this.languageSources[b.languagesrc]={});if(!this.languageSources[b.languagesrc][b.target]){this.languageSources[b.languagesrc][b.target]=!0;var d=this;this.updateSubtitleLanguage=
function(){b.toggleSubtitles();a(b);var e=d.currentTime(),g,f;for(g=d.data.trackEvents.startIndex-1,f=d.data.trackEvents.byStart;g>=0;g--){var c=f[g];if(c._natives.type!=="subtitle"||c.end<e)break;c.innerContainer.style.display=c.language===a(c)?"":"none";c.showSubtitle(c,c.text)}};b.languagesrc.addEventListener&&b.languagesrc.addEventListener("change",this.updateSubtitleLanguage,!1)}}if(e)b.accessibility=e,b.toggleSubtitles=function(){b.selectedLanguage=a(b);if(b.accessibility.checked||b.selectedLanguage!==
(b.language||""))b.display="",b.container.style.display=b.display;else if(b.selectedLanguage===(b.language||""))b.display="none",b.container.style.display=b.display},b.accessibility.addEventListener("change",b.toggleSubtitles,!1),b.toggleSubtitles();g=b.end-b.start;if(isNaN(b.fadeIn))b.fadeIn=Math.min(0.25,g/8);else if(b.fadeIn>g)b.fadeIn=g;g-=b.fadeIn;if(isNaN(b.fadeOut))b.fadeOut=Math.min(0.25,(b.end-b.start)/8);else if(b.fadeOut>g)b.fadeIn=g},start:function(b,g){if(g.language===a(g))g.innerContainer.style.display=
"",g.showSubtitle(g,g.text)},end:function(a,g){g.innerContainer.style.display="none";g.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)},frame:function(a,g,e){var a=e-g.start,f=1;a<g.fadeIn?f=a/g.fadeIn:e>g.end-g.fadeOut&&(f=(g.end-e)/g.fadeOut);g.innerContainer.style.opacity=f}})}})(window.Popcorn);(function(f){if(f){var k=0;f.plugin("videoComment",function(f){function a(a){return a<10?"0"+a:a}if(!f.text)return!1;var b,g,e=this;b=document.createElement("div");b.setAttribute("class","video-comment");b.id="video-comment"+k;b.style.display="none";b.setAttribute("lang",f.language);k++;if(document.getElementById(f.target))document.getElementById(f.target).appendChild(b);else throw"comment target container doesn't exist";var l,d=new Date(f.date);l=a(d.getMonth()+1)+"."+a(d.getDate());d.getFullYear()!==
(new Date).getFullYear()&&(l+="."+a(d.getFullYear()));var p=document.createElement("time");p.setAttribute("datetime",d.getUTCFullYear()+"-"+a(d.getUTCMonth()+1)+"-"+a(d.getUTCDate())+"T"+a(d.getUTCHours())+":"+a(d.getUTCMinutes())+":"+a(d.getUTCSeconds())+"Z");p.innerHTML=l;b.appendChild(p);l=document.createElement("span");l.setAttribute("class","author");l.appendChild(document.createTextNode(f.author||"Anonymous"));b.appendChild(l);l=document.createElement("p");var d=/https?:\/\/([a-zA-Z0-9\.]+\.[a-zA-Z]{2,6}[^\s\n\r\t$]*)/gi,
q;for(q=0;p=d.exec(f.text);)l.appendChild(document.createTextNode(f.text.substr(q,p.index-q))),q=document.createElement("a"),q.setAttribute("href",p[0]),q.setAttribute("target","_new"),p[1].length>20?q.appendChild(document.createTextNode(p[1].substr(0,17)+"...")):q.appendChild(document.createTextNode(p[1])),q.addEventListener("click",function(){g=!1;e.pause()},!0),l.appendChild(q),q=p.index+p[0].length;q<f.text.length&&l.appendChild(document.createTextNode(f.text.substr(q)));b.appendChild(l);l=document.createElement("div");
l.setAttribute("class","flag");l.appendChild(document.createTextNode("Flag this as inappropriate"));l.addEventListener("click",function(){var a=b.getAttribute("class"),a=a.split(" ");a.indexOf("flagged")<0&&(a.push("flagged"),b.setAttribute("class",a.join(" ")));f.flagCallback&&f.flagCallback(f.id)},!1);b.appendChild(l);l=document.createElement("div");l.setAttribute("class","unflag");l.appendChild(document.createTextNode("unflag this comment"));l.addEventListener("click",function(){var a,c=b.getAttribute("class"),
c=c.split(" ");a=c.indexOf("flagged");a>=0&&(c.splice(a,1),b.setAttribute("class",c.join(" ")));f.flagCallback&&f.flagCallback(f.id,!0)},!1);b.appendChild(l);b.addEventListener("mouseover",function(){var a=setTimeout(function(){g=!e.media.paused;e.media.pause()},500);b.onmouseout=function(){clearTimeout(a);g&&e.media.play()}},!1);return{start:function(){b.style.display=""},end:function(){b.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(b)},
frame:function(a,c,d){var a=d-c.start,e=1,g=0;a<0.5?g=-207*(1-a/0.5)+"px":d>c.end-0.5&&(e=(c.end-d)/0.5);b.style.marginRight=g;b.style.opacity=e}}},{about:{name:"Popcorn Video Comments Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"}}})}})(window.Popcorn);(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0;f.plugin("wikipedia",function(a){var b,g,e,l,d,p,q,m=this,c=!1,t,u,o,s;if(a&&(a.url||a.id)){if(a.id)e=a.id,l=window.language||a.language||"en",a.url="http://en.wikipedia.org/wiki/"+e;else if(e=/(https?:\/\/)?((en)\.)?wikipedia\.org\/wiki\/(.*)\/?/.exec(a.url),l=window.language||a.language||e[3]||"en",e=e[4],!e)return;s=function(a){(a.keyCode||a.which)===27&&o()};t=function(a){if(!k(a)){var c=
a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);o();return!1}};u=function(a){if(!k(a)){c=m.media.paused;m.pause();g.removeEventListener("click",u,!1);window.addEventListener("click",t,!0);window.addEventListener("keydown",s,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};o=function(a){if(!k(a)){b.classList.remove("active");b.style.width=d;if(p||q)b.style.top=
p,b.style.left=q,b.style.position="absolute";g.addEventListener("click",u,!1);window.removeEventListener("keydown",s,!0);window.removeEventListener("click",t,!0);c||m.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","wikipedia");b.id="wikipedia"+j;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";j++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);
else throw"wikipedia target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);f.xhr.getJSONP("http://"+l+".wikipedia.org/w/api.php?action=parse&props=text&page="+e+"&format=json&callback=wikipedia",function(b){if(b&&b.parse){var c=b.parse.text["*"],c=c.substr(c.indexOf("<p>")+3),c=c.substr(0,c.indexOf("</p>")),c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,
""),e=[],j,m,k,s,e=e.concat(b.parse.images);for(s=0;s<e.length;s++)if(k=e[s].substr(-4).toLowerCase(),k===".jpg"){m=e[s];break}else k===".png"&&(j=e[s]);m||(m=j);var t=document.createElement("div");t.setAttribute("class","content");j=document.createElement("article");j.appendChild(document.createTextNode(c));t.appendChild(j);t.appendChild(document.createElement("br"));g.appendChild(t);c=document.createElement("div");c.setAttribute("class","info");b=b.parse.displaytitle;b=b.replace("<","&lt;");b=b.replace(">",
"&gt;");c.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>wiki<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a.url+'" target="_new">wikipedia</a></span></div><div><a href="'+a.url+'" target="_new">'+b+'</a></div><div class="watch">read article</div>';c.getElementsByClassName("minimize").item(0).addEventListener("click",o,!1);g.appendChild(c);d=a.width;p=a.top;q=a.left;g.addEventListener("click",
u,!1);m?(m="http://"+l+".wikipedia.org/w/api.php?action=query&prop=imageinfo&titles=File:"+m+"&iiprop=url|size&iiurlwidth=200&iiurlheight=200&format=json&callback=wikipediaImage",f.xhr.getJSONP(m,function(b){var c;b.query.pages&&b.query.pages[0]&&(c=b.query.pages[0].imageinfo[0]);if(c)b=document.createElement("img"),b.src=c.thumburl||c.url,b.onload=function(){a.loaded=!0},t.insertBefore(b,t.firstChild)})):a.loaded=!0}});e=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,e/8);else if(a.fadeIn>
e)a.fadeIn=e;e-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>e)a.fadeIn=e;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}}},{about:{name:"Popcorn Wikipedia Plugin",
version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},url:{elem:"input",type:"text",label:"url"},target:"wikipedia-container"}})}})(window.Popcorn);(function(f){function k(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(f){var j=0,a=!1,b=!1,g=function(){if(document.body){a=!0;var e=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){b=!0;e&&e()};f.getScript("http://www.youtube.com/player_api")}else setTimeout(function(){g()},1)};f.plugin("youtube",function(e){var l,d,p,q,m,c,t,u=this,o=!1,s,r,i,w;a||g();w=function(a){var b=a.keyCode||a.which;if(b===27)i();else{if(b===32)t&&t.pauseVideo&&
(t.getPlayerState()===1?t.pauseVideo():t.getPlayerState()===2&&t.playVideo()),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};s=function(a){if(!k(a)){var b=a.target;do if(b===l)return!0;while(b=b.parentNode);console.log(a);i();return!1}};r=function(a){if(!k(a)){o=u.media.paused;u.pause();d.removeEventListener("click",r,!1);window.addEventListener("click",s,!0);window.addEventListener("keydown",w,!0);l.classList.add("active");
l.style.cssText="";t&&t.playVideo&&t.playVideo();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};i=function(a){if(!k(a)){t&&t.pauseVideo&&t.pauseVideo();l.classList.remove("active");l.style.width=p;if(q||m)l.style.top=q,l.style.left=m,l.style.position="absolute";d.addEventListener("click",r,!1);window.removeEventListener("keydown",w,!0);window.removeEventListener("click",s,!0);o||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};e.loaded=!1;l=document.createElement("div");l.setAttribute("class","youtube");l.id="youtube"+j;if(e.width)l.style.width=e.width;if(e.height)l.style.height=e.height;l.style.display="none";j++;if(document.getElementById(e.target))document.getElementById(e.target).appendChild(l);else throw"youtube target container doesn't exist";if(e.top||e.left)l.style.position="absolute",l.style.top=e.top,l.style.left=e.left;d=document.createElement("div");
d.style.position="relative";l.appendChild(d);var C=function(){if(u.media&&u.media.buffered){var a,g,j=!1,k,l,h=u.media.buffered;for(a=0,g=h.length;a<g;a++)if(k=h.start(a),l=h.end(a),k>u.media.duration&&(k=0),k<=e.end&&l>=e.start){j=!0;break}if(!j){setTimeout(C,10);return}}c="http://gdata.youtube.com/feeds/api/videos/"+e.videoid+"?v=2&alt=jsonc&callback=youtube";f.xhr.getJSONP(c,function(a){if(a&&a.data){var c=a.data;(a=e.url)||(a="http://www.youtube.com/watch?v="+c.id);var g=document.createElement("img");
g.src=c.thumbnail.hqDefault;g.style.width="100%";d.appendChild(g);var f=document.createElement("div");f.id="ytplayer-"+c.id;f.setAttribute("class","player");d.appendChild(f);var h=function(){b?t=new window.YT.Player("ytplayer-"+c.id,{height:320,width:240,videoId:c.id,playerVars:{origin:document.location.protocol+"//"+document.location.hostname,html5:1},events:{onReady:function(){}}}):setTimeout(h,1)},f=document.createElement("div");f.setAttribute("class","info");f.innerHTML='<div class="media">video<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
a+'" target="_new">YouTube</a></span></div><div><a href="'+a+'" target="_new">'+c.title+'</a></div><div class="watch">watch video</div>';d.appendChild(f);a=document.createElement("span");a.innerHTML="minimize window";a.setAttribute("class","minimize");a.addEventListener("click",i,!1);d.appendChild(a);h();p=e.width;q=e.top;m=e.left;g.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b,c,f;c=g.width||g.naturalWidth;f=g.height||g.naturalHeight;if(e.width&&!e.height&&(b=a.exec(e.width))&&
b.length>1)if(a=b[3]||"",b=parseFloat(b[1]),b=b*g.height/g.width,d.style.height=b+a,!g.width)g.style.height=100*f/c+"%";e.loaded=!0},!1);d.addEventListener("click",r,!1)}})};if(e.url&&!e.videoid){var y=/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]*)/i.exec(e.url);if(y&&y.length>=5)e.videoid=y[4]}e.videoid&&C();y=e.end-e.start;if(isNaN(e.fadeIn))e.fadeIn=Math.min(0.25,y/8);else if(e.fadeIn>y)e.fadeIn=y;y-=e.fadeIn;if(isNaN(e.fadeOut))e.fadeOut=Math.min(0.25,(e.end-e.start)/
8);else if(e.fadeOut>y)e.fadeIn=y;return{start:function(a,b){var c=function(){b.loaded?l.style.display="":setTimeout(c,1)};c()},end:function(){l.style.display="none";i()},_teardown:function(a){i();(a=document.getElementById(a.target))&&a.removeChild(l)},frame:function(a,b,c){if(b.loaded){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);l.style.opacity=d}}}},{about:{name:"Popcorn YouTube Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},
options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},target:"youtube-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},top:{elem:"input",type:"text",label:"Top"},left:{elem:"input",type:"text",label:"Left"}}})}})(window.Popcorn);(function(f){if(f){var k={start:function(){},end:function(){}};f.plugin("words",function(f){var a,b,g,e,l,d;if(!f)return k;if(!f.target||!f.text)return k;a=this.media;b=f.target;if(typeof b==="string"&&(b=document.getElementById(b),!b))return k;g=document.createElement("div");g.style.cssText=f.style||"";if((d=f.top)||d===0)isNaN(d)||(d+="px"),g.style.top=d,g.style.position="absolute";if((d=f.left)||d===0)isNaN(d)||(d+="px"),g.style.left=d,g.style.position="absolute";if((d=f.right)||d===0)isNaN(d)||
(d+="px"),g.style.right=d,g.style.position="absolute";if((d=f.bottom)||d===0)isNaN(d)||(d+="px"),g.style.bottom=d,g.style.position="absolute";if(f.align)g.style.textAlign=f.align;g.style.display="none";f.classes?f.classes.length&&f.classes.join?g.setAttribute("class","popcorn-words "+f.classes.join(" ")):g.setAttribute("class","popcorn-words "+f.classes.split(/,\s\n\r/).join(" ")):g.setAttribute("class","popcorn-words");f.link?(e=document.createElement("a"),e.setAttribute("href",f.link),f.linkTarget&&
e.setAttribute("target",f.linkTarget),e.addEventListener("click",function(){a.pause()},!1),g.appendChild(e)):e=g;l=f.text.split(/[\n\r]/);for(d=0;d<l.length;d++)d&&e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode(l[d]));b.appendChild(g);f.container=g;(function(){var a,b,d=["onLoad","onStart","onFrame","onEnd"];for(a=0;a<d.length;a++)b=d[a],f[b]&&typeof f[b]==="string"&&window[f[b]]&&typeof window[f[b]]==="function"&&(f[b]=window[f[b]])})();if(typeof f.onLoad==="function")f.onLoad(f);
return{start:function(a,b){g.style.display="";if(typeof b.onStart==="function")try{b.onStart(b)}catch(d){}},frame:function(a,b,d){if(typeof b.onFrame==="function")try{b.onFrame(b,d)}catch(c){}},end:function(a,b){g.style.display="none";if(typeof b.onEnd==="function")try{b.onEnd(b)}catch(d){}},_teardown:function(a){g.parentNode&&(g.parentNode.removeChild(g),g=null,delete a.container)}}},{about:{name:"Popcorn Words Plugin",version:0.1,author:"Brian Chirls",website:"http://chirls.com"},options:{start:{elem:"input",
type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},text:{elem:"input",type:"text",label:"Text"},link:{elem:"input",type:"text",label:"Link (URL)"},classes:{elem:"input",type:"text",label:"List of classes to apply to text container"},style:{elem:"input",type:"text",label:"CSS to apply to text"},align:{elem:"select",label:"CSS to apply to text"},top:{elem:"input",type:"number",label:"Top position"},left:{elem:"input",type:"number",label:"Left position"},bottom:{elem:"input",type:"number",
label:"Bottom position"},right:{elem:"input",type:"number",label:"Right position"}}})}})(window.Popcorn);(function(f){function k(a){var a=Math.floor(a),b=a%60,a=(a-b)/60;b<10&&(b="0"+b);if(a>59){var c=Math.floor(a/60);a%=60;a<10&&(a="0"+a);return c+":"+a+":"+b}return a+":"+b}function j(a,b,c,d){var e,f,g=[],j=[],i,k,m=Date.now(),l,n;typeof a==="string"&&(a=h.getElementById(a));if(a)if(Modernizr.cssanimations){a.style.MozTransitionProperty="";a.style.webkitTransitionProperty="";a.style.oTransitionProperty="";a.style.transitionProperty="";for(e in b){f=b[e];g.push(e);if(f.from!==void 0)a.style[e]=f.from;
j.push(f.to)}i=g.join(",");setTimeout(function(){a.style.MozTransitionProperty=i;a.style.webkitTransitionProperty=i;a.style.oTransitionProperty=i;a.style.transitionProperty=i;a.style.MozTransitionDuration=c+"s";a.style.webkitTransitionDuration=c+"s";a.style.oTransitionDuration=c+"s";a.style.transitionDuration=c+"s";d&&(l=function(){d();a.removeEventListener("transitionend",l,!0);a.removeEventListener("webkitTransitionEnd",l,!0);a.removeEventListener("oTransitionEnd",l,!0)},a.addEventListener("transitionend",
l,!0),a.addEventListener("webkitTransitionEnd",l,!0),a.addEventListener("oTransitionEnd",l,!0));for(e=0;e<g.length;e++)a.style[g[e]]=j[e]},0)}else{k=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/;for(e in b)if(f=b[e],(i=k.exec(f.from))&&i.length>1&&i[1])g.push({prop:e,from:parseFloat(i[1]),to:parseFloat(f.to),unit:i[3]}),a.style[e]=f.from;n=function(){var b=(Date.now()-m)/1E3,e=Math.min(b/c,1),f,h,R;for(f=0,h=g.length;f<h;f++)R=g[f],a.style[R.prop]=R.from+e*(R.to-R.from)+(R.unit||"");b<c?ma(n,a):d&&d()};n()}}
function a(a,b,c,d){a.onmousedown=function(a){if(b)if(b(a||f.event)&&a.preventDefault)a.preventDefault();else return;if(c)h.onmousemove=function(a){c(a||f.event)};h.onmouseup=function(a){d&&d(a||f.event);h.onmousemove=null;h.onmouseup=null}};a.ontouchstart=function(e){e.preventDefault&&e.preventDefault();a.onmousedown=null;b&&b(e.touches[0]||f.event);if(c)h.ontouchmove=function(a){c(a.touches[0]||f.event);return!1};h.ontouchend=function(){d&&d();h.ontouchmove=null;h.ontouchend=null}}}function b(a){var b,
c;if(a)if(a.pageX!==void 0||a.pageY!==void 0)b=a.pageX,c=a.pageY;else if(a.clientX!==void 0||a.clientY!==void 0)b=a.clientX+h.body.scrollLeft+h.documentElement.scrollLeft,c=a.clientY+h.body.scrollTop+h.documentElement.scrollTop;return{x:b,y:c}}function g(a,b){var c=b;a.x-=b.clientLeft+b.offsetLeft;for(a.y-=b.clientTop+b.offsetTop;(c=c.offsetParent)&&c.nodeName!=="BODY";)a.x-=c.clientLeft+c.offsetLeft,a.y-=c.clientTop+c.offsetTop}function e(){if(ea){var a=N.height-17,b=a*(1-n.volume),c=ea;c.shadowOffsetX=
0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,N.width,N.height);c.lineWidth=7;c.lineCap="round";var d=c.createLinearGradient(0,0,7,0);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,a+8.5);c.stroke();b+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,b);c.stroke();c.beginPath();c.lineWidth=1;c.strokeStyle="rgb(96, 96, 96)";c.fillStyle="rgb(128, 128, 128)";
c.shadowOffsetX=1;c.shadowOffsetY=2;c.shadowBlur=5;c.shadowColor="rgba(0, 0, 0, 0.19)";c.arc(8.5,b,8.5,0,Math.PI*2,!0);c.fill();c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(8.5,b,3.5,0,Math.PI*2,!0);c.fill()}}function l(a){if(n.duration&&Y&&(a||!(va===n.currentTime&&n.networkState>=4))){var b=D.width-17,a=b*n.currentTime/n.duration,c=Y;c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,D.width,D.height);c.lineWidth=7;c.lineCap="round";
var d=c.createLinearGradient(0,0,0,7);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(b+8.5,8.5);c.stroke();var d=[],e,f,h,j=n.buffered,i=0;if(j){for(e=0,f=j.length;e<f;e++)h=j.start(e),h>n.duration&&(h=0),h!==i&&d.push({start:i,end:h}),i=j.end(e);i!==n.duration&&d.push({start:i,end:n.duration})}if(Z){e=i===n.duration?0:Math.floor(Date.now()/40)%8;c.strokeStyle=Z[e];for(e=0,f=d.length;e<f;e++)i=d[e].start/
n.duration*b,h=d[e].end/n.duration*b,c.beginPath(),c.moveTo(i+8.5,8.5),c.lineTo(h+8.5,8.5),c.stroke()}a+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(a,8.5);c.stroke();b={x:$.x,y:$.y};g(b,D);b=Math.sqrt(Math.pow(b.x-a,2)+Math.pow(b.y-8.5,2))-20;b=Math.max(0,b);if(b<100&&(b=8.5*(1-b/100),b*2>7))c.beginPath(),c.lineWidth=1,c.fillStyle="rgb(128, 128, 128)",c.shadowOffsetX=1,c.shadowOffsetY=2,c.shadowBlur=5,c.shadowColor="rgba(0, 0, 0, 0.19)",c.arc(a,8.5,b,0,Math.PI*
2,!0),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(a,8.5,3.5,0,Math.PI*2,!0);c.fill()}}function d(a){var b=f.innerWidth||800,c=f.innerHeight||b*9/16;if(a||b!==na||c!==oa||!D.width){na=b;oa=c;var d=fa/ga/(b/c);d>1.2?(d=Math.min(1,(d-1.2)/0.25),c=Math.min(d*30,Math.max(b-640,0)*0.1),b=Math.floor(b-c*2)):(d<1/1.05?(d=Math.min(1,(1/1.05-d)/0.2),b=Math.min(d*40,Math.max(b-360,0)*0.1),b=Math.floor(c-b*2),b/=ga):b=Math.min(c/ga,b/fa),b=Math.floor(fa*
b));h.body.style.overflow=b<640?"auto":"";if(a||pa!==b){pa=b;var a=D.parentNode,b=a.offsetWidth,e;for(c=0,d=a.childNodes.length;c<d;c++)e=a.childNodes[c],e.tagName&&e!==D&&(ha[e.id]===void 0&&e.offsetWidth>0&&(ha[e.id]=e.offsetWidth+6),b-=ha[e.id]);D.width=b-6;l(!0)}}K=Date.now()}function p(a){if(P&&(!a||!a.target||!(a.target!==a.currentTarget||a.target.classList.contains("button"))))h.getElementById("volume-controls").style.display="none",h.getElementById("settings-controls").style.display="none",
h.getElementById("help-controls").style.display="none",h.getElementById("share-controls").style.display="none",P=!1}function q(a){var b=h.getElementById("comment-name"),c=h.getElementById("comment-email"),d=h.getElementById("comment-text"),e=h.getElementById("comment-post"),f;f=c.value;var g,i;for(g=0;g<f.length;g++)if(" \n\r\t\u000c".indexOf(f.charAt(g))<0)break;for(i=f.length-1;i>=g;i--)if(" \n\r\t\u000c".indexOf(f.charAt(i))<0)break;f=f.substring(g,i+1);b=b.value.length;f=!f.length||wa.test(f);
if(a&&a.target===c)f?(h.getElementById("comment-email-invalid").style.display="none",c.classList.remove("error")):(h.getElementById("comment-email-invalid").style.display="block",c.classList.add("error"));b&=f;if(d.value.length>150){if(a&&a.target===d)a=h.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.add("error")}else if(a&&a.target===d)a=h.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.remove("error");(b=(b=b&&d.value.length<=
150)&&aa)?e.classList.remove("disabled"):e.classList.add("disabled");return b}function m(){if(U){var a=Date.now()-K;l(a<=100);P&&a>5E3&&p();var b;if(n.paused||n.ended){if(qa!==(n.paused||n.ended))for(a=0,b=V.length;a<b;a++)V[a].style.opacity=1}else if(a<=5E3&&(a=$,U)){b=0.4*ka.offsetWidth;var c=Math.max(0,1-(Date.now()-K)/5E3),d,e,f,h,i,j;for(d=0,e=V.length;d<e;d++)h=V[d],i=h.offsetWidth,j=h.offsetHeight,f={x:a.x,y:a.y},g(f,h),i=f.x<0?-f.x:f.x>i?f.x-i:0,f=f.y<0?-f.y:f.y>j?f.y-j:0,f=Math.sqrt(i*i+
f*f),f=1-0.8*(f/b),f<0.2?f=0.2:f>1&&(f=1),h.style.opacity=c*f}qa=n.paused||n.ended;n.duration?(a=k(n.currentTime),b=a+" / "+k(n.duration)):(a="-:--",b="-:-- / -:--");if(la.innerHTML!==b)la.innerHTML=b;if(H&&X.innerHTML!==a)X.innerHTML=a}ma(m,ka)}function c(){n.paused?n.play():n.ended?(n.currentTime=0,n.play()):n.pause()}function t(a){var b=h.getElementById(a+"-toggle");if(b)I[a]?(b.innerHTML=x==="de"?"ein":"On",b.classList.add("on")):(b.innerHTML=x==="de"?"aus":"Off",b.classList.remove("on"))}function u(){function a(b,
c){var d=new XMLHttpRequest;d.open("GET","comments.php?"+(c?"unflag":"flag")+"="+b,!0);d.send(null)}if(x){var b="comments.php?vtime="+(n.currentTime||0)+"&language="+x;if(ba[x]){if(Date.now()-ba[x]<5E3)return;b+="&since="+ba[x]/1E3}var c=new XMLHttpRequest;c.open("GET",b,!0);c.onreadystatechange=function(){if(c.readyState===4&&c.status===200){var b=JSON.parse(c.responseText),d,e,f;for(d=0,e=b.length;d<e;d++)if((f=b[d])&&!ca[f[0]])ca[f[0]]=f,v.videoComment({start:f[2],end:f[2]+5,id:f[0],author:f[4],
text:f[5],date:f[1]*1E3,language:f[3],target:"comments",flagCallback:a})}};c.send(null);ba[x]=Date.now()}}function o(a){!a&&F&&u();h.documentElement.setAttribute("lang",x);for(var b,c=["en","de"],a=0;a<c.length;a++)b=h.getElementById("language-"+c[a]),c[a]===x?b.classList.add("on"):b.classList.remove("on");var d,e,f,g;for(a in S)if(S.hasOwnProperty(a)){try{d=h.querySelectorAll(a)}catch(i){d=(d=h.getElementById(a.substr(1)))?[d]:[]}c=(S[a][x]||"").split("\n");for(f=0,g=d.length;f<g;f++)if((b=d[f])&&
c.length&&c[0].length){for(;b.firstChild;)b.removeChild(b.firstChild);try{b.appendChild(h.createTextNode(c[0]));for(e=1;e<c.length;e++)b.appendChild(h.createElement("br")),b.appendChild(h.createTextNode(c[e]))}catch(j){if(a==="#title")h.title=c.join(" ")}}}if(H){e=["comment-email","comment-name","comment-text"];b=[];d=[];for(a=0;a<e.length;a++)d.push(h.getElementById(e[a])),b.push(d[a].previousSibling.offsetWidth);for(a=0;a<e.length;a++)d[a].style.paddingLeft=b[a]+"px"}t("comments");t("subtitles");
t("resources");v&&v.updateSubtitleLanguage&&v.updateSubtitleLanguage()}function s(){H=!0;n.pause();if(Math.abs(W-n.currentTime)>10)h.getElementById("comment-text").value="";var a;a=n.duration?k(n.currentTime):"-:--";if(H&&X.innerHTML!==a)X.innerHTML=a;h.getElementById("add-comment-controls").style.display="block";o(!0)}function r(a){if(!a.altKey&&!a.altGraphKey&&!a.metaKey&&(K=Date.now(),!H)){var b=a.keyCode||a.which;b>=65&&b<=90||b>=97&&b<=122||b>=256&&b<=658||b>=884&&b<=8191?(a.preventDefault(),
s(),a=h.getElementById("comment-text"),a.value=String.fromCharCode(b),a.setSelectionRange(a.value.length,a.value.length),a.focus(),q()):(b===32&&(c(),a.preventDefault()),K=Date.now())}}function i(){var a=new XMLHttpRequest;a.open("GET","save.php?language="+x,!0);a.send(null)}function w(a){var b;if(a!==M){F?(n.pause(),p()):(b=h.getElementById("youtube-container"),n&&n.pauseVideo&&n.pauseVideo());f.location.hash=a||"";if(M)h.getElementById(M).style.display="none";if(a){if(b)b.style.display="none";if(!M&&
(h.getElementById("back-controls").style.display="block",h.getElementById("bottom-controls").style.display="none",O))O.style.display="block";h.getElementById(a).style.display="block";Q.style.zIndex="1500";M=a}else if(M=!1,!M){Q.style.zIndex="";h.getElementById("back-controls").style.display="";h.getElementById("bottom-controls").style.display="";if(O)O.style.display="";if(b)b.style.display=""}}}function C(){var a,b=new Image;b.onload=function(){Z=[];var c=h.createElement("canvas");c.height=7;c.width=
8;var d=c.getContext("2d");for(a=0;a<8;a++)d.clearRect(0,0,8,7),d.drawImage(b,-a,0),d.drawImage(b,8-a,0),Z.push(Y.createPattern(c,"repeat"))};b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAExJREFUeNpi/P//fzADA4MwAwLcAuIDUDYbE5DYDMRvkRSoAbEDlP0LpOAXPkWMQCtggmxA7ItuHRNUNQMuk5igRuFUxASlcSoCCDAA+ZwYM8U0vFEAAAAASUVORK5CYII=";var c=h.getElementsByClassName("fade");for(a=0;a<c.length;a++)V.push(c.item(a))}function y(){function c(a){var e;
a.which?e=a.which===3:a.button&&(e=a.button===2);if(e)return!1;p();d=d&&n.paused;a=b(a);g(a,D);a=(a.x-8.5)/(D.offsetWidth-17);a>=0&&a<=1&&(a*=n.duration,v.currentTime(a));n.pause();return!0}var d=!0;a(D,c,c,function(){d||(n.play(),d=!0)})}function A(){function c(a){var d;a.which?d=a.which===3:a.button&&(d=a.button===2);if(d)return!1;a=b(a);g(a,N);a=1-(a.y-8.5)/(N.offsetHeight-17);if(a>=0&&a<=1)n.volume=a;return!0}a(N,c,c,null)}function J(){if(B>n.duration)B=n.duration;if(B)n.currentTime=B,ia||n.play(),
U=!0;if(ja)n.muted=!0;y();m()}function L(){var a,b,c,d,e=!1;c=f.location.pathname.split("/");c=c.concat(f.location.hash.substr(1).split("/"));for(d=c.length-1;d>=0;d--)if(a=c[d].toLowerCase(),a==="pause"?ia=!0:a==="mute"?ja=!0:!b&&(a==="about"||a==="contact"||a==="disclaimer"||a==="terms-of-use")?b=a:!e&&a&&!isNaN(a)&&a>=0&&(e=!0,B=parseFloat(a)),b&&e&&ja&&ia)break;if(da=b)O?w(da):E.style.display="none";else if(e&&n&&n.duration>B)n.currentTime=B}function G(){return x}function z(){F=!1;B=0;h.getElementById("no-video").style.display=
"block";h.getElementById("intro-play").style.display="none";S["#intro-caption"]={en:"With the popcorn.js and HTML5 video technology on board, Europeana Remix is at the vanguard of using audiovisual heritage in engaging people with their history.",de:"Mit dem Popcorn.js und HTML5-Video-Technologie an Bord, ist Europeana Remix an der Spitze der Nutzung von Online-Video im Dialog mit Menschen mit ihrer Geschichte."};var a=h.createElement("script");a.setAttribute("type","text/javascript");a.src="http://www.youtube.com/player_api";
var b=h.createElement("div");b.id="youtube-container";b.style.display="none";E.insertBefore(b,h.getElementById("intro-text"));f.onYouTubePlayerAPIReady=function(){navigator.userAgent.match(/iPad/i);n=new f.YT.Player("youtube-container",{width:640,height:320,videoId:"8uLOWsWod7c",playerVars:{origin:h.location.protocol+"//"+h.location.hostname,html5:html5}})};h.body.appendChild(a);h.getElementById("no-video-continue").onclick=function(){h.getElementById("intro-text").style.display="none";b.style.display=
""};h.body.classList.add("no-video")}var h=f.document,ta=f.Popcorn;h.getElementById("background");var ua=h.getElementsByTagName("footer")[0],ka=h.getElementById("video-frame"),n=h.getElementById("video"),la=h.getElementById("play-timer"),X=h.getElementById("add-comment-timer"),D=h.getElementById("progress"),N=h.getElementById("volume-canvas"),ea,Y,E=h.getElementById("intro"),Q=h.getElementById("eu-logo"),O,ra,sa,v,B=0,ia=!1,ja=!1,wa=RegExp("^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[A-Z]{2}|aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)$",
"i"),ma=function(){return f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(a){f.setTimeout(a,16)}}(),va,qa,K=0,ba={},na,oa,pa,M,da,P=!1,W=-10,$={},F=!0,I={comments:!0,resources:!0,subtitles:!0},U=!1,H=!1,aa=!1,ca={},T=[],x,S={"#title":{en:"A First World War friendship \u2013 an interactive HTML5 video by Europeana",de:"Eine Erste Weltkrieg Freundschaft - ein interaktiver HTML5 Video von Europeana"},"#about-button":{en:"About",
de:"\u00fcber uns"},"#contact-button":{en:"Contact",de:"kontakt"},"#share-button":{en:"Share",de:"teilen"},"#comments-button-text":{en:"User Comments:",de:"User-Kommentare:"},"#resources-button-text":{en:"Related Items:",de:"relatierte Artikel:"},"#subtitles-button-text":{en:"Subtitles:",de:"Untertitel"},"#language-button-text":{en:"Language:",de:"Sprache:"},"#back-button":{en:"Back to film",de:"Zur\u00fcck zum Film"},".popcorn-source":{en:"source",de:"Quelle"},"#write-comment-at":{en:"Write a comment at:",
de:"Schreib einen Kommentar zu:"},"#comment-email-label":{en:"Email Address:",de:"E-Mail-Adresse:"},"#comment-text-label":{en:"Comment:",de:"Kommentar:"},"#comment-tos":{en:"I agree to terms of use",de:"Ich stimme den Nutzungsbedingungen zu"},"#comment-post":{en:"Post My Comment",de:"absenden"},"#help-button":{en:"Help",de:"Hilfe"},"#help-window > div":{en:"Use this button:",de:"Diese taste dr\u00fccken:"},"#help-comment-p":{en:"(or just start typing) to leave a comment",de:"um einen Kommentar zu schreiben (oder fangen Sie einfach mit schreiben an)"},
"#help-language-p":{en:"to change the language/subtitle settings",de:"Um die Sprache Untertitel-Einstellungen zu \u00e4ndern"},"#help-settings-p":{en:"to toggle subtitles, related items and comments on or off",de:"um Untertitel, verwandte Artikel und Kommentare ein-oder auszuschalten"},"#intro-caption":{en:"An interactive experience around the story of an unlikely friendship during the First World War.",de:"Ein interaktives Erlebnis rund um die Geschichte einer ungew\u00f6hnlichen Freundschaft w\u00e4hrend des Ersten Weltkriegs."},
"#no-video-browsers":{en:"Please be aware that for optimal performance, these browsers are recommended:",de:"Bitte beachten Sie, dass f\u00fcr eine optimale Leistung die folgenden Browser empfohlen sind:"},"#no-video-continue-text":{en:"Click 'Continue' for the video without the interactive components.",de:"Klicken Sie auf 'Weiter\u2019 f\u00fcr das Video ohne die interaktiven Komponenten."},"#no-video-continue":{en:"Continue",de:"Weiter"},"#end-title":{en:"Like this story?\nHelp us build the next",
de:"Gef\u00e4llt Ihnen diese Geschichte?\nHelfen Sie uns beim Aufbau der n\u00e4chsten!"},"#end-caption":{en:"Europeana wants to hear your family story about World War 1. Share your photos, letters and other memorabilia.",de:"Europeana will Ihre Familiengeschichte \u00fcber den 1. Weltkrieg gerne h\u00f6ren. Teilen Sie Ihre Fotos, Briefe und andere Erinnerungsst\u00fccke."},"#play-again":{en:"Play Again",de:"wiederholen"},"#add-archive":{en:"Add to the Archive",de:"Mitmachen"},"#explore-archive":{en:"Explore the Archive",
de:"Ansehen"},shareTwitter:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1 http://remix.europeana.eu #europeana",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK http://remix.europeana.eu #europeana"},shareFacebook:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK"}},ha={},V=[],Z,
fa=1024,ga=576;(function(){L();f.addEventListener("hashchange",L,!1);if(!Modernizr||!Modernizr.video||navigator.userAgent.match(/iPad/i)!==null)z();else{v=ta("#video");try{ea=N.getContext("2d"),Y=D.getContext("2d")}catch(a){}n.readyState>=2?J():n.addEventListener("loadedmetadata",J,!1);if(h.body&&B>1.5)h.body.style.backgroundColor="#000"}d();if(B>1.5)h.body.style.backgroundColor="#000";x=h.documentElement.getAttribute("lang")||"en";o();F&&(A(),C(),n.addEventListener("play",function(){h.getElementById("play-button").classList.add("active");
K=Date.now();if(!U)B<1.5&&j("bottom-controls",{opacity:{from:0,to:1}},0.5),h.getElementById("intro-play").style.display="none",n.style.display="block",U=!0},!1),n.addEventListener("pause",function(){h.getElementById("play-button").classList.remove("active");K=Date.now()},!1),n.addEventListener("ended",function(){h.getElementById("play-button").classList.remove("active")},!1),n.addEventListener("volumechange",function(){h.getElementById("volume-button").offsetHeight&&e();n.volume<0.05?h.getElementById("volume-button").classList.add("active"):
h.getElementById("volume-button").classList.remove("active");if(f.localStorage)localStorage.euRemixVolume=n.volume},!1));n.addEventListener("click",p,!1);h.getElementById("resources").addEventListener("click",p,!1);h.getElementById("bottom-controls").addEventListener("click",p,!1);h.getElementById("top-controls").addEventListener("click",p,!1);h.getElementById("play-button").addEventListener("click",c,!1);h.addEventListener("click",function(){},!1);h.getElementById("intro-en").addEventListener("click",
function(){x="en";o();i()},!1);h.getElementById("intro-de").addEventListener("click",function(){x="de";o();i()},!1);if(F)h.getElementById("comments-button").addEventListener("click",function(){I.comments=!I.comments;t("comments");I.comments?v.enable("videoComment"):v.disable("videoComment")},!1),h.getElementById("resources-button").addEventListener("click",function(){var a,b;I.resources=!I.resources;t("resources");if(I.resources)for(a=0,b=T.length;a<b;a++)v.enable(T[a]);else for(a=0,b=T.length;a<
b;a++)v.disable(T[a])},!1),h.getElementById("subtitles-button").addEventListener("click",function(){I.subtitles=!I.subtitles;t("subtitles");I.subtitles?v.enable("subtitle"):v.disable("subtitle")},!1),h.getElementById("language-en").addEventListener("click",function(){x="en";o();i()},!1),h.getElementById("language-de").addEventListener("click",function(){x="de";o();i()},!1),h.getElementById("logo-link").addEventListener("click",function(){n.pause()},!1),h.getElementById("settings-button").addEventListener("click",
function(){var a=h.getElementById("settings-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",P=!0},!1),h.getElementById("volume-button").addEventListener("click",function(){var a=h.getElementById("volume-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",e(),P=!0},!1),h.getElementById("add-comment-button").addEventListener("click",function(){(H=!H)?s():(W=n.currentTime,h.getElementById("add-comment-controls").style.display="none")},!1),h.getElementById("comment-tos-checkbox").addEventListener("click",
function(){aa=this.checked;q()},!1),aa=h.getElementById("comment-tos-checkbox").checked,h.getElementById("comment-post").addEventListener("click",function(){if(aa){var a=new XMLHttpRequest;a.open("POST","save-comment.php",!0);var b,c=h.getElementById("comment-email").value,d=h.getElementById("comment-name").value,e=h.getElementById("comment-text").value;f.FormData?(b=new FormData,b.append("language",x),b.append("name",d),b.append("email",c),b.append("comment",e),b.append("time",n.currentTime)):(b=
["language="+encodeURIComponent(x),"name="+encodeURIComponent(d),"email="+encodeURIComponent(c),"comment="+encodeURIComponent(e),"time="+encodeURIComponent(n.currentTime)].join("&"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("Content-length",b.length),a.setRequestHeader("Connection","close"));a.send(b);a.onreadystatechange=function(){if(a.readyState===4)if(a.status===200){var b=JSON.parse(a.responseText);if(b.success){if((b=b.data)&&!ca[b[0]])ca[b[0]]=
b,v.videoComment({start:b[2],end:b[2]+5,id:b[0],author:b[4],text:b[5],date:b[1]*1E3,language:b[3],target:"comments"});H=!1;W=n.currentTime;h.getElementById("add-comment-controls").style.display="none";h.getElementById("comment-text").value=""}}else console.log("error saving comment")}}},!1),h.getElementById("end-close").addEventListener("click",function(){h.getElementById("end").style.display="none"},!0),h.getElementById("play-again").addEventListener("click",function(){n.currentTime=0;n.play()},
!0),h.getElementById("comment-cancel").addEventListener("click",function(){H=!1;W=n.currentTime;h.getElementById("add-comment-controls").style.display="none"},!0),h.getElementById("comment-name").addEventListener("change",q,!1),h.getElementById("comment-email").addEventListener("change",q,!1),h.getElementById("comment-text").addEventListener("change",q,!1),h.getElementById("comment-name").addEventListener("keyup",q,!1),h.getElementById("comment-email").addEventListener("keyup",q,!1),h.getElementById("comment-text").addEventListener("keyup",
q,!1);h.getElementById("about-button").addEventListener("click",function(){w("about")},!1);h.getElementById("contact-button").addEventListener("click",function(){w("contact")},!1);h.getElementById("back-button").addEventListener("click",function(){w()},!1);h.getElementById("help-button").addEventListener("click",function(){var a=h.getElementById("help-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",P=!0},!1);h.getElementById("share-button").addEventListener("click",function(){var a=
h.getElementById("share-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",P=!0},!1);h.getElementById("twitter-button").addEventListener("click",function(){var a=encodeURIComponent(f.location.protocol+"//"+f.location.host+f.location.pathname),b=encodeURIComponent(S.shareTwitter[x]);ra=f.open("http://twitter.com/share?count=none&counturl="+a+"&text="+b+"&url=","europeanasharetweet","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");
ra.focus();_gaq.push(["_trackSocial","twitter","tweet","remix.europeana.eu"])},!1);h.getElementById("facebook-button").addEventListener("click",function(){var a=f.location.protocol+"//"+f.location.host+f.location.pathname,b=encodeURIComponent(S.shareFacebook[x]);sa=f.open("http://facebook.com/sharer.php?u="+a+"&t="+b,"europeanasharefacebook","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");sa.focus();
_gaq.push(["_trackSocial","facebook","send","remix.europeana.eu"])},!1);j("top-controls",{opacity:{from:0,to:1}},0.5);f.addEventListener("load",function(){d(!0)},!1);f.addEventListener("resize",d,!0);h.addEventListener("mousemove",function(a){K=Date.now();$=b(a)},!1);var g=[{url:"image/page-bg.jpg",category:"display"},"image/background.jpg",{url:"css/style.css",mode:"font",id:"chevin",families:["Chevin-Light"],category:"display"},"image/bg.png","image/logo.png","image/icon_facebook.png","image/icon_twitter.png",
"image/radio.png","image/settings.png"];F&&(g=g.concat([{url:"video/otto-and-bernard.webm",element:n,id:"video",category:"play"},{url:"data/resources.txt?"+Date.now(),type:"json",category:"data",id:"resources"},{url:"data/subtitles.txt",type:"json",category:"data",id:"subtitles"},"image/playpause.png","image/check.png","image/comment.png","image/comments.png","image/volume.png","image/intro-play.png","image/media-icons.png"]));g=new Loaderator(g,"all",function(){if(!F)return!1;if(B>1.5)j("bottom-controls",
{opacity:{from:0,to:1}},0.5);else{var a=h.getElementById("intro-play");a.innerHTML='<img src="image/intro-play.png"/>';a.addEventListener("click",function(){ua.innerHTML='<a href="http://www.europeana.eu" target="_blank"><img src="image/poweredby-white.png"/></a>';n.play()},!1)}f.addEventListener("keypress",r,!1)});g.addEventListener("all:chevin",function(){d();B<1.5||!F?(j("intro-text",{opacity:{from:0,to:1}},1),j("intro-en",{opacity:{from:0,to:1}},1),j("intro-de",{opacity:{from:0,to:1}},1)):h.getElementById("intro-text").style.opacity=
1});g.addEventListener("all:image/logo.png",function(){d();Q.style.zIndex="1500";j(Q,{opacity:{from:0,to:1}},1)});g.addEventListener("all:image/page-bg.jpg",function(a){a=a.element;a.id="page-background";O=a;E.parentNode.insertBefore(a,E.nextSibling);if(!F)E.style.display="block"});g.addEventListener("display",function(){da&&!M&&w(da);if(B<1.5||!F)E.style.display="block"});g.addEventListener("all:image/background.jpg",function(a){d();a=a.element;E.insertBefore(a,E.firstChild);if(F){if(B<1.5){if(j(a,
{opacity:{from:0,to:1}},1,function(){n.style.display="block"}),O)E.style.display="block"}else n.style.display="block";var b=h.getElementById("end"),a=a.cloneNode(!1);b.insertBefore(a,b.firstChild)}});F&&(g.addEventListener("all:video",function(a){a.element.style.visibility="visible";var b=h.getElementById("end"),c=h.getElementById("end-text"),d=h.getElementById("end-close"),e=b.firstChild;v.code({start:"4:26",end:v.duration()-1,onStart:function(){b.style.display="block";d.style.display=""},onFrame:function(a,
c){var d=Math.min((v.currentTime()-c.start)/1.5,1);if(b.style.opacity!==d)b.style.opacity=d},onEnd:function(a){if(v.currentTime()<a.start)b.style.display="";d.style.display="none"}});v.code({start:v.duration()-1,end:v.duration(),onStart:function(){if(!(e instanceof HTMLImageElement))e=b.firstChild;b.style.display="block";b.classList.add("final")},onFrame:function(a,d){var f=Math.min((v.currentTime()-d.start)/0.5,1);if(e.style.opacity!==f)e.style.opacity=f;if(b.style.opacity<f)b.style.opacity=f;f=
1-f;c.style.backgroundColor="rgba(255, 255, 255, "+f*0.85+")";c.style.borderColor="rgba(0, 0, 0, "+f*0.6+")"},onEnd:function(){b.style.cssText="";b.classList.remove("final")}})}),g.addEventListener("data:resources",function(a){var b={flickr:f.flickrApiKey||""},a=JSON.parse(a.element.responseText),c,d,e,g;for(c in a)if(a.hasOwnProperty(c)&&typeof v[c]==="function"){for(e=0,g=a[c].length;e<g;e++){d=a[c][e];if(b[c])d.apikey=b[c];d.target="resources";if(d.fadeIn===void 0||isNaN(d.fadeIn))d.fadeIn=0.5;
if(d.fadeOut===void 0||isNaN(d.fadeOut))d.fadeOut=0.5;v[c](d)}g&&T.indexOf(c)===-1&&(T.push(c),I.resources||v.disable(c))}}),g.addEventListener("data:subtitles",function(a){var b=JSON.parse(a.element.responseText);if(b)for(a=0;a<b.length;a++)b[a].languagesrc=G,v.subtitle(b[a])}),u(),f.addEventListener("keyup",function(a){var b=a.which||a.keyCode;if(H){if(K=Date.now(),b===27)H=!1,W=n.currentTime,h.getElementById("add-comment-controls").style.display="none",a.preventDefault()}else b===37?(n.currentTime-=
0.04,console.log("left",n.currentTime)):b===39&&(n.currentTime+=0.04,console.log("right",n.currentTime))},!1),v.code({start:0,end:1.5,onStart:function(){E.style.display="block";h.body.style.backgroundColor="#fff";Q.style.zIndex="1500"},onFrame:function(){var a=1-Math.min(v.currentTime()/1.5,1);E.style.opacity=a;a=Math.round(a*255);h.body.style.backgroundColor="rgb("+a+", "+a+", "+a+")"},onEnd:function(){h.body.style.backgroundColor="#000";E.style.display="none";Q.style.zIndex=""}}))})()})(window);
