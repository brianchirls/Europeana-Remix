(function(e,n){function i(p,a,k){this.categories={};this.resources={};this.eventListeners=[];this.loadingCount=0;this.callbackQueue=[];this._head=b.getElementsByTagName("head")[0];p&&this.load(p,a,k)}var a,b=e.document,g=e.console;g===n&&(g={log:function(){}});var f=/^(([A-Za-z]+):\/\/)+(([a-zA-Z0-9\._\-]+\.[a-zA-Z]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|localhost)(\:([0-9]+))*(\/[^#]*)?(\#.*)?$/;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(p){if(this===void 0||this===
null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(a===0)return-1;var c=0;arguments.length>0&&(c=Number(arguments[1]),c!==c?c=0:c!==0&&c!==1/0&&c!==-(1/0)&&(c=(c>0||-1)*Math.floor(Math.abs(c))));if(c>=a)return-1;for(c=c>=0?c:Math.max(a-Math.abs(c),0);c<a;c++)if(c in b&&b[c]===p)return c;return-1};e.Loaderator=i;i.Category=function(p,a){this.name=p;this.resources=[];this.resourcesById={};this.loader=a;this.eventListeners={load:[],single:{}}};i.Category.prototype.addResource=function(a){var b=
a.id||a.url;this.resourcesById[b]||(this.resources.push(a),this.resourcesById[b]=a,a.categories.push(this))};i.Category.prototype.checkForAllLoaded=function(){var a,b;if(this.loader.loadingCount)this.loader.callbackQueue.indexOf(this)<0&&this.loader.callbackQueue.push(this);else{var d=this.resources;if(a=d.length){var c=this.eventListeners.load;if(b=c.length){for(a--;a>=0;a--)if(!d[a].loaded)return;a=function(c,a,q){return function(){c.call(a,q)}};for(b--;b>=0;b--)d=c.pop(),d.async?setTimeout(a(d,
this.loader,this.resourcesById),0):d.call(this.loader,this.resourcesById)}}}};i.prototype.setBase=function(a){var d=b.getElementsByTagName("base"),k;this.base=null;if(a){if(a=f.exec(a))this.base={},this.base.protocol=a[2]+":",this.base.hostname=a[3],this.base.port=a[7]||"",this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:""),this.base.pathname=a[8]}else for(k=0;k<d.length;k++)if(a=d.item(k),a=a.getAttribute("href"))if(a=f.exec(a)){this.base={};this.base.protocol=a[2]+":";this.base.hostname=
a[3];this.base.port=a[7]||"";this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:"");this.base.pathname=a[8];break}if(!this.base)this.base={},this.base.protocol=e.location.protocol,this.base.host=e.location.host,this.base.port=e.location.port,this.base.hostname=e.location.hostname,this.base.pathname=e.location.pathname;d=this.base.pathname.split("?");d=d[0].split("/");d.pop();this.base.directory=d.join("/");return this};i.prototype.resolveUrl=function(a){this.base||this.setBase();
if(f.test(a))return a;var b=this.base,d=a.split("/");if(d.length&&d[0]==="")return b.protocol+"//"+b.host+a;var a=b.directory.split("/"),c;for(c=0;c<d.length;c++)d[c]===".."?a.pop():d[c]!=="."&&a.push(d[c]);return b.protocol+"//"+b.host+a.join("/")};var m=function(a,b){var d=!1;try{a.sheet&&a.sheet.cssRules.length>0?d=!0:a.styleSheet&&a.styleSheet.cssText.length>0?d=!0:a.innerHTML&&a.innerHTML.length>0&&(d=!0)}catch(c){}d?b():setTimeout(function(){m(a,b)},10)};i.prototype.loaders={script:function(a){var d=
this;if(!a.element){var k=b.createElement("script");k.type=a.mime||"text/javascript";k.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;a.element=k;k.src=a.fullUrl;this._head.appendChild(k)}a.element.onreadystatechange=function(){this.readyState==="complete"||this.readyState===4?a.loaded||d.resLoadCallback(a,this):g.log("script readystate = "+this.readyState+" - "+a.fullUrl)};a.element.onload=function(){a.loaded||d.resLoadCallback(a,this)}},css:function(a){var d,k,c,g=b.getElementsByTagName("link");
for(d=0,k=g.length;d<k;d++)if(c=g.item(d),c.getAttribute("rel").toLowerCase()==="stylesheet"&&c.href===a.fullUrl){a.element=c;break}if(!a.element){var f=this;c=b.createElement("link");c.type=a.mime||"text/css";c.setAttribute("rel","stylesheet");c.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;c.href=a.fullUrl;a.element=c;this._head.appendChild(c);m(c,function(){f.resLoadCallback(a,this)})}return!0},ajax:function(a){if(!a.element){var b=this,d=new XMLHttpRequest;a.element=d;d.open("GET",
a.fullUrl,!0);d.onreadystatechange=function(){d.readyState===4&&b.resLoadCallback(a,this)};d.send(null)}},object:function(a){var d,f=this,c;if(!a.element||!a.element.tagName){switch(a.type){case "audio":case "video":d=b.createElement(a.type);d.controls=a.controls||!1;d.loop=a.loop||!1;d.preload=a.preload||!1;d.autobuffer=d.preload;d.doMediaEvents=!0;d.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;if(a.sources){if(Object.prototype.toString.call(a.sources)!=="[object Array]")a.sources=
[a.sources];for(c=0;c<a.sources.length;c++){var i=b.createElement("source");i.src=this.resolveUrl(a.sources[c]);d.appendChild(i)}}else d.src=a.fullUrl;d.doMediaEvents=!0;d.load();break;case "image":d=new Image;d.src=a.fullUrl;break;case "html":d=b.createElement("iframe");d.src=a.fullUrl;d.width=0;d.height=0;b.body.appendChild(d);break;default:return g.log("Resource Loader: unknown object type "+a.type),!1}a.element=d;if(!d.doMediaEvents)d.onload=function(c){f.resLoadCallback(a,c)}}else{a.type=a.element.tagName.toLowerCase();
if(a.type==="img")a.type="image";else if(a.type==="iframe")a.type="html";else if(a.type==="audio"||a.type==="video")a.element.doMediaEvents=!0;else return g.log("Resource Loader: unknown object type "+a.type),!1;d=a.element}d.doMediaEvents&&d.addEventListener("canplay",function(c){a.loaded||f.resLoadCallback(a,c)},!0);return!0},font:function(d){var f=this;a.load({url:this.base.protocol+"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",id:"webfont-script",type:"script",mode:"script"},"webfont");
a.addEventListener("webfont",function(){g.log("Loaded WebFont trying "+d.fullUrl);var a,c=d.families.concat([]);g.log(c);var i,e,q=!1,s=[],j=b.getElementsByTagName("link");for(a=0,i=j.length;a<i;a++)if(e=j.item(a),e.getAttribute("rel").toLowerCase()==="stylesheet"&&(e=e.href,e===d.fullUrl)){q=!0;break}q||s.push(d.fullUrl);WebFont.load({custom:{families:d.families,urls:s},fontactive:function(q){g.log("fontactive:"+q);for(a=0;a<c.length;a++)if(c[a]===q){c.splice(a,1);break}c.length||f.resLoadCallback(d,
this)},fontinactive:function(a){g.log("problem loading font:"+a)},inactive:function(){g.log("WebFonts are inactive!")},active:function(){g.log("WebFonts are Active! This is great!")}})})}};i.prototype.extensionTypes={js:"script",ogg:"audio",mp3:"audio",wav:"audio",ogv:"video",webm:"video",mp4:"video",jpg:"image",jpeg:"image",png:"image",gif:"image",css:"style",xml:"xml",xhtml:"xml",json:"json",txt:"text",html:"html"};i.prototype.load=function(a,b,d){if(Object.prototype.toString.call(a)!=="[object Array]")if(a)a=
[a];else return this;this.loadingCount+=1;var c,f,e,q,s,j=[];for(s=0;s<a.length;s++)if(c=a[s]){if(Object.prototype.toString.call(c)==="[object String]"||typeof c==="string")c={url:c};if(c.url){var l;c.fullUrl===n&&(l=this.resolveUrl(c.url));e="";if((f=this.resources[l])&&(!c.mode||c.mode===f.mode))a[s]=f;else{f&&(e="#"+c.mode);f=c;f.Loaderator=this;this.resources[l+e]=f;f.fullUrl=l;if(!c.type)e=c.fullUrl.split("."),e.length>1&&(e=e.pop().toLowerCase()),c.type=this.extensionTypes[e]||"text";if(!c.mode)switch(c.type){case "script":c.mode=
"script";break;case "style":case "css":c.mode="css";break;case "audio":case "video":case "image":case "html":c.mode="object";break;case "xml":case "json":case "text":c.mode="ajax";break;default:c.mode="ajax"}}}else f=c.loader?c:!1;e=[];b&&e.push(b);var v;if(c.category){q=Object.prototype.toString.call(c.category)==="[object Array]"?c.category:[c.category];for(c=0;c<q.length;c++)v=q[c],e.indexOf(v)<0&&e.push(v)}e.length||e.push(f.fullUrl);if(f&&e.length&&(f.loader||f.mode&&this.loaders[f.mode])){for(c=
0;c<e.length;c++){v=e[c];q=this.categories[v]||(this.categories[v]=new i.Category(v,this));if(f.categories===n)f.categories=[];q.addResource(f)}!f.loader&&f.fullUrl&&(g.log("Loaderator: attempting to load "+f.fullUrl),this.loaders[f.mode].call(this,f)&&j.push(f))}}d!==n&&Object.prototype.toString.call(d)==="[object Function]"&&b!==n&&this.addEventListener(b,d);for(this.loadingCount-=1;this.callbackQueue.length;)this.callbackQueue.splice(0,1)[0].checkForAllLoaded();return this};i.prototype.resLoadCallback=
function(a,b){a.loaded=!0;a.event=b;var d,c;g.log("Loaded resource: "+(a.id||a.url));c=this.eventListeners.length;for(d=0;d<c;d++)this.eventListeners[d].call(this,a);var f=function(a,c,q){return function(){a.call(c,q)}};c=a.categories.length;var e;for(d=0;d<c;d++){var q;q=a.categories[d].eventListeners.single;if(a.id&&(e=q[a.id])||(e=q[a.url])||(e=q[a.fullUrl]))for(q=0;q<e.length;q++){var s=e[q];s.async?setTimeout(f(s,this,a),0):s.call(this,a)}}for(d=0;d<c;d++)a.categories[d].checkForAllLoaded()};
i.prototype.addEventListener=function(a,b,d){if(!b||Object.prototype.toString.call(b)!=="[object Function]")return this;b.runAsync=d||!1;if(a==="*")this.eventListeners.push(b);else{typeof a==="string"&&(a=a.split(":"));var c=a[0],c=this.categories[c]||(this.categories[c]=new i.Category(c,this)),f=a.length>1?a[1]:!1;if(f){var g,q;if(!(g=c.resourcesById[f]))for(a=c.resources.length-1;a>=0;a--)if(q=c.resources[a],q!==n&&q.fullUrl===f){g=q;break}g&&g.loaded?d?setTimeout(function(){b.call(this,g)},0):
b.call(this,g):(c.eventListeners.single[f]||(c.eventListeners.single[f]=[])).push(b)}else c.eventListeners.load.push(b),c.checkForAllLoaded()}return this};var d=function(){var a=e.LDR8R;if(a){var b;for(b=0;b<a.length;b++)a[b]()}};d.prototype.push=function(a){if(Object.prototype.toString.call(a)==="[object Function]"){var b=Array.prototype.slice.call(arguments,1);a.apply(null,b)}};a=new i;e.LDR8R=new d})(window);(function(e,n){if(n.addEventListener){var i=Array.prototype,a=Object.prototype,b=i.forEach,g=i.slice,f=a.hasOwnProperty,m=a.toString,d=/^(#([\w\-\_\.]+))$/,p=[],r=!1,k=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(a){e.setTimeout(a,16)}}(),c=function(a,b){return new c.p.init(a,b||null)};c.instances=[];c.instanceIds={};c.removeInstance=function(a){if(c.instances.length)return c.instances.splice(c.instanceIds[a.id],
1),delete c.instanceIds[a.id],c.instances};c.addInstance=function(a){var b=c.instances.length,d=a.media.id&&a.media.id;a.id=!(d in c.instanceIds)&&d||"__popcorn"+b;c.instanceIds[a.id]=b;c.instances.push(a);return c.instances};c.getInstanceById=function(a){return c.instances[c.instanceIds[a]]};c.removeInstanceById=function(a){return c.removeInstance(c.instances[c.instanceIds[a]])};c.p=c.prototype={init:function(a,b){var j;if(typeof a==="function")if(n.readyState==="interactive"||n.readyState==="complete")a(n,
c);else{if(p.push(a),!r){r=!0;var l=function(){n.removeEventListener("DOMContentLoaded",l,!1);for(var a=0,b=p.length;a<b;a++)p[a].call(n,c);p=null};n.addEventListener("DOMContentLoaded",l,!1)}}else{this.media=(j=d.exec(a))&&j.length&&j[2]?n.getElementById(j[2]):a;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;c.addInstance(this);this.options=b||{};this.data={disabled:[],events:{},history:[],trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],
startIndex:0,endIndex:0,previousUpdateTime:-1},loading:[],loadingListener:!1};var f=function(a){if(a.media.readyState>=2){var b=a.media.duration,b=b!=b?Number.MAX_VALUE:b+1;c.addTrackEvent(a,{start:b,end:b});a.media.addEventListener("timeupdate",function(c){a.data.timeupdateEvent=c},!1);var q=function(){var b=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,j=a.data.trackEvents,l=j.byEnd,h=j.byStart,f=j.animating,s=a.data.timeupdateEvent,v=0;if(d<b){for(;l[j.endIndex]&&l[j.endIndex].end<=
b;)if(!l[j.endIndex]._natives||a[l[j.endIndex]._natives.type]){if(l[j.endIndex]._running===!0)l[j.endIndex]._running=!1,l[j.endIndex]._natives.end.call(a,s,l[j.endIndex]);j.endIndex++}else{c.removeTrackEvent(a,l[j.endIndex]._id);return}for(;h[j.startIndex]&&h[j.startIndex].start<=b;)if(!h[j.startIndex]._natives||a[h[j.startIndex]._natives.type]){if(h[j.startIndex].end>b&&h[j.startIndex]._running===!1&&a.data.disabled.indexOf(h[j.startIndex]._natives.type)===-1)h[j.startIndex]._running=!0,h[j.startIndex]._natives.start.call(a,
s,h[j.startIndex]),h[j.startIndex]._natives.frame&&f.push(h[j.startIndex]);j.startIndex++}else{c.removeTrackEvent(a,h[j.startIndex]._id);return}for(;v<f.length;)f[v]._running==!1?f.splice(v,1):(f[v]._natives.frame.call(a,s,f[v],b),v++)}else if(d>b){for(;h[j.startIndex]&&h[j.startIndex].start>b;)if(!h[j.startIndex]._natives||a[h[j.startIndex]._natives.type]){if(h[j.startIndex]._running===!0)h[j.startIndex]._running=!1,h[j.startIndex]._natives.end.call(a,s,h[j.startIndex]);j.startIndex--}else{c.removeTrackEvent(a,
h[j.startIndex]._id);return}for(;l[j.endIndex]&&l[j.endIndex].end>b;)if(!l[j.endIndex]._natives||a[l[j.endIndex]._natives.type]){if(l[j.endIndex].start<=b&&l[j.endIndex]._running===!1&&a.data.disabled.indexOf(h[j.endIndex]._natives.type)===-1)l[j.endIndex]._running=!0,l[j.endIndex]._natives.start.call(a,s,l[j.endIndex]),l[j.endIndex]._natives.frame&&f.push(l[j.endIndex]);j.endIndex--}else{c.removeTrackEvent(a,l[j.endIndex]._id);return}for(;v<f.length;)f[v]._running==!1?f.splice(v,1):(f[v]._natives.frame.call(a,
s,f[v],b),v++)}j.previousUpdateTime=b;k(q)};k(q)}else e.setTimeout(function(){f(a)},1)};f(this);return this}}};c.p.init.prototype=c.p;c.forEach=function(a,c,j){if(!a||!c)return{};j=j||this;if(b&&a.forEach===b)return a.forEach(c,j);for(var d in a)f.call(a,d)&&c.call(j,a[d],d,a);return a};c.extend=function(a){var b=a,j=g.call(arguments,1);c.forEach(j,function(a){for(var c in a)b[c]=a[c]});return b};c.extend(c,{error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+
c.guid.counter)},sizeOf:function(a){var c=0,b;for(b in a)c++;return c},isArray:Array.isArray||function(a){return m.call(a)==="[object Array]"},nop:function(){},position:function(a){var a=a.getBoundingClientRect(),b={},j=n.documentElement,d=n.body,f,g,i;f=j.clientTop||d.clientTop||0;g=j.clientLeft||d.clientLeft||0;i=e.pageYOffset&&j.scrollTop||d.scrollTop;j=e.pageXOffset&&j.scrollLeft||d.scrollLeft;f=Math.ceil(a.top+i-f);g=Math.ceil(a.left+j-g);for(var z in a)b[z]=Math.round(a[z]);return c.extend({},
b,{top:f,left:g})},disable:function(a,c){var b=a.data.disabled;b.indexOf(c)===-1&&b.push(c);return a},enable:function(a,c){var b=a.data.disabled,d=b.indexOf(c);d>-1&&b.splice(d,1);return a}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate mute volume duration paused".split(/\s+/g),function(c){a[c]=function(a){if(typeof this.media[c]==="function")return this.media[c](),this;return a!==!1&&a!==null&&typeof a!=="undefined"?(this.media[c]=a,this):
this.media[c]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return-~this.media.currentTime},exec:function(a,b){c.addTrackEvent(this,{start:a,end:a+1,_running:!1,_natives:{start:b||c.nop,end:c.nop,type:"exec"}});return this},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled.indexOf(a)>-1?"enable":"disable"](this,a)}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload  ",
MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;c.events={isNative:function(a){for(var b=c.Events.Natives.split(/\s+/g),d=0;d<b.length;d++)if(b[d]===a)return!0;return!1},getInterface:function(a){if(!c.events.isNative(a))return!1;
var b=c.Events,d,l;for(l in b)l!=="Natives"&&b[l].indexOf(a)>-1&&(d=l);return d},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){if(this.data.events[a]&&c.sizeOf(this.data.events[a])){var d=c.events.getInterface(a);if(d)return d=n.createEvent(d),d.initEvent(a,!0,!0,e,1),this.media.dispatchEvent(d),this;c.forEach(this.data.events[a],function(a){a.call(this,b)},this)}return this},listen:function(a,b){var d=this,l=!0;this.data.events[a]||(this.data.events[a]={},l=!1);this.data.events[a][b.name||
b.toString()+c.guid()]=b;!l&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(b){c.forEach(d.data.events[a],function(a){typeof a==="function"&&a.call(d,b)})},!1);return this},unlisten:function(a,c){if(this.data.events[a]&&this.data.events[a][c])return delete this.data.events[a][c],this;this.data.events[a]=null;return this}}};c.forEach(["trigger","listen","unlisten"],function(a){c.p[a]=c.events.fn[a]});c.protect={natives:"load play pause currenttime playbackrate mute volume duration removeplugin roundtime trigger listen unlisten".split(/\s+/)};
c.addTrackEvent=function(a,b){if(b._natives)b._id=!b.id?c.guid(b._natives.type):b.id,a.data.history.push(b._id),b._natives.start=b._natives.start||c.nop,b._natives.end=b._natives.end||c.nop;b.start=c.util.toSeconds(b.start,a.options.framerate);b.end=c.util.toSeconds(b.end,a.options.framerate);var d=a.data.trackEvents.byStart,l=a.data.trackEvents.byEnd,f;for(f=d.length-1;f>=0;f--)if(b.start>=d[f].start){d.splice(f+1,0,b);break}for(f=l.length-1;f>=0;f--)if(b.start>=l[f].start){l.splice(f+1,0,b);break}};
c.removePlugin=function(a,b){if(!b){var b=a,a=c.p,d=c.registry.length,l;for(l=0;l<d;l++)if(c.registry[l].name===b){c.registry.splice(l,1);delete c.registryByName[b];delete a[b];return}}d=a.data.trackEvents.byStart;l=a.data.trackEvents.byEnd;var f,g;for(f=0,g=d.length;f<g;f++)d[f]&&d[f]._natives&&d[f]._natives.type===b&&l[f]&&l[f]._natives&&l[f]._natives.type===b&&(d.splice(f,1),l.splice(f,1),f--,g--,a.data.trackEvents.startIndex<=f&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--))};
c.removeTrackEvent=function(a,b){var d=a.data.history.length,f=0,g=[],e=[],i=[];c.forEach(a.data.trackEvents.byStart,function(c,d){c._id||(g.push(a.data.trackEvents.byStart[d]),e.push(a.data.trackEvents.byEnd[d]));c._id&&(c._id!==b&&(g.push(a.data.trackEvents.byStart[d]),e.push(a.data.trackEvents.byEnd[d])),c._id===b&&(f=d,c._natives._teardown&&c._natives._teardown.call(a,c)))});f<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;f<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;
a.data.trackEvents.byStart=g;a.data.trackEvents.byEnd=e;for(var z=0;z<d;z++)a.data.history[z]!==b&&i.push(a.data.history[z]);a.data.history=i};c.getTrackEvents=function(a){var b=[];c.forEach(a.data.trackEvents.byStart,function(a){a._id&&b.push(a)});return b};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,
this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else{var f=["start","end"],g={},e=typeof b==="function";d||(d=b.manifest||{});var i=function(b,g){if(!g)return this;g._natives=b;g._natives.type=a;g._running=!1;g._natives.manifest=d;if(!("start"in g))g.start=0;if(!("end"in g))g.end=this.duration();
if("_setup"in b&&typeof b._setup==="function"){if(!g.target){var e="options"in d&&d.options;g.target=e&&"target"in e&&e.target}b._setup.call(this,g)}c.addTrackEvent(this,g);c.forEach(b,function(a,b){b!=="type"&&f.indexOf(b)===-1&&this.listen(b,a)},this);return this};if(d||"manifest"in b)c.manifest[a]=d||b.manifest;g[a]=function(a){return i.call(this,e?b.call(this,a):b,a)};c.extend(c.p,g);var z={fn:g[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(g,z,{type:a}));c.registryByName[a]=
z;return g}};c.plugin.getDefinition=function(a){var b=c.registryByName;if(b[a])return b[a];c.error("Cannot inherit from "+a+"; Object does not exist")};c.plugin.delegate=function(a,b,c){return function(){var d=arguments;c.forEach(function(c){c[b]&&c[b].apply(a,d)})}};c.plugin.inherit=function(a,b,d,l){function g(a,b){var d=b||c.plugin.getDefinition(a).parents,j;for(j in d)if(f.call(d,j)){var l=d[j];g(l);e.indexOf(l)===-1&&e.push(l)}}var e=[];g(a,c.isArray(b)?b:[b]);e.push(a);l=c.plugin(a,function(a){var b=
this,d;d=e.map(function(d){d=c.plugin.getDefinition(d).base;return d.call&&d.call(b,a)||d});return{_setup:c.plugin.delegate(b,"_setup",d),start:c.plugin.delegate(b,"start",d),end:c.plugin.delegate(b,"end",d)}},l||d.manifest);a=c.plugin.getDefinition(a);a.base=d;a.parents=b;return l};c.inherit=c.plugin.inherit;c.parsers={};c.parser=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else if(typeof b==="function"&&!d&&(d=b,b=""),!(typeof d!==
"function"||typeof b!=="string")){var l={};l[a]=function(a,l){if(!a)return this;var g=this;c.xhr({url:a,dataType:b,success:function(a){var b,c,e=0,a=d(a).data||[];if(b=a.length){for(;e<b;e++){c=a[e];for(var i in c)if(f.call(c,i)&&g[i])g[i](c[i])}l&&l()}}});return this};c.extend(c.p,l);return l}};var t=/\?/,u={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:!0,xhr:function(){return new e.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&
(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else if(a=c.extend({},u,a),a.ajax=a.xhr(),a.ajax){if(a.type==="GET"&&a.data)a.url+=(t.test(a.url)?"&":"?")+a.data,a.data=null;a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}};c.xhr.httpData=function(a){var b,c=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{c=JSON.parse(a.ajax.responseText)}catch(d){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,
json:c};a.dataType&&(b=b[a.dataType]);a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,d){if(d&&n.querySelectorAll('script[src="'+a+'"]').length)b&&b(!0);else{var f=n.head||n.getElementsByTagName("head")[0]||n.documentElement,g=n.createElement("script"),e=a.split("?")[1],i=!1,m=[],k,p;e&&!d&&(m=e.split("&"));m.length&&(p=m[m.length-1].split("="));k=m.length?p[1]?p[1]:p[0]:"jsonp";!e&&!d&&(a+="?callback="+k);k&&!d&&(window[k]&&(k=c.guid(k)),window[k]=function(a){b&&b(a);i=!0},a=a.replace(p.join("="),
p[0]+"="+k));g.onload=g.onreadystatechange=function(){if(!g.readyState||/loaded|complete/.test(g.readyState))d&&b&&b(),i&&(delete window[k],f.removeChild(g))};g.src=a;f.insertBefore(g,f.firstChild)}};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,!0)};c.util={toSeconds:function(a,b){var d=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/;if(typeof a==="number")return a;else typeof a==="string"?d.test(a)||c.error("Invalid time format"):c.error("Invalid time format");
var d=a.split(":"),f=d.length-1,g=d[f];if(g.indexOf(";")>-1){var g=g.split(";"),e=0;b&&typeof b==="number"&&(e=parseFloat(g[1],10)/b);d[f]=parseInt(g[0],10)+e}if(d.length===1)return parseFloat(d[0],10);else if(d.length===2)return parseInt(d[0],10)*60+parseFloat(d[1],10);else if(d.length===3)return parseInt(d[0],10)*3600+parseInt(d[1],10)*60+parseFloat(d[2],10)}};e.Popcorn=c;n.addEventListener("DOMContentLoaded",function(){var a=n.querySelectorAll("[data-timeline-sources]");c.forEach(a,function(b,
d){var f=a[d],g,e,i;if(!f.id)f.id=c.guid("__popcorn");f.nodeType&&f.nodeType===1&&(i=c("#"+f.id),g=(f.getAttribute("data-timeline-sources")||"").split(","),g[0]&&c.forEach(g,function(a){e=a.split("!");e.length===1&&(e=a.split("."),e[0]="parse"+e[e.length-1].toUpperCase(),e[1]=a);if(g[0]&&i[e[0]])i[e[0]](e[1])}),i.autoplay&&i.play())})},!1)}})(window,window.document);(function(e){e&&e.plugin("code",function(e){if(!e.onStart||typeof e.onStart!=="function")throw"Popcorn Code Plugin Error: onStart must be a function.";if(e.onEnd&&typeof e.onEnd!=="function")throw"Popcorn Code Plugin Error: onEnd  must be a function.";if(e.onFrame&&typeof e.onFrame!=="function")throw"Popcorn Code Plugin Error: onFrame  must be a function.";return{start:function(e,a){a.onStart(a)},end:function(e,a){if(a.onEnd)a.onEnd(a)},frame:e.onFrame}},{about:{name:"Popcorn Code Plugin",version:"0.1",
author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame"},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(window.Popcorn);(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0;e.plugin("europeana",function(a){var b,g,f,e,d,p=this,r=!1,k,c,t,u;if(!a||!a.id)return{_setup:function(){}};u=function(a){(a.keyCode||a.which)===27&&t()};k=function(a){if(!n(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);t();return!1}};c=function(a){if(!n(a)){r=p.media.paused;p.pause();g.removeEventListener("click",c,!1);window.addEventListener("click",
k,!0);window.addEventListener("keydown",u,!0);b.classList.add("active");b.style.cssText="";if(f&&16/9*0.4*(void 0).height/(void 0).width>0.8)b.style.width=(void 0).width/(void 0).height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};t=function(a){if(!n(a)){b.classList.remove("active");b.style.width=f;if(e||d)b.style.top=e,b.style.left=d,b.style.position="absolute";g.addEventListener("click",c,!1);window.removeEventListener("keydown",
u,!0);window.removeEventListener("click",k,!0);r||p.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","europeana");b.id="europeana"+i;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";i++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"europeana target container doesn't exist";
if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);var q=new XMLHttpRequest;q.open("GET","europeana.php?id="+a.id);q.onreadystatechange=function(){var h;function b(a){return{srw:"http://www.loc.gov/zing/srw/",diag:"http://www.loc.gov/zing/srw/diagnostic/",xcql:"http://www.loc.gov/zing/cql/xcql/",mods:"http://www.loc.gov/mods/v3",europeana:"http://www.europeana.eu",enrichment:"http://www.europeana.eu/schemas/ese/enrichment/",
dcterms:"http://purl.org/dc/terms/",dc:"http://purl.org/dc/elements/1.1/",dcx:"http://purl.org/dc/elements/1.1/",tel:"http://krait.kb.nl/coop/tel/handbook/telterms.html",xsi:"http://www.w3.org/2001/XMLSchema-instance"}[a]||null}if(q.readyState===4&&q.status===200){var l,i=q.responseXML,k=!i.ownerDocument?i.documentElement:i.ownerDocument.documentElement;l=(l=i.evaluate("//dc:title",k,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null))&&l.singleNodeValue?l.singleNodeValue.firstChild.nodeValue||"":"";var n=
i.evaluate("//dc:description",k,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null),n=n&&n.singleNodeValue?n.singleNodeValue.firstChild.nodeValue||"":"",p=i.evaluate("//dc:source",k,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null);p=p&&p.singleNodeValue?p.singleNodeValue.firstChild.nodeValue||"":(p=i.evaluate("//europeana:provider",k,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null))&&p.singleNodeValue?p.singleNodeValue.firstChild.nodeValue||"":"";p&&(p="/"+p);h=(i=i.evaluate("//europeana:object",k,b,XPathResult.FIRST_ORDERED_NODE_TYPE,
null))&&i.singleNodeValue?i.singleNodeValue.firstChild.nodeValue||"":"",i=h;k=document.createElement("div");k.setAttribute("class","content");var r=document.createElement("article");r.appendChild(document.createTextNode(n));k.appendChild(r);k.appendChild(document.createElement("br"));g.appendChild(k);n=document.createElement("div");n.setAttribute("class","info");l=l.replace("<","&lt;");l=l.replace(">","&gt;");n.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="http://www.europeana.eu/portal/record/'+
a.id+'.html" target="_new">Europeana'+p+'</a></span></div><div><a href="http://www.europeana.eu/portal/record/'+a.id+'.html" target="_new">'+l+'</a></div><div class="watch">view details</div>';n.getElementsByClassName("minimize").item(0).addEventListener("click",t,!1);g.appendChild(n);i?(l=document.createElement("img"),l.src=i,l.onload=function(){a.loaded=!0},k.insertBefore(l,k.firstChild)):a.loaded=!0;f=a.width;e=a.top;d=a.left;g.addEventListener("click",c,!1)}};q.send(null);var s=a.end-a.start;
if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,s/8);else if(a.fadeIn>s)a.fadeIn=s;s-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>s)a.fadeIn=s;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,f=1;a<c.fadeIn?f=a/c.fadeIn:d>c.end-c.fadeOut&&(f=(c.end-d)/c.fadeOut);
b.style.opacity=f}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",
type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",type:"text",label:"Number of Images"}}})}})(window.Popcorn);(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0;e.plugin("flickr",function(a){var b,g,f,m,d,p,r=a.numberofimages||4,k,c,t,u,q=a.padding||"5px",s=a.border||"0px",j=this,l=!1,v,B,y,z;z=function(a){(a.keyCode||a.which)===27&&y()};v=function(a){if(!n(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);y();return!1}};B=function(a){if(!n(a)){l=j.media.paused;j.pause();g.removeEventListener("click",B,!1);window.addEventListener("click",
v,!0);window.addEventListener("keydown",z,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};y=function(a){if(!n(a)){b.classList.remove("active");b.style.width=c;if(t||u)b.style.top=t,b.style.left=u,b.style.position="absolute";g.addEventListener("click",B,!1);window.removeEventListener("keydown",z,!0);window.removeEventListener("click",v,!0);l||j.play();if(a)a.preventDefault&&
a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","flickr");b.id="flickr"+i;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";i++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"flickr target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=
a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);var J=function(){m="http://api.flickr.com/services/feeds/photos_public.gne?";f&&(m+="id="+f+"&");a.tags&&(m+="tags="+a.tags+"&");m+="lang=en-us&format=json&jsoncallback=flickr";e.xhr.getJSONP(m,function(b){g.innerHTML="<p style='padding:"+q+";'>"+b.title+"<p/>";e.forEach(b.items,function(b,f){if(f<r)d=document.createElement("a"),d.setAttribute("href",b.link),d.setAttribute("target","_blank"),p=document.createElement("img"),
p.setAttribute("src",b.media.m),p.setAttribute("height",k),p.setAttribute("width",c),p.setAttribute("style","border:"+s+";padding:"+q),d.appendChild(p),g.appendChild(d),a.loaded=!0;else return!1})})},L=function(){f?setTimeout(function(){L()},5):(m="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",m+="username="+a.username+"&api_key="+a.apikey+"&format=json&jsoncallback=flickr",e.getJSONP(m,function(a){f=a.user.nsid;J()}))},G=function(){if(j.media&&j.media.buffered){var b,
d,f=!1,l,i,n=j.media.buffered;for(b=0,d=n.length;b<d;b++)if(l=n.start(b),i=n.end(b),l>j.media.duration&&(l=0),l<=a.end&&i>=a.start){f=!0;break}if(!f){setTimeout(G,10);return}}m="http://api.flickr.com/services/rest/?method=flickr.photos.getInfo";a.apikey&&(m+="&api_key="+a.apikey);m+="&photo_id="+a.photoid+"&lang=en-us&format=json&jsoncallback=flickr";e.xhr.getJSONP(m,function(b){if(b&&b.stat==="ok"&&b.photo){var b=b.photo,d=document.createElement("img");d.src="http://farm"+b.farm+".static.flickr.com/"+
b.server+"/"+b.id+"_"+b.secret+"_m.jpg";d.style.width="100%";var f=a.url;f||(f=b.urls&&b.urls.url&&b.urls.url[0]&&b.urls.url[0]._content?b.urls.url[0]._content:"http://www.flickr.com/photos/"+b.owner.nsid+"/"+b.id+"/");g.appendChild(d);var h=document.createElement("div");h.setAttribute("class","info");h.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>photo<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
f+'" target="_new">Flickr</a></span></div><div><a href="'+f+'" target="_new">'+b.title._content+'</a></div><div class="watch">view photo</div>';h.getElementsByClassName("minimize").item(0).addEventListener("click",y,!1);g.appendChild(h);c=a.width;t=a.top;u=a.left;d.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)b=c[3]||"",c=parseFloat(c[1]),c=c*d.height/d.width,g.style.height=k=c+b;a.loaded=!0},!1);g.addEventListener("click",
B,!1)}})};if(a.url&&!a.photoid){var C=/^((https?:\/\/)?(www\.)?flickr\.com\/photos\/[^\/]+\/)?(\d+)/.exec(a.url);if(C&&C.length>=5)a.photoid=C[4]}a.photoid?G():a.username&&a.apikey?L():(f=a.userid,J());C=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,C/8);else if(a.fadeIn>C)a.fadeIn=C;C-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>C)a.fadeIn=C;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display=
"none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,f=1;a<c.fadeIn?f=a/c.fadeIn:d>c.end-c.fadeOut&&(f=(c.end-d)/c.fadeOut);b.style.opacity=f}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},
tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",type:"text",label:"Number of Images"}}})}})(window.Popcorn);var googleCallback;
(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0,a=0,b=!1,g=!1,f,m;googleCallback=function(a){typeof window.google!=="undefined"&&window.google.maps&&window.google.maps.Geocoder&&window.google.maps.LatLng?(f=new window.google.maps.Geocoder,g=!0):setTimeout(function(){googleCallback(a)},1)};m=function(){document.body?(b=!0,e.getScript("http://maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){m()},1)};
e.plugin("googlemap",function(d){var e,r,k,c,t=!1,u=this,q,s=!1,j,l,v,B,y,z,J;b||m();d.map=null;B=function(a){(a.keyCode||a.which)===27&&v()};j=function(a){if(n(a))return!0;var b=a.target;do if(b===k)return!0;while(b=b.parentNode);console.log("otherwindows",a);v();return!1};l=function(a){if(n(a))return!0;s=u.media.paused;u.pause();t||q();if(d.map)d.map.getDiv().style.display="block";c.removeEventListener("click",l,!1);window.addEventListener("click",j,!0);window.addEventListener("keydown",B,!0);k.classList.add("active");
k.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};v=function(a){if(n(a))return!0;if(d.map)d.map.getDiv().style.display="none";k.classList.remove("active");k.style.width=y;if(z||J)k.style.top=z,k.style.left=J,k.style.position="absolute";c.addEventListener("click",l,!1);window.removeEventListener("keydown",B,!0);window.removeEventListener("click",j,!0);s||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};d.loaded=!1;k=document.createElement("div");k.setAttribute("class","googlemap");k.id="googlemap"+i;if(d.width)k.style.width=d.width;if(d.height)k.style.height=d.height;k.style.display="none";i++;if(document.getElementById(d.target))document.getElementById(d.target).appendChild(k);else throw"googlemap target container doesn't exist";if(d.top||d.left)k.style.position="absolute",k.style.top=d.top,k.style.left=d.left;
c=document.createElement("div");c.style.position="relative";k.appendChild(c);var L=function(){if(u.media&&u.media.buffered){var a,b,f=!1,g,i,j=u.media.buffered;for(a=0,b=j.length;a<b;a++)if(g=j.start(a),i=j.end(a),g>u.media.duration&&(g=0),g<=d.end&&i>=d.start){f=!0;break}if(!f){setTimeout(L,10);return}}a="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=320x320&maptype=roadmap&"+[["center",d.center||d.location],["markers",d.location],["visible",d.location+"|"+d.center]].map(function(a){return a[0]+
"="+encodeURIComponent(a[1])}).join("&");var k=document.createElement("img");k.src=a;k.style.width="100%";c.appendChild(k);c.appendChild(e);b=document.createElement("div");b.setAttribute("class","info");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>map<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a+'" target="_new">Google Maps</a></span></div><div><a href="'+a+'" target="_new">'+d.location+
'</a></div><div class="watch">view map</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",v,!1);c.appendChild(b);y=d.width;z=d.top;J=d.left;k.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b;if(d.width&&!d.height&&(b=a.exec(d.width))&&b.length>1)a=b[3]||"",b=parseFloat(b[1]),b=b*k.height/k.width,c.style.height=b+a;d.loaded=!0},!1);c.addEventListener("click",l,!1)};L();var G=d.end-d.start;if(isNaN(d.fadeIn))d.fadeIn=Math.min(0.25,G/8);else if(d.fadeIn>
G)d.fadeIn=G;G-=d.fadeIn;if(isNaN(d.fadeOut))d.fadeOut=Math.min(0.25,(d.end-d.start)/8);else if(d.fadeOut>G)d.fadeIn=G;if(!d.type)d.type="ROADMAP";e=document.createElement("div");e.id="actualmap"+a;e.style.width="100%";e.style.height="100%";e.style.top=0;e.style.left=0;e.style.position="absolute";a++;q=function(){g?d.location?(t=!0,f.geocode({address:d.location},function(a,b){b===google.maps.GeocoderStatus.OK?(d.lat=a[0].geometry.location.lat(),d.lng=a[0].geometry.location.lng(),r=new google.maps.LatLng(d.lat,
d.lng),d.debug="now i have my map",d.map=new google.maps.Map(e,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:r,map:d.map,title:d.location})):console.log("cannot get google maps data",b)})):(r=new google.maps.LatLng(d.lat,d.lng),d.debug="now i have my damn map",d.map=new google.maps.Map(e,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:r,map:d.map,title:d.location})):
setTimeout(function(){q()},5)};return{start:function(a,b){var c=function(){if(!(u.media.currentTime>=b.end||u.media.currentTime<b.start))b.loaded?k.style.display="":setTimeout(c,1)};c();var d=this,f=function(){if(b.map){b.map.getDiv().style.display="block";google.maps.event.trigger(b.map,"resize");b.map.setCenter(r);if(b.zoom&&typeof b.zoom!=="number")b.zoom=+b.zoom;b.zoom=b.zoom||8;b.map.setZoom(b.zoom);if(b.heading&&typeof b.heading!=="number")b.heading=+b.heading;if(b.pitch&&typeof b.pitch!=="number")b.pitch=
+b.pitch}else d.media.currentTime>=b.start&&d.media.currentTime<=b.end&&setTimeout(function(){f()},13)};f()},end:function(a,b){k.style.display="none";if(b.map)b.map.getDiv().style.display="none"},_teardown:function(a){document.getElementById(a.target).removeChild(k);k=c=e=a.map=r=null},frame:function(a,b,c){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);k.style.opacity=d}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},
options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN"],label:"Type"},zoom:{elem:"input",type:"text",label:"Zoom"},lat:{elem:"input",type:"text",label:"Lat"},lng:{elem:"input",type:"text",label:"Lng"},location:{elem:"input",type:"text",label:"Location"},heading:{elem:"input",type:"text",label:"Heading"},pitch:{elem:"input",type:"text",label:"Pitch"}}})}})(window.Popcorn);(function(e){e&&e.plugin("html",{manifest:{about:{name:"Popcorn html Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"html-container",html:{elem:"input",type:"text",label:"Text"},fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){e.container=e.target&&e.target!=="html-container"?document.getElementById(e.target):
this.container;var i=e.end-e.start;if(isNaN(e.fadeIn))e.fadeIn=0;else if(e.fadeIn>i)e.fadeIn=i;i-=e.fadeIn;if(isNaN(e.fadeOut))e.fadeOut=0;else if(e.fadeOut>i)e.fadeIn=i;e.div=document.createElement("div");e.className&&e.div.setAttribute("class",e.className);e.div.style.display="none";e.div.innerHTML=e.html;e.container.appendChild(e.div)},start:function(e,i){i.div.style.display=""},end:function(e,i){i.div.style.display="none"},frame:function(e,i,a){var e=a-i.start,b=1;e<i.fadeIn?b=e/i.fadeIn:a>i.end-
i.fadeOut&&(b=(i.end-a)/i.fadeOut);i.div.style.opacity=b}})})(window.Popcorn);(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0;e.plugin("image",function(a){var b,e,f,m,d,p,r=this,k=!1,c,t,u,q;if(a.url){q=function(a){(a.keyCode||a.which)===27&&u()};c=function(a){if(!n(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);u();return!1}};t=function(a){if(!n(a)){k=r.media.paused;r.pause();e.removeEventListener("click",t,!1);window.addEventListener("click",c,!0);window.addEventListener("keydown",
q,!0);b.classList.add("active");b.style.cssText="";if(m&&16/9*0.4*f.height/f.width>0.8)b.style.width=f.width/f.height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};u=function(a){if(!n(a)){b.classList.remove("active");b.style.width=m;if(d||p)b.style.top=d,b.style.left=p,b.style.position="absolute";f.style.width="100%";e.addEventListener("click",t,!1);window.removeEventListener("keydown",q,!0);window.removeEventListener("click",
c,!0);k||r.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","image");b.id="image"+i;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";i++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"image target container doesn't exist";if(a.top||a.left)b.style.position=
"absolute",b.style.top=a.top,b.style.left=a.left;e=document.createElement("div");e.style.position="relative";b.appendChild(e);var s=function(){if(r.media&&r.media.buffered){var b,c,i=!1,j,k,n=r.media.buffered;for(b=0,c=n.length;b<c;b++)if(j=n.start(b),k=n.end(b),j>r.media.duration&&(j=0),j<=a.end&&k>=a.start){i=!0;break}if(!i){setTimeout(s,10);return}}f=document.createElement("img");f.src=a.url;f.style.width="100%";e.appendChild(f);b=document.createElement("div");b.setAttribute("class","info");c=
a.source||"Image";i=a.title;a.link&&(i='<a href="'+a.link+'" target="_new">'+i+"</a>",c='<a href="'+a.link+'" target="_new">'+c+"</a>");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: '+c+"</span></div><div>"+i+'</div><div class="watch">view image</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",u,!1);e.appendChild(b);m=
a.width;d=a.top;p=a.left;f.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)b=c[3]||"",c=parseFloat(c[1]),c=c*f.height/f.width,e.style.height=c+b;a.loaded=!0},!1);e.addEventListener("click",t,!1)};s();var j=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,j/8);else if(a.fadeIn>j)a.fadeIn=j;j-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>j)a.fadeIn=j;return{start:function(a,
c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,f=1;a<c.fadeIn?f=a/c.fadeIn:d>c.end-c.fadeOut&&(f=(c.end-d)/c.fadeOut);b.style.opacity=f}}}},{about:{name:"Popcorn Image Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",
label:"Out"},target:"image-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"}}})}})(window.Popcorn);(function(e){if(e){var n=0,i=function(a){var g=a.container=document.createElement("div"),f=g.style,m=a.media;i=e.nop;var d=function(){var e=a.position();f.fontSize="18px";f.width=m.offsetWidth+"px";f.top=e.top+m.offsetHeight-g.offsetHeight-40+"px";f.left=e.left+"px";setTimeout(d,10)};g.id="subtitlediv";f.position="absolute";f.color="white";f.textShadow="black 2px 2px 6px";f.fontWeight="bold";f.textAlign="center";d();document.body.appendChild(g)},a=function(a){if(a.languagesrc){if(typeof a.languagesrc===
"function")return a.languagesrc();if(a.languagesrc.tagName==="SELECT")return a.languagesrc.options[a.languagesrc.selectedIndex].value;if(a.languagesrc.value!==void 0)return a.languagesrc.value}};e.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"},
fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(b){var e=document.createElement("div"),f=document.getElementById(b.accessibilitysrc);e.id="subtitle-"+n;if(b.cssText)e.style.cssText=b.cssText;e.style.display="none";e.setAttribute("lang",b.language);n++;(!this.container&&!b.target||b.target==="subtitle-container")&&i(this);b.container=b.target&&b.target!=="subtitle-container"?document.getElementById(b.target):this.container;document.getElementById(b.container.id).appendChild(e);
b.innerContainer=e;b.showSubtitle=function(){b.innerContainer.innerHTML=b.text};b.toggleSubtitles=function(){};if(b.languagesrc){var m;if(typeof b.languagesrc==="string"&&(m=document.getElementById(b.languagesrc)))b.languagesrc=m;b.selectedLanguage=a(b);if(!this.languageSources)this.languageSources={};this.languageSources[b.languagesrc]||(this.languageSources[b.languagesrc]={});if(!this.languageSources[b.languagesrc][b.target]){this.languageSources[b.languagesrc][b.target]=!0;var d=this;this.updateSubtitleLanguage=
function(){b.toggleSubtitles();a(b);var f=d.currentTime(),e,g;for(e=d.data.trackEvents.startIndex-1,g=d.data.trackEvents.byStart;e>=0;e--){var c=g[e];if(c._natives.type!=="subtitle"||c.end<f)break;c.innerContainer.style.display=c.language===a(c)?"":"none";c.showSubtitle(c,c.text)}};b.languagesrc.addEventListener&&b.languagesrc.addEventListener("change",this.updateSubtitleLanguage,!1)}}if(f)b.accessibility=f,b.toggleSubtitles=function(){b.selectedLanguage=a(b);if(b.accessibility.checked||b.selectedLanguage!==
(b.language||""))b.display="",b.container.style.display=b.display;else if(b.selectedLanguage===(b.language||""))b.display="none",b.container.style.display=b.display},b.accessibility.addEventListener("change",b.toggleSubtitles,!1),b.toggleSubtitles();e=b.end-b.start;if(isNaN(b.fadeIn))b.fadeIn=Math.min(0.25,e/8);else if(b.fadeIn>e)b.fadeIn=e;e-=b.fadeIn;if(isNaN(b.fadeOut))b.fadeOut=Math.min(0.25,(b.end-b.start)/8);else if(b.fadeOut>e)b.fadeIn=e},start:function(b,e){if(e.language===a(e))e.innerContainer.style.display=
"",e.showSubtitle(e,e.text)},end:function(a,e){e.innerContainer.style.display="none";e.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)},frame:function(a,e,f){var a=f-e.start,i=1;a<e.fadeIn?i=a/e.fadeIn:f>e.end-e.fadeOut&&(i=(e.end-f)/e.fadeOut);e.innerContainer.style.opacity=i}})}})(window.Popcorn);(function(e){if(e){var n=0;e.plugin("videoComment",function(e){function a(a){return a<10?"0"+a:a}if(!e.text)return!1;var b,g,f=this;b=document.createElement("div");b.setAttribute("class","video-comment");b.id="video-comment"+n;b.style.display="none";b.setAttribute("lang",e.language);n++;if(document.getElementById(e.target))document.getElementById(e.target).appendChild(b);else throw"comment target container doesn't exist";var m,d=new Date(e.date);m=a(d.getMonth()+1)+"."+a(d.getDate());d.getFullYear()!==
(new Date).getFullYear()&&(m+="."+a(d.getFullYear()));var p=document.createElement("time");p.setAttribute("datetime",d.getUTCFullYear()+"-"+a(d.getUTCMonth()+1)+"-"+a(d.getUTCDate())+"T"+a(d.getUTCHours())+":"+a(d.getUTCMinutes())+":"+a(d.getUTCSeconds())+"Z");p.innerHTML=m;b.appendChild(p);m=document.createElement("span");m.setAttribute("class","author");m.appendChild(document.createTextNode(e.author||"Anonymous"));b.appendChild(m);m=document.createElement("p");var d=/https?:\/\/([a-zA-Z0-9\.]+\.[a-zA-Z]{2,6}[^\s\n\r\t$]*)/gi,
r;for(r=0;p=d.exec(e.text);)m.appendChild(document.createTextNode(e.text.substr(r,p.index-r))),r=document.createElement("a"),r.setAttribute("href",p[0]),r.setAttribute("target","_new"),p[1].length>20?r.appendChild(document.createTextNode(p[1].substr(0,17)+"...")):r.appendChild(document.createTextNode(p[1])),r.addEventListener("click",function(){g=!1;f.pause()},!0),m.appendChild(r),r=p.index+p[0].length;r<e.text.length&&m.appendChild(document.createTextNode(e.text.substr(r)));b.appendChild(m);m=document.createElement("div");
m.setAttribute("class","flag");m.appendChild(document.createTextNode("Flag this as inappropriate"));m.addEventListener("click",function(){var a=b.getAttribute("class"),a=a.split(" ");a.indexOf("flagged")<0&&(a.push("flagged"),b.setAttribute("class",a.join(" ")));e.flagCallback&&e.flagCallback(e.id)},!1);b.appendChild(m);m=document.createElement("div");m.setAttribute("class","unflag");m.appendChild(document.createTextNode("unflag this comment"));m.addEventListener("click",function(){var a,c=b.getAttribute("class"),
c=c.split(" ");a=c.indexOf("flagged");a>=0&&(c.splice(a,1),b.setAttribute("class",c.join(" ")));e.flagCallback&&e.flagCallback(e.id,!0)},!1);b.appendChild(m);b.addEventListener("mouseover",function(){var a=setTimeout(function(){g=!f.media.paused;f.media.pause()},500);b.onmouseout=function(){clearTimeout(a);g&&f.media.play()}},!1);return{start:function(){b.style.display=""},end:function(){b.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(b)},
frame:function(a,c,d){var a=d-c.start,e=1,f=0;a<0.5?f=-207*(1-a/0.5)+"px":d>c.end-0.5&&(e=(c.end-d)/0.5);b.style.marginRight=f;b.style.opacity=e}}},{about:{name:"Popcorn Video Comments Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"}}})}})(window.Popcorn);(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0;e.plugin("wikipedia",function(a){var b,g,f,m,d,p,r,k=this,c=!1,t,u,q,s;if(a&&(a.url||a.id)){if(a.id)f=a.id,m=window.language||a.language||"en",a.url="http://en.wikipedia.org/wiki/"+f;else if(f=/(https?:\/\/)?((en)\.)?wikipedia\.org\/wiki\/(.*)\/?/.exec(a.url),m=window.language||a.language||f[3]||"en",f=f[4],!f)return;s=function(a){(a.keyCode||a.which)===27&&q()};t=function(a){if(!n(a)){var c=
a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);q();return!1}};u=function(a){if(!n(a)){c=k.media.paused;k.pause();g.removeEventListener("click",u,!1);window.addEventListener("click",t,!0);window.addEventListener("keydown",s,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};q=function(a){if(!n(a)){b.classList.remove("active");b.style.width=d;if(p||r)b.style.top=
p,b.style.left=r,b.style.position="absolute";g.addEventListener("click",u,!1);window.removeEventListener("keydown",s,!0);window.removeEventListener("click",t,!0);c||k.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","wikipedia");b.id="wikipedia"+i;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";i++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);
else throw"wikipedia target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;g=document.createElement("div");g.style.position="relative";b.appendChild(g);e.xhr.getJSONP("http://"+m+".wikipedia.org/w/api.php?action=parse&props=text&page="+f+"&format=json&callback=wikipedia",function(b){if(b&&b.parse){var c=b.parse.text["*"],c=c.substr(c.indexOf("<p>")+3),c=c.substr(0,c.indexOf("</p>")),c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,
""),f=[],i,k,n,s,f=f.concat(b.parse.images);for(s=0;s<f.length;s++)if(n=f[s].substr(-4).toLowerCase(),n===".jpg"){k=f[s];break}else n===".png"&&(i=f[s]);k||(k=i);var t=document.createElement("div");t.setAttribute("class","content");i=document.createElement("article");i.appendChild(document.createTextNode(c));t.appendChild(i);t.appendChild(document.createElement("br"));g.appendChild(t);c=document.createElement("div");c.setAttribute("class","info");b=b.parse.displaytitle;b=b.replace("<","&lt;");b=b.replace(">",
"&gt;");c.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>wiki<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a.url+'" target="_new">wikipedia</a></span></div><div><a href="'+a.url+'" target="_new">'+b+'</a></div><div class="watch">read article</div>';c.getElementsByClassName("minimize").item(0).addEventListener("click",q,!1);g.appendChild(c);d=a.width;p=a.top;r=a.left;g.addEventListener("click",
u,!1);k?(k="http://"+m+".wikipedia.org/w/api.php?action=query&prop=imageinfo&titles=File:"+k+"&iiprop=url|size&iiurlwidth=200&iiurlheight=200&format=json&callback=wikipediaImage",e.xhr.getJSONP(k,function(b){var c;b.query.pages&&b.query.pages[0]&&(c=b.query.pages[0].imageinfo[0]);if(c)b=document.createElement("img"),b.src=c.thumburl||c.url,b.onload=function(){a.loaded=!0},t.insertBefore(b,t.firstChild)})):a.loaded=!0}});f=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,f/8);else if(a.fadeIn>
f)a.fadeIn=f;f-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>f)a.fadeIn=f;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}}},{about:{name:"Popcorn Wikipedia Plugin",
version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},url:{elem:"input",type:"text",label:"url"},target:"wikipedia-container"}})}})(window.Popcorn);(function(e){function n(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(e){var i=0,a=!1,b=!1,g=function(){if(document.body){a=!0;var f=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){b=!0;f&&f()};e.getScript("http://www.youtube.com/player_api")}else setTimeout(function(){g()},1)};e.plugin("youtube",function(f){var m,d,p,r,k,c,t,u=this,q=!1,s,j,l,v;a||g();v=function(a){var b=a.keyCode||a.which;if(b===27)l();else{if(b===32)t&&t.pauseVideo&&
(t.getPlayerState()===1?t.pauseVideo():t.getPlayerState()===2&&t.playVideo()),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};s=function(a){if(!n(a)){var b=a.target;do if(b===m)return!0;while(b=b.parentNode);console.log(a);l();return!1}};j=function(a){if(!n(a)){q=u.media.paused;u.pause();d.removeEventListener("click",j,!1);window.addEventListener("click",s,!0);window.addEventListener("keydown",v,!0);m.classList.add("active");
m.style.cssText="";t&&t.playVideo&&t.playVideo();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};l=function(a){if(!n(a)){t&&t.pauseVideo&&t.pauseVideo();m.classList.remove("active");m.style.width=p;if(r||k)m.style.top=r,m.style.left=k,m.style.position="absolute";d.addEventListener("click",j,!1);window.removeEventListener("keydown",v,!0);window.removeEventListener("click",s,!0);q||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};f.loaded=!1;m=document.createElement("div");m.setAttribute("class","youtube");m.id="youtube"+i;if(f.width)m.style.width=f.width;if(f.height)m.style.height=f.height;m.style.display="none";i++;if(document.getElementById(f.target))document.getElementById(f.target).appendChild(m);else throw"youtube target container doesn't exist";if(f.top||f.left)m.style.position="absolute",m.style.top=f.top,m.style.left=f.left;d=document.createElement("div");
d.style.position="relative";m.appendChild(d);var B=function(){if(u.media&&u.media.buffered){var a,g,i=!1,m,n,h=u.media.buffered;for(a=0,g=h.length;a<g;a++)if(m=h.start(a),n=h.end(a),m>u.media.duration&&(m=0),m<=f.end&&n>=f.start){i=!0;break}if(!i){setTimeout(B,10);return}}c="http://gdata.youtube.com/feeds/api/videos/"+f.videoid+"?v=2&alt=jsonc&callback=youtube";e.xhr.getJSONP(c,function(a){if(a&&a.data){var c=a.data;(a=f.url)||(a="http://www.youtube.com/watch?v="+c.id);var e=document.createElement("img");
e.src=c.thumbnail.hqDefault;e.style.width="100%";d.appendChild(e);var h=document.createElement("div");h.id="ytplayer-"+c.id;h.setAttribute("class","player");d.appendChild(h);var g=function(){b?t=new window.YT.Player("ytplayer-"+c.id,{height:320,width:240,videoId:c.id,playerVars:{origin:document.location.protocol+"//"+document.location.hostname},events:{onReady:function(){}}}):setTimeout(g,1)},h=document.createElement("div");h.setAttribute("class","info");h.innerHTML='<div class="media">video<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
a+'" target="_new">YouTube</a></span></div><div><a href="'+a+'" target="_new">'+c.title+'</a></div><div class="watch">watch video</div>';d.appendChild(h);a=document.createElement("span");a.innerHTML="minimize window";a.setAttribute("class","minimize");a.addEventListener("click",l,!1);d.appendChild(a);g();p=f.width;r=f.top;k=f.left;e.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b;if(f.width&&!f.height&&(b=a.exec(f.width))&&b.length>1)a=b[3]||"",b=parseFloat(b[1]),b=
b*e.height/e.width,d.style.height=b+a;f.loaded=!0},!1);d.addEventListener("click",j,!1)}})};if(f.url&&!f.videoid){var y=/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]*)/i.exec(f.url);if(y&&y.length>=5)f.videoid=y[4]}f.videoid&&B();y=f.end-f.start;if(isNaN(f.fadeIn))f.fadeIn=Math.min(0.25,y/8);else if(f.fadeIn>y)f.fadeIn=y;y-=f.fadeIn;if(isNaN(f.fadeOut))f.fadeOut=Math.min(0.25,(f.end-f.start)/8);else if(f.fadeOut>y)f.fadeIn=y;return{start:function(a,b){var c=function(){b.loaded?
m.style.display="":setTimeout(c,1)};c()},end:function(){m.style.display="none";l()},_teardown:function(a){l();(a=document.getElementById(a.target))&&a.removeChild(m)},frame:function(a,b,c){if(b.loaded){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);m.style.opacity=d}}}},{about:{name:"Popcorn YouTube Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",
label:"Out"},target:"youtube-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},top:{elem:"input",type:"text",label:"Top"},left:{elem:"input",type:"text",label:"Left"}}})}})(window.Popcorn);(function(e){if(e){var n={start:function(){},end:function(){}};e.plugin("words",function(e){var a,b,g,f,m,d;if(!e)return n;if(!e.target||!e.text)return n;a=this.media;b=e.target;if(typeof b==="string"&&(b=document.getElementById(b),!b))return n;g=document.createElement("div");g.style.cssText=e.style||"";if((d=e.top)||d===0)isNaN(d)||(d+="px"),g.style.top=d,g.style.position="absolute";if((d=e.left)||d===0)isNaN(d)||(d+="px"),g.style.left=d,g.style.position="absolute";if((d=e.right)||d===0)isNaN(d)||
(d+="px"),g.style.right=d,g.style.position="absolute";if((d=e.bottom)||d===0)isNaN(d)||(d+="px"),g.style.bottom=d,g.style.position="absolute";if(e.align)g.style.textAlign=e.align;g.style.display="none";e.classes?e.classes.length&&e.classes.join?g.setAttribute("class","popcorn-words "+e.classes.join(" ")):g.setAttribute("class","popcorn-words "+e.classes.split(/,\s\n\r/).join(" ")):g.setAttribute("class","popcorn-words");e.link?(f=document.createElement("a"),f.setAttribute("href",e.link),e.linkTarget&&
f.setAttribute("target",e.linkTarget),f.addEventListener("click",function(){a.pause()},!1),g.appendChild(f)):f=g;m=e.text.split(/[\n\r]/);for(d=0;d<m.length;d++)d&&f.appendChild(document.createElement("br")),f.appendChild(document.createTextNode(m[d]));b.appendChild(g);e.container=g;(function(){var a,b,d=["onLoad","onStart","onFrame","onEnd"];for(a=0;a<d.length;a++)b=d[a],e[b]&&typeof e[b]==="string"&&window[e[b]]&&typeof window[e[b]]==="function"&&(e[b]=window[e[b]])})();if(typeof e.onLoad==="function")e.onLoad(e);
return{start:function(a,b){g.style.display="";if(typeof b.onStart==="function")try{b.onStart(b)}catch(d){}},frame:function(a,b,d){if(typeof b.onFrame==="function")try{b.onFrame(b,d)}catch(c){}},end:function(a,b){g.style.display="none";if(typeof b.onEnd==="function")try{b.onEnd(b)}catch(d){}},_teardown:function(a){g.parentNode&&(g.parentNode.removeChild(g),g=null,delete a.container)}}},{about:{name:"Popcorn Words Plugin",version:0.1,author:"Brian Chirls",website:"http://chirls.com"},options:{start:{elem:"input",
type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},text:{elem:"input",type:"text",label:"Text"},link:{elem:"input",type:"text",label:"Link (URL)"},classes:{elem:"input",type:"text",label:"List of classes to apply to text container"},style:{elem:"input",type:"text",label:"CSS to apply to text"},align:{elem:"select",label:"CSS to apply to text"},top:{elem:"input",type:"number",label:"Top position"},left:{elem:"input",type:"number",label:"Left position"},bottom:{elem:"input",type:"number",
label:"Bottom position"},right:{elem:"input",type:"number",label:"Right position"}}})}})(window.Popcorn);(function(e){function n(a){var a=Math.floor(a),b=a%60,a=(a-b)/60;b<10&&(b="0"+b);if(a>59){var c=Math.floor(a/60);a%=60;a<10&&(a="0"+a);return c+":"+a+":"+b}return a+":"+b}function i(a,b,c,d){var e,f,g=[],i=[],j,l,k=Date.now(),m,n;typeof a==="string"&&(a=h.getElementById(a));if(a)if(Modernizr.cssanimations){a.style.MozTransitionProperty="";a.style.webkitTransitionProperty="";a.style.oTransitionProperty="";a.style.transitionProperty="";for(e in b){f=b[e];g.push(e);if(f.from!==void 0)a.style[e]=f.from;
i.push(f.to)}j=g.join(",");setTimeout(function(){a.style.MozTransitionProperty=j;a.style.webkitTransitionProperty=j;a.style.oTransitionProperty=j;a.style.transitionProperty=j;a.style.MozTransitionDuration=c+"s";a.style.webkitTransitionDuration=c+"s";a.style.oTransitionDuration=c+"s";a.style.transitionDuration=c+"s";d&&(m=function(){d();a.removeEventListener("transitionend",m,!0);a.removeEventListener("webkitTransitionEnd",m,!0);a.removeEventListener("oTransitionEnd",m,!0)},a.addEventListener("transitionend",
m,!0),a.addEventListener("webkitTransitionEnd",m,!0),a.addEventListener("oTransitionEnd",m,!0));for(e=0;e<g.length;e++)a.style[g[e]]=i[e]},0)}else{l=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/;for(e in b)if(f=b[e],(j=l.exec(f.from))&&j.length>1&&j[1])g.push({prop:e,from:parseFloat(j[1]),to:parseFloat(f.to),unit:j[3]}),a.style[e]=f.from;n=function(){var b=(Date.now()-k)/1E3,e=Math.min(b/c,1),f,h,R;for(f=0,h=g.length;f<h;f++)R=g[f],a.style[R.prop]=R.from+e*(R.to-R.from)+(R.unit||"");b<c?oa(n,a):d&&d()};n()}}
function a(a,b,c,d){a.onmousedown=function(a){if(b)if(b(a||e.event)&&a.preventDefault)a.preventDefault();else return;if(c)h.onmousemove=function(a){c(a||e.event)};h.onmouseup=function(a){d&&d(a||e.event);h.onmousemove=null;h.onmouseup=null}};a.ontouchstart=function(f){f.preventDefault&&f.preventDefault();a.onmousedown=null;b&&b(f.touches[0]||e.event);if(c)h.ontouchmove=function(a){c(a.touches[0]||e.event);return!1};h.ontouchend=function(){d&&d();h.ontouchmove=null;h.ontouchend=null}}}function b(a){var b,
c;if(a)if(a.pageX!==void 0||a.pageY!==void 0)b=a.pageX,c=a.pageY;else if(a.clientX!==void 0||a.clientY!==void 0)b=a.clientX+h.body.scrollLeft+h.documentElement.scrollLeft,c=a.clientY+h.body.scrollTop+h.documentElement.scrollTop;return{x:b,y:c}}function g(a,b){var c=b;a.x-=b.clientLeft+b.offsetLeft;for(a.y-=b.clientTop+b.offsetTop;(c=c.offsetParent)&&c.nodeName!=="BODY";)a.x-=c.clientLeft+c.offsetLeft,a.y-=c.clientTop+c.offsetTop}function f(){if(ja){var a=N.height-17,b=a*(1-o.volume),c=ja;c.shadowOffsetX=
0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,N.width,N.height);c.lineWidth=7;c.lineCap="round";var d=c.createLinearGradient(0,0,7,0);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,a+8.5);c.stroke();b+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,b);c.stroke();c.beginPath();c.lineWidth=1;c.strokeStyle="rgb(96, 96, 96)";c.fillStyle="rgb(128, 128, 128)";
c.shadowOffsetX=1;c.shadowOffsetY=2;c.shadowBlur=5;c.shadowColor="rgba(0, 0, 0, 0.19)";c.arc(8.5,b,8.5,0,Math.PI*2,!0);c.fill();c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(8.5,b,3.5,0,Math.PI*2,!0);c.fill()}}function m(a){if(o.duration&&ca&&(a||!(xa===o.currentTime&&o.networkState>=4))){var b=D.width-17,a=b*o.currentTime/o.duration,c=ca;c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,D.width,D.height);c.lineWidth=7;c.lineCap="round";
var d=c.createLinearGradient(0,0,0,7);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(b+8.5,8.5);c.stroke();var d=[],e,f,h,i=o.buffered,j=0;if(i){for(e=0,f=i.length;e<f;e++)h=i.start(e),h>o.duration&&(h=0),h!==j&&d.push({start:j,end:h}),j=i.end(e);j!==o.duration&&d.push({start:j,end:o.duration})}if(da){e=j===o.duration?0:Math.floor(Date.now()/40)%8;c.strokeStyle=da[e];for(e=0,f=d.length;e<f;e++)j=
d[e].start/o.duration*b,h=d[e].end/o.duration*b,c.beginPath(),c.moveTo(j+8.5,8.5),c.lineTo(h+8.5,8.5),c.stroke()}a+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(a,8.5);c.stroke();b={x:ea.x,y:ea.y};g(b,D);b=Math.sqrt(Math.pow(b.x-a,2)+Math.pow(b.y-8.5,2))-20;b=Math.max(0,b);if(b<100&&(b=8.5*(1-b/100),b*2>7))c.beginPath(),c.lineWidth=1,c.fillStyle="rgb(128, 128, 128)",c.shadowOffsetX=1,c.shadowOffsetY=2,c.shadowBlur=5,c.shadowColor="rgba(0, 0, 0, 0.19)",c.arc(a,8.5,
b,0,Math.PI*2,!0),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(a,8.5,3.5,0,Math.PI*2,!0);c.fill()}}function d(a){var b=e.innerWidth||800,c=e.innerHeight||b*9/16;if(a||b!==pa||c!==qa||!D.width){pa=b;qa=c;var d=V/W/(b/c),f,g,i,j,l,k;d>1.2?(k=Math.min(1,(d-1.2)/0.25),g=Math.min(k*30,Math.max(b-640,0)*0.1),i=Math.floor(b-g*2),l=i/V,j=Math.floor(W*l),f=(c*1.2/d-j)/2):d<1/1.05?(k=Math.min(1,(1/1.05-d)/0.2),f=Math.min(k*40,Math.max(b-360,0)*0.1),j=
Math.floor(c-f*2),l=j/W,i=Math.floor(V*l),g=(b*d/(1/1.05)-i)/2):(l=Math.min(c/W,b/V),i=Math.floor(V*l),j=Math.floor(W*l),g=(b-i)/2,f=(c-j)/2,k=0);h.body.style.overflow=i<640?"auto":"";if(ra!==k){if(k>0){if($.style.display!=="block")$.style.display="block";$.style.opacity=k;if(aa.style.display!=="block")aa.style.display="block";aa.style.opacity=k}else $.style.display="none",aa.style.display="none";ra=k}h.body.style.fontSize=Math.round(l*8)+"px";Q.style.width=i+"px";Q.style.height=j+"px";Q.style.marginLeft=
g+"px";Q.style.marginTop=f+"px";if(a||sa!==i){sa=i;a=D.parentNode;b=a.offsetWidth;for(c=0,d=a.childNodes.length;c<d;c++)f=a.childNodes[c],f.tagName&&f!==D&&(ka[f.id]===void 0&&f.offsetWidth>0&&(ka[f.id]=f.offsetWidth+6),b-=ka[f.id]);D.width=b-6;m(!0)}}K=Date.now()}function p(a){if(O&&(!a||!a.target||!(a.target!==a.currentTarget||a.target.classList.contains("button"))))h.getElementById("volume-controls").style.display="none",h.getElementById("settings-controls").style.display="none",h.getElementById("help-controls").style.display=
"none",h.getElementById("share-controls").style.display="none",O=!1}function r(a){var b=h.getElementById("comment-name"),c=h.getElementById("comment-email"),d=h.getElementById("comment-text"),e=h.getElementById("comment-post"),f;f=c.value;var g,i;for(g=0;g<f.length;g++)if(" \n\r\t\u000c".indexOf(f.charAt(g))<0)break;for(i=f.length-1;i>=g;i--)if(" \n\r\t\u000c".indexOf(f.charAt(i))<0)break;f=f.substring(g,i+1);b=b.value.length;f=!f.length||ya.test(f);if(a&&a.target===c)f?(h.getElementById("comment-email-invalid").style.display=
"none",c.classList.remove("error")):(h.getElementById("comment-email-invalid").style.display="block",c.classList.add("error"));b&=f;if(d.value.length>150){if(a&&a.target===d)a=h.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.add("error")}else if(a&&a.target===d)a=h.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.remove("error");(b=(b=b&&d.value.length<=150)&&fa)?e.classList.remove("disabled"):e.classList.add("disabled");return b}
function k(){if(X){var a=Date.now()-K;m(a<=100);O&&a>5E3&&p();var b;if(o.paused||o.ended){if(ta!==(o.paused||o.ended))for(a=0,b=Y.length;a<b;a++)Y[a].style.opacity=1}else if(a<=5E3&&(a=ea,X)){b=0.4*Q.offsetWidth;var c=Math.max(0,1-(Date.now()-K)/5E3),d,e,f,h,i,j;for(d=0,e=Y.length;d<e;d++)h=Y[d],i=h.offsetWidth,j=h.offsetHeight,f={x:a.x,y:a.y},g(f,h),i=f.x<0?-f.x:f.x>i?f.x-i:0,f=f.y<0?-f.y:f.y>j?f.y-j:0,f=Math.sqrt(i*i+f*f),f=1-0.8*(f/b),f<0.2?f=0.2:f>1&&(f=1),h.style.opacity=c*f}ta=o.paused||o.ended;
o.duration?(a=n(o.currentTime),b=a+" / "+n(o.duration)):(a="-:--",b="-:-- / -:--");if(na.innerHTML!==b)na.innerHTML=b;if(H&&ba.innerHTML!==a)ba.innerHTML=a}oa(k,Q)}function c(){o.paused?o.play():o.ended?(o.currentTime=0,o.play()):o.pause()}function t(a){var b=h.getElementById(a+"-toggle");if(b)I[a]?(b.innerHTML=x==="de"?"ein":"On",b.classList.add("on")):(b.innerHTML=x==="de"?"aus":"Off",b.classList.remove("on"))}function u(){function a(b,c){var d=new XMLHttpRequest;d.open("GET","comments.php?"+(c?
"unflag":"flag")+"="+b,!0);d.send(null)}if(x){var b="comments.php?vtime="+(o.currentTime||0)+"&language="+x;if(ga[x]){if(Date.now()-ga[x]<5E3)return;b+="&since="+ga[x]/1E3}var c=new XMLHttpRequest;c.open("GET",b,!0);c.onreadystatechange=function(){if(c.readyState===4&&c.status===200){var b=JSON.parse(c.responseText),d,e,f;for(d=0,e=b.length;d<e;d++)if((f=b[d])&&!ha[f[0]])ha[f[0]]=f,w.videoComment({start:f[2],end:f[2]+5,id:f[0],author:f[4],text:f[5],date:f[1]*1E3,language:f[3],target:"comments",flagCallback:a})}};
c.send(null);ga[x]=Date.now()}}function q(a){!a&&E&&u();h.documentElement.setAttribute("lang",x);for(var b,c=["en","de"],a=0;a<c.length;a++)b=h.getElementById("language-"+c[a]),c[a]===x?b.classList.add("on"):b.classList.remove("on");var d,e,f,g;for(a in S)if(S.hasOwnProperty(a)){try{d=h.querySelectorAll(a)}catch(i){d=(d=h.getElementById(a.substr(1)))?[d]:[]}c=(S[a][x]||"").split("\n");for(f=0,g=d.length;f<g;f++)if((b=d[f])&&c.length&&c[0].length){for(;b.firstChild;)b.removeChild(b.firstChild);try{b.appendChild(h.createTextNode(c[0]));
for(e=1;e<c.length;e++)b.appendChild(h.createElement("br")),b.appendChild(h.createTextNode(c[e]))}catch(j){if(a==="#title")h.title=c.join(" ")}}}if(H){e=["comment-email","comment-name","comment-text"];b=[];d=[];for(a=0;a<e.length;a++)d.push(h.getElementById(e[a])),b.push(d[a].previousSibling.offsetWidth);for(a=0;a<e.length;a++)d[a].style.paddingLeft=b[a]+"px"}t("comments");t("subtitles");t("resources");w&&w.updateSubtitleLanguage&&w.updateSubtitleLanguage()}function s(){H=!0;o.pause();if(Math.abs(Z-
o.currentTime)>10)h.getElementById("comment-text").value="";var a;a=o.duration?n(o.currentTime):"-:--";if(H&&ba.innerHTML!==a)ba.innerHTML=a;h.getElementById("add-comment-controls").style.display="block";q(!0)}function j(a){if(!a.altKey&&!a.altGraphKey&&!a.metaKey&&(K=Date.now(),!H)){var b=a.keyCode||a.which;b>=65&&b<=90||b>=97&&b<=122||b>=256&&b<=658||b>=884&&b<=8191?(a.preventDefault(),s(),a=h.getElementById("comment-text"),a.value=String.fromCharCode(b),a.setSelectionRange(a.value.length,a.value.length),
a.focus(),r()):(b===32&&(c(),a.preventDefault()),K=Date.now())}}function l(){var a=new XMLHttpRequest;a.open("GET","save.php?language="+x,!0);a.send(null)}function v(a){var b;if(a!==M){E?(o.pause(),p()):(b=h.getElementById("youtube-container"),o&&o.pauseVideo&&o.pauseVideo());e.location.hash=a||"";if(M)h.getElementById(M).style.display="none";if(a){if(b)b.style.display="none";if(!M&&(h.getElementById("back-controls").style.display="block",h.getElementById("bottom-controls").style.display="none",P))P.style.display=
"block";h.getElementById(a).style.display="block";T.style.zIndex="1500";M=a}else if(M=!1,!M){T.style.zIndex="";h.getElementById("back-controls").style.display="";h.getElementById("bottom-controls").style.display="";if(P)P.style.display="";if(b)b.style.display=""}}}function B(){var a,b=new Image;b.onload=function(){da=[];var c=h.createElement("canvas");c.height=7;c.width=8;var d=c.getContext("2d");for(a=0;a<8;a++)d.clearRect(0,0,8,7),d.drawImage(b,-a,0),d.drawImage(b,8-a,0),da.push(ca.createPattern(c,
"repeat"))};b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAExJREFUeNpi/P//fzADA4MwAwLcAuIDUDYbE5DYDMRvkRSoAbEDlP0LpOAXPkWMQCtggmxA7ItuHRNUNQMuk5igRuFUxASlcSoCCDAA+ZwYM8U0vFEAAAAASUVORK5CYII=";var c=h.getElementsByClassName("fade");for(a=0;a<c.length;a++)Y.push(c.item(a))}function y(){function c(a){var e;a.which?e=a.which===3:a.button&&(e=a.button===2);if(e)return!1;p();d=d&&o.paused;a=b(a);g(a,D);a=(a.x-8.5)/(D.offsetWidth-
17);a>=0&&a<=1&&(a*=o.duration,w.currentTime(a));o.pause();return!0}var d=!0;a(D,c,c,function(){d||(o.play(),d=!0)})}function z(){function c(a){var d;a.which?d=a.which===3:a.button&&(d=a.button===2);if(d)return!1;a=b(a);g(a,N);a=1-(a.y-8.5)/(N.offsetHeight-17);if(a>=0&&a<=1)o.volume=a;return!0}a(N,c,c,null)}function J(){if(A>o.duration)A=o.duration;if(A)o.currentTime=A,la||o.play(),X=!0;if(ma)o.muted=!0;y();k()}function L(){var a,b,c,d,f=!1;c=e.location.pathname.split("/");c=c.concat(e.location.hash.substr(1).split("/"));
for(d=c.length-1;d>=0;d--)if(a=c[d].toLowerCase(),a==="pause"?la=!0:a==="mute"?ma=!0:!b&&(a==="about"||a==="contact"||a==="disclaimer"||a==="terms-of-use")?b=a:!f&&a&&!isNaN(a)&&a>=0&&(f=!0,A=parseFloat(a)),b&&f&&ma&&la)break;if(ia=b)P?v(ia):F.style.display="none";else if(f&&o&&o.duration>A)o.currentTime=A}function G(){return x}function C(){E=!1;A=0;h.getElementById("no-video").style.display="block";S["#intro-caption"]={en:"With the popcorn.js and HTML5 video technology on board, Europeana Remix is at the vanguard of using audiovisual heritage in engaging people with their history.",
de:"Mit dem Popcorn.js und HTML5-Video-Technologie an Bord, ist Europeana Remix an der Spitze der Nutzung von Online-Video im Dialog mit Menschen mit ihrer Geschichte."};var a=h.createElement("script");a.setAttribute("type","text/javascript");a.src="http://www.youtube.com/player_api";var b=h.createElement("div");b.id="youtube-container";b.style.display="none";F.insertBefore(b,h.getElementById("intro-text"));e.onYouTubePlayerAPIReady=function(){o=new e.YT.Player("youtube-container",{width:640,height:320,
videoId:"8uLOWsWod7c",playerVars:{origin:h.location.protocol+"//"+h.location.hostname}})};h.body.appendChild(a);h.getElementById("no-video-continue").onclick=function(){h.getElementById("intro-text").style.display="none";b.style.display=""};h.body.classList.add("no-video")}var h=e.document,wa=e.Popcorn,$=h.getElementById("background"),aa=h.getElementsByTagName("footer")[0],Q=h.getElementById("video-frame"),o=h.getElementById("video"),na=h.getElementById("play-timer"),ba=h.getElementById("add-comment-timer"),
D=h.getElementById("progress"),N=h.getElementById("volume-canvas"),ja,ca,F=h.getElementById("intro"),T=h.getElementById("eu-logo"),P,ua,va,w,A=0,la=!1,ma=!1,ya=RegExp("^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[A-Z]{2}|aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)$","i"),oa=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||
e.msRequestAnimationFrame||function(a){e.setTimeout(a,16)}}(),xa,ta,K=0,ga={},pa,qa,sa,ra,M,ia,O=!1,Z=-10,ea={},E=!0,I={comments:!0,resources:!0,subtitles:!0},X=!1,H=!1,fa=!1,ha={},U=[],x,S={"#title":{en:"A First World War friendship \u2013 an interactive HTML5 video by Europeana",de:"Eine Erste Weltkrieg Freundschaft - ein interaktiver HTML5 Video von Europeana"},"#about-button":{en:"About",de:"\u00fcber uns"},"#contact-button":{en:"Contact",de:"kontakt"},"#share-button":{en:"Share",de:"teilen"},
"#comments-button-text":{en:"User Comments:",de:"User-Kommentare:"},"#resources-button-text":{en:"Related Items:",de:"relatierte Artikel:"},"#subtitles-button-text":{en:"Subtitles:",de:"Untertitel"},"#language-button-text":{en:"Language:",de:"Sprache:"},"#back-button":{en:"Back to film",de:"Zur\u00fcck zum Film"},".popcorn-source":{en:"source",de:"Quelle"},"#write-comment-at":{en:"Write a comment at:",de:"Schreib einen Kommentar zu:"},"#comment-email-label":{en:"Email Address:",de:"E-Mail-Adresse:"},
"#comment-text-label":{en:"Comment:",de:"Kommentar:"},"#comment-tos":{en:"I agree to terms of use",de:"Ich stimme den Nutzungsbedingungen zu"},"#comment-post":{en:"Post My Comment",de:"absenden"},"#help-button":{en:"Help",de:"Hilfe"},"#help-window > div":{en:"Use this button:",de:"Diese taste dr\u00fccken:"},"#help-comment-p":{en:"(or just start typing) to leave a comment",de:"um einen Kommentar zu schreiben (oder fangen Sie einfach mit schreiben an)"},"#help-language-p":{en:"to change the language/subtitle settings",
de:"Um die Sprache Untertitel-Einstellungen zu \u00e4ndern"},"#help-settings-p":{en:"to toggle subtitles, related items and comments on or off",de:"um Untertitel, verwandte Artikel und Kommentare ein-oder auszuschalten"},"#intro-caption":{en:"An interactive experience around the story of an unlikely friendship during the First World War.",de:"Ein interaktives Erlebnis rund um die Geschichte einer ungew\u00f6hnlichen Freundschaft w\u00e4hrend des Ersten Weltkriegs."},"#no-video-browsers":{en:"Please be aware that for optimal performance, these browsers are recommended:",
de:"Bitte beachten Sie, dass f\u00fcr eine optimale Leistung die folgenden Browser empfohlen sind:"},"#no-video-continue-text":{en:"Click 'Continue' for the video without the interactive components.",de:"Klicken Sie auf 'Weiter\u2019 f\u00fcr das Video ohne die interaktiven Komponenten."},"#no-video-continue":{en:"Continue",de:"Weiter"},"#end-title":{en:"Like this story?\nHelp us build the next",de:"Gef\u00e4llt Ihnen diese Geschichte?\nHelfen Sie uns beim Aufbau der n\u00e4chsten!"},"#end-caption":{en:"Europeana wants to hear your family story about World War 1. Share your photos, letters and other memorabilia.",
de:"Europeana will Ihre Familiengeschichte \u00fcber den 1. Weltkrieg gerne h\u00f6ren. Teilen Sie Ihre Fotos, Briefe und andere Erinnerungsst\u00fccke."},"#play-again":{en:"Play Again",de:"wiederholen"},"#add-archive":{en:"Add to the Archive",de:"Mitmachen"},"#explore-archive":{en:"Explore the Archive",de:"Ansehen"},shareTwitter:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1 http://remix.europeana.eu #europeana",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK http://remix.europeana.eu #europeana"},
shareFacebook:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK"}},ka={},Y=[],da,V=1024,W=576;(function(){L();e.addEventListener("hashchange",L,!1);if(Modernizr.video){w=wa("#video");try{ja=N.getContext("2d"),ca=D.getContext("2d")}catch(a){}o.readyState>=2?J():o.addEventListener("loadedmetadata",J,!1);if(h.body&&A>1.5)h.body.style.backgroundColor="#000"}else C();d();
if(A>1.5)h.body.style.backgroundColor="#000";x=h.documentElement.getAttribute("lang")||"en";q();E&&(z(),B(),o.addEventListener("play",function(){h.getElementById("play-button").classList.add("active");K=Date.now();if(!X)A<1.5&&i("bottom-controls",{opacity:{from:0,to:1}},0.5),h.getElementById("intro-play").style.display="none",o.style.display="block",X=!0},!1),o.addEventListener("pause",function(){h.getElementById("play-button").classList.remove("active");K=Date.now()},!1),o.addEventListener("ended",
function(){h.getElementById("play-button").classList.remove("active")},!1),o.addEventListener("volumechange",function(){h.getElementById("volume-button").offsetHeight&&f();o.volume<0.05?h.getElementById("volume-button").classList.add("active"):h.getElementById("volume-button").classList.remove("active");if(e.localStorage)localStorage.euRemixVolume=o.volume},!1));o.addEventListener("click",p,!1);h.getElementById("resources").addEventListener("click",p,!1);h.getElementById("bottom-controls").addEventListener("click",
p,!1);h.getElementById("top-controls").addEventListener("click",p,!1);h.getElementById("play-button").addEventListener("click",c,!1);h.addEventListener("click",function(){},!1);h.getElementById("intro-en").addEventListener("click",function(){x="en";q();l()},!1);h.getElementById("intro-de").addEventListener("click",function(){x="de";q();l()},!1);if(E)h.getElementById("comments-button").addEventListener("click",function(){I.comments=!I.comments;t("comments");I.comments?w.enable("videoComment"):w.disable("videoComment")},
!1),h.getElementById("resources-button").addEventListener("click",function(){var a,b;I.resources=!I.resources;t("resources");if(I.resources)for(a=0,b=U.length;a<b;a++)w.enable(U[a]);else for(a=0,b=U.length;a<b;a++)w.disable(U[a])},!1),h.getElementById("subtitles-button").addEventListener("click",function(){I.subtitles=!I.subtitles;t("subtitles");I.subtitles?w.enable("subtitle"):w.disable("subtitle")},!1),h.getElementById("language-en").addEventListener("click",function(){x="en";q();l()},!1),h.getElementById("language-de").addEventListener("click",
function(){x="de";q();l()},!1),h.getElementById("logo-link").addEventListener("click",function(){o.pause()},!1),h.getElementById("settings-button").addEventListener("click",function(){var a=h.getElementById("settings-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",O=!0},!1),h.getElementById("volume-button").addEventListener("click",function(){var a=h.getElementById("volume-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",f(),O=!0},!1),h.getElementById("add-comment-button").addEventListener("click",
function(){(H=!H)?s():(Z=o.currentTime,h.getElementById("add-comment-controls").style.display="none")},!1),h.getElementById("comment-tos-checkbox").addEventListener("click",function(){fa=this.checked;r()},!1),fa=h.getElementById("comment-tos-checkbox").checked,h.getElementById("comment-post").addEventListener("click",function(){if(fa){var a=new FormData,b=h.getElementById("comment-email").value,c=h.getElementById("comment-name").value,d=h.getElementById("comment-text").value;a.append("language",x);
a.append("name",c);a.append("email",b);a.append("comment",d);a.append("time",o.currentTime);var e=new XMLHttpRequest;e.open("POST","save-comment.php",!0);e.send(a);e.onreadystatechange=function(){if(e.readyState===4)if(e.status===200){var a=JSON.parse(e.responseText);if(a.success){if((a=a.data)&&!ha[a[0]])ha[a[0]]=a,w.videoComment({start:a[2],end:a[2]+5,id:a[0],author:a[4],text:a[5],date:a[1]*1E3,language:a[3],target:"comments"});H=!1;Z=o.currentTime;h.getElementById("add-comment-controls").style.display=
"none";h.getElementById("comment-text").value=""}}else console.log("error saving comment")}}},!1),h.getElementById("end-close").addEventListener("click",function(){h.getElementById("end").style.display="none"},!0),h.getElementById("play-again").addEventListener("click",function(){o.currentTime=0;o.play()},!0),h.getElementById("comment-cancel").addEventListener("click",function(){H=!1;Z=o.currentTime;h.getElementById("add-comment-controls").style.display="none"},!0),h.getElementById("comment-name").addEventListener("change",
r,!1),h.getElementById("comment-email").addEventListener("change",r,!1),h.getElementById("comment-text").addEventListener("change",r,!1),h.getElementById("comment-name").addEventListener("keyup",r,!1),h.getElementById("comment-email").addEventListener("keyup",r,!1),h.getElementById("comment-text").addEventListener("keyup",r,!1);h.getElementById("about-button").addEventListener("click",function(){v("about")},!1);h.getElementById("contact-button").addEventListener("click",function(){v("contact")},!1);
h.getElementById("back-button").addEventListener("click",function(){v()},!1);h.getElementById("help-button").addEventListener("click",function(){var a=h.getElementById("help-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",O=!0},!1);h.getElementById("share-button").addEventListener("click",function(){var a=h.getElementById("share-controls"),b=!a.offsetHeight;p();if(b)a.style.display="block",O=!0},!1);h.getElementById("twitter-button").addEventListener("click",function(){var a=encodeURIComponent(e.location.protocol+
"//"+e.location.host+e.location.pathname),b=encodeURIComponent(S.shareTwitter[x]);ua=e.open("http://twitter.com/share?count=none&counturl="+a+"&text="+b+"&url=","europeana-share-tweet","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");ua.focus()},!1);h.getElementById("facebook-button").addEventListener("click",function(){var a=e.location.protocol+"//"+e.location.host+e.location.pathname,b=encodeURIComponent(S.shareFacebook[x]);
va=e.open("http://facebook.com/sharer.php?u="+a+"&t="+b,"europeana-share-facebook","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");va.focus()},!1);i("top-controls",{opacity:{from:0,to:1}},0.5);e.addEventListener("load",function(){d(!0)},!1);e.addEventListener("resize",d,!0);h.addEventListener("mousemove",function(a){K=Date.now();ea=b(a)},!1);var g=[{url:"image/page-bg.jpg",category:"display"},
"image/background.jpg",{url:"css/style.css",mode:"font",id:"chevin",families:["Chevin-Light"],category:"display"},"image/bg.png","image/logo.png","image/icon_facebook.png","image/icon_twitter.png","image/radio.png","image/settings.png"];E&&(g=g.concat([{url:"video/otto-and-bernard.webm",element:o,id:"video",category:"play"},{url:"data/resources.txt?"+Date.now(),type:"json",category:"data",id:"resources"},{url:"data/subtitles.txt",type:"json",category:"data",id:"subtitles"},"image/playpause.png","image/check.png",
"image/comment.png","image/comments.png","image/volume.png","image/intro-play.png","image/media-icons.png"]));g=new Loaderator(g,"all",function(){if(!E)return!1;if(A>1.5)i("bottom-controls",{opacity:{from:0,to:1}},0.5);else{var a=h.getElementById("intro-play");a.style.display="block";a.addEventListener("click",function(){o.play()},!1)}e.addEventListener("keypress",j,!1)});g.addEventListener("all:chevin",function(){d();A<1.5||!E?(i("intro-text",{opacity:{from:0,to:1}},1),i("intro-en",{opacity:{from:0,
to:1}},1),i("intro-de",{opacity:{from:0,to:1}},1)):h.getElementById("intro-text").style.opacity=1});g.addEventListener("all:image/logo.png",function(){d();T.style.zIndex="1500";i(T,{opacity:{from:0,to:1}},1)});g.addEventListener("all:image/page-bg.jpg",function(a){a=a.element;a.id="page-background";P=a;F.parentNode.insertBefore(a,F.nextSibling);if(!E)F.style.display="block"});g.addEventListener("display",function(){ia&&!M&&v(ia);if(A<1.5||!E)F.style.display="block"});g.addEventListener("all:image/background.jpg",
function(a){d();a=a.element;F.insertBefore(a,F.firstChild);if(E){if(A<1.5){if(i(a,{opacity:{from:0,to:1}},1,function(){o.style.display="block"}),P)F.style.display="block"}else o.style.display="block";var b=h.getElementById("end"),a=a.cloneNode(!1);b.insertBefore(a,b.firstChild)}});E&&(g.addEventListener("all:video",function(a){a.element.style.visibility="visible";if(e.localStorage&&localStorage.euRemixVolume!==void 0)o.volume=localStorage.euRemixVolume;var b=h.getElementById("end"),c=h.getElementById("end-text"),
d=h.getElementById("end-close"),f=b.firstChild;w.code({start:"4:26",end:w.duration()-1,onStart:function(){b.style.display="block";d.style.display=""},onFrame:function(a,c){var d=Math.min((w.currentTime()-c.start)/1.5,1);if(b.style.opacity!==d)b.style.opacity=d},onEnd:function(a){if(w.currentTime()<a.start)b.style.display="";d.style.display="none"}});w.code({start:w.duration()-1,end:w.duration(),onStart:function(){if(!(f instanceof HTMLImageElement))f=b.firstChild;b.style.display="block";b.classList.add("final")},
onFrame:function(a,d){var e=Math.min((w.currentTime()-d.start)/0.5,1);if(f.style.opacity!==e)f.style.opacity=e;if(b.style.opacity<e)b.style.opacity=e;e=1-e;c.style.backgroundColor="rgba(255, 255, 255, "+e*0.85+")";c.style.borderColor="rgba(0, 0, 0, "+e*0.6+")"},onEnd:function(){b.style.cssText="";b.classList.remove("final")}})}),g.addEventListener("data:resources",function(a){var b={flickr:e.flickrApiKey||""},a=JSON.parse(a.element.responseText),c,d,f,g;for(c in a)if(a.hasOwnProperty(c)&&typeof w[c]===
"function"){for(f=0,g=a[c].length;f<g;f++){d=a[c][f];if(b[c])d.apikey=b[c];d.target="resources";if(d.fadeIn===void 0||isNaN(d.fadeIn))d.fadeIn=0.5;if(d.fadeOut===void 0||isNaN(d.fadeOut))d.fadeOut=0.5;w[c](d)}g&&U.indexOf(c)===-1&&(U.push(c),I.resources||w.disable(c))}}),g.addEventListener("data:subtitles",function(a){var b=JSON.parse(a.element.responseText);if(b)for(a=0;a<b.length;a++)b[a].languagesrc=G,w.subtitle(b[a])}),u(),e.addEventListener("keyup",function(a){var b=a.which||a.keyCode;if(H){if(K=
Date.now(),b===27)H=!1,Z=o.currentTime,h.getElementById("add-comment-controls").style.display="none",a.preventDefault()}else b===37?(o.currentTime-=0.04,console.log("left",o.currentTime)):b===39&&(o.currentTime+=0.04,console.log("right",o.currentTime))},!1),w.code({start:0,end:1.5,onStart:function(){F.style.display="block";h.body.style.backgroundColor="#fff";T.style.zIndex="1500"},onFrame:function(){var a=1-Math.min(w.currentTime()/1.5,1);F.style.opacity=a;a=Math.round(a*255);h.body.style.backgroundColor=
"rgb("+a+", "+a+", "+a+")"},onEnd:function(){h.body.style.backgroundColor="#000";F.style.display="none";T.style.zIndex=""}}))})()})(window);
