(function(g,l){function h(n,a,k){this.categories={};this.resources={};this.eventListeners=[];this.loadingCount=0;this.callbackQueue=[];this._head=b.getElementsByTagName("head")[0];n&&this.load(n,a,k)}var a,b=g.document,f=g.console;f===l&&(f={log:function(){}});var e=/^(([A-Za-z]+):\/\/)+(([a-zA-Z0-9\._\-]+\.[a-zA-Z]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|localhost)(\:([0-9]+))*(\/[^#]*)?(\#.*)?$/;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(n){if(this===void 0||this===
null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(a===0)return-1;var c=0;arguments.length>0&&(c=Number(arguments[1]),c!==c?c=0:c!==0&&c!==1/0&&c!==-(1/0)&&(c=(c>0||-1)*Math.floor(Math.abs(c))));if(c>=a)return-1;for(c=c>=0?c:Math.max(a-Math.abs(c),0);c<a;c++)if(c in b&&b[c]===n)return c;return-1};g.Loaderator=h;h.Category=function(a,b){this.name=a;this.resources=[];this.resourcesById={};this.loader=b;this.eventListeners={load:[],single:{}}};h.Category.prototype.addResource=function(a){var b=
a.id||a.url;this.resourcesById[b]||(this.resources.push(a),this.resourcesById[b]=a,a.categories.push(this))};h.Category.prototype.checkForAllLoaded=function(){var a,b;if(this.loader.loadingCount)this.loader.callbackQueue.indexOf(this)<0&&this.loader.callbackQueue.push(this);else{var d=this.resources;if(a=d.length){var c=this.eventListeners.load;if(b=c.length){for(a--;a>=0;a--)if(!d[a].loaded)return;a=function(c,a,o){return function(){c.call(a,o)}};for(b--;b>=0;b--)d=c.pop(),d.async?setTimeout(a(d,
this.loader,this.resourcesById),0):d.call(this.loader,this.resourcesById)}}}};h.prototype.setBase=function(a){var d=b.getElementsByTagName("base"),k;this.base=null;if(a){if(a=e.exec(a))this.base={},this.base.protocol=a[2]+":",this.base.hostname=a[3],this.base.port=a[7]||"",this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:""),this.base.pathname=a[8]}else for(k=0;k<d.length;k++)if(a=d.item(k),a=a.getAttribute("href"))if(a=e.exec(a)){this.base={};this.base.protocol=a[2]+":";this.base.hostname=
a[3];this.base.port=a[7]||"";this.base.host=this.base.hostname+(this.base.port?":"+this.base.port:"");this.base.pathname=a[8];break}if(!this.base)this.base={},this.base.protocol=g.location.protocol,this.base.host=g.location.host,this.base.port=g.location.port,this.base.hostname=g.location.hostname,this.base.pathname=g.location.pathname;d=this.base.pathname.split("?");d=d[0].split("/");d.pop();this.base.directory=d.join("/");return this};h.prototype.resolveUrl=function(a){this.base||this.setBase();
if(e.test(a))return a;var b=this.base,d=a.split("/");if(d.length&&d[0]==="")return b.protocol+"//"+b.host+a;var a=b.directory.split("/"),c;for(c=0;c<d.length;c++)d[c]===".."?a.pop():d[c]!=="."&&a.push(d[c]);return b.protocol+"//"+b.host+a.join("/")};var q=function(a,b){var d=!1;try{a.sheet&&a.sheet.cssRules.length>0?d=!0:a.styleSheet&&a.styleSheet.cssText.length>0?d=!0:a.innerHTML&&a.innerHTML.length>0&&(d=!0)}catch(c){}d?b():setTimeout(function(){q(a,b)},10)};h.prototype.loaders={script:function(a){var d=
this;if(!a.element){var k=b.createElement("script");k.type=a.mime||"text/javascript";k.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;a.element=k;k.src=a.fullUrl;this._head.appendChild(k)}a.element.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState===4)a.loaded||d.resLoadCallback(a,this)};a.element.onload=function(){a.loaded||d.resLoadCallback(a,this)}},css:function(a){var d,k,c,e=b.getElementsByTagName("link");for(d=0,k=e.length;d<k;d++)if(c=e.item(d),
c.getAttribute("rel").toLowerCase()==="stylesheet"&&c.href===a.fullUrl){a.element=c;break}if(!a.element){var f=this;c=b.createElement("link");c.type=a.mime||"text/css";c.setAttribute("rel","stylesheet");c.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;c.href=a.fullUrl;a.element=c;this._head.appendChild(c);q(c,function(){f.resLoadCallback(a,this)})}return!0},ajax:function(a){if(!a.element){var b=this,d=new XMLHttpRequest;a.element=d;d.open("GET",a.fullUrl,!0);d.onreadystatechange=
function(){d.readyState===4&&b.resLoadCallback(a,this)};d.send(null)}},object:function(a){var d,e=this,c;if(!a.element||!a.element.tagName){switch(a.type){case "audio":case "video":d=b.createElement(a.type);d.controls=a.controls||!1;d.loop=a.loop||!1;d.preload=a.preload||!1;d.autobuffer=d.preload;d.doMediaEvents=!0;d.id=a.id||a.categories[0].name+"-"+a.categories[0].resources.length;if(a.sources){if(Object.prototype.toString.call(a.sources)!=="[object Array]")a.sources=[a.sources];for(c=0;c<a.sources.length;c++){var h=
b.createElement("source");h.src=this.resolveUrl(a.sources[c]);d.appendChild(h)}}else d.src=a.fullUrl;d.doMediaEvents=!0;d.load();break;case "image":d=new Image;d.src=a.fullUrl;break;case "html":d=b.createElement("iframe");d.src=a.fullUrl;d.width=0;d.height=0;b.body.appendChild(d);break;default:return f.log("Resource Loader: unknown object type "+a.type),!1}a.element=d;if(!d.doMediaEvents)d.onload=function(c){e.resLoadCallback(a,c)}}else{a.type=a.element.tagName.toLowerCase();if(a.type==="img")a.type=
"image";else if(a.type==="iframe")a.type="html";else if(a.type==="audio"||a.type==="video")a.element.doMediaEvents=!0;else return f.log("Resource Loader: unknown object type "+a.type),!1;d=a.element}d.loaded?e.resLoadCallback(a,event):d.doMediaEvents&&d.addEventListener("canplay",function(c){a.loaded||e.resLoadCallback(a,c)},!0);return!0},font:function(d){var e=this;a.load({url:this.base.protocol+"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",id:"webfont-script",type:"script",mode:"script"},
"webfont");a.addEventListener("webfont",function(){var a,c=d.families.concat([]),h,g,o=!1,s=[],j=b.getElementsByTagName("link");for(a=0,h=j.length;a<h;a++)if(g=j.item(a),g.getAttribute("rel").toLowerCase()==="stylesheet"&&(g=g.href,g===d.fullUrl)){o=!0;break}o||s.push(d.fullUrl);WebFont.load({custom:{families:d.families,urls:s},fontactive:function(o){for(a=0;a<c.length;a++)if(c[a]===o){c.splice(a,1);break}c.length||e.resLoadCallback(d,this)},fontinactive:function(a){f.log("problem loading font:"+
a)},inactive:function(){f.log("WebFonts are inactive!")},active:function(){}})})}};h.prototype.extensionTypes={js:"script",ogg:"audio",mp3:"audio",wav:"audio",ogv:"video",webm:"video",mp4:"video",jpg:"image",jpeg:"image",png:"image",gif:"image",css:"style",xml:"xml",xhtml:"xml",json:"json",txt:"text",html:"html"};h.prototype.load=function(a,b,d){if(Object.prototype.toString.call(a)!=="[object Array]")if(a)a=[a];else return this;this.loadingCount+=1;var c,e,f,o,s,j=[];for(s=0;s<a.length;s++)if(c=a[s]){if(Object.prototype.toString.call(c)===
"[object String]"||typeof c==="string")c={url:c};if(c.url){var p;c.fullUrl===l&&(p=this.resolveUrl(c.url));f="";if((e=this.resources[p])&&(!c.mode||c.mode===e.mode))a[s]=e;else{e&&(f="#"+c.mode);e=c;e.Loaderator=this;this.resources[p+f]=e;e.fullUrl=p;if(!c.type)f=c.fullUrl.split("."),f.length>1&&(f=f.pop().toLowerCase()),c.type=this.extensionTypes[f]||"text";if(!c.mode)switch(c.type){case "script":c.mode="script";break;case "style":case "css":c.mode="css";break;case "audio":case "video":case "image":case "html":c.mode=
"object";break;case "xml":case "json":case "text":c.mode="ajax";break;default:c.mode="ajax"}}}else e=c.loader?c:!1;f=[];b&&f.push(b);var x;if(c.category){o=Object.prototype.toString.call(c.category)==="[object Array]"?c.category:[c.category];for(c=0;c<o.length;c++)x=o[c],f.indexOf(x)<0&&f.push(x)}f.length||f.push(e.fullUrl);if(e&&f.length&&(e.loader||e.mode&&this.loaders[e.mode])){for(c=0;c<f.length;c++){x=f[c];o=this.categories[x]||(this.categories[x]=new h.Category(x,this));if(e.categories===l)e.categories=
[];o.addResource(e)}e.loader||e.fullUrl&&this.loaders[e.mode].call(this,e)&&j.push(e)}}d!==l&&Object.prototype.toString.call(d)==="[object Function]"&&b!==l&&this.addEventListener(b,d);for(this.loadingCount-=1;this.callbackQueue.length;)this.callbackQueue.splice(0,1)[0].checkForAllLoaded();return this};h.prototype.resLoadCallback=function(a,b){a.loaded=!0;a.event=b;var d,c;c=this.eventListeners.length;for(d=0;d<c;d++)this.eventListeners[d].call(this,a);var e=function(a,c,o){return function(){a.call(c,
o)}};c=a.categories.length;var f;for(d=0;d<c;d++){var o;o=a.categories[d].eventListeners.single;if(a.id&&(f=o[a.id])||(f=o[a.url])||(f=o[a.fullUrl]))for(o=0;o<f.length;o++){var s=f[o];s.async?setTimeout(e(s,this,a),0):s.call(this,a)}}for(d=0;d<c;d++)a.categories[d].checkForAllLoaded()};h.prototype.addEventListener=function(a,b,d){if(!b||Object.prototype.toString.call(b)!=="[object Function]")return this;b.runAsync=d||!1;if(a==="*")this.eventListeners.push(b);else{typeof a==="string"&&(a=a.split(":"));
var c=a[0],c=this.categories[c]||(this.categories[c]=new h.Category(c,this)),e=a.length>1?a[1]:!1;if(e){var f,o;if(!(f=c.resourcesById[e]))for(a=c.resources.length-1;a>=0;a--)if(o=c.resources[a],o!==l&&o.fullUrl===e){f=o;break}f&&f.loaded?d?setTimeout(function(){b.call(this,f)},0):b.call(this,f):(c.eventListeners.single[e]||(c.eventListeners.single[e]=[])).push(b)}else c.eventListeners.load.push(b),c.checkForAllLoaded()}return this};var d=function(){var a=g.LDR8R;if(a){var b;for(b=0;b<a.length;b++)a[b]()}};
d.prototype.push=function(a){if(Object.prototype.toString.call(a)==="[object Function]"){var b=Array.prototype.slice.call(arguments,1);a.apply(null,b)}};a=new h;g.LDR8R=new d})(window);(function(g,l){if(l.addEventListener){var h=Array.prototype,a=Object.prototype,b=h.forEach,f=h.slice,e=a.hasOwnProperty,q=a.toString,d=/^(#([\w\-\_\.]+))$/,n=[],r=!1,k=function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(a){g.setTimeout(a,16)}}(),c=function(a,b){return new c.p.init(a,b||null)};c.instances=[];c.instanceIds={};c.removeInstance=function(a){if(c.instances.length)return c.instances.splice(c.instanceIds[a.id],
1),delete c.instanceIds[a.id],c.instances};c.addInstance=function(a){var b=c.instances.length,d=a.media.id&&a.media.id;a.id=!(d in c.instanceIds)&&d||"__popcorn"+b;c.instanceIds[a.id]=b;c.instances.push(a);return c.instances};c.getInstanceById=function(a){return c.instances[c.instanceIds[a]]};c.removeInstanceById=function(a){return c.removeInstance(c.instances[c.instanceIds[a]])};c.p=c.prototype={init:function(a,b){var j;if(typeof a==="function")if(l.readyState==="interactive"||l.readyState==="complete")a(l,
c);else{if(n.push(a),!r){r=!0;var p=function(){l.removeEventListener("DOMContentLoaded",p,!1);for(var a=0,b=n.length;a<b;a++)n[a].call(l,c);n=null};l.addEventListener("DOMContentLoaded",p,!1)}}else{this.media=(j=d.exec(a))&&j.length&&j[2]?l.getElementById(j[2]):a;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;c.addInstance(this);this.options=b||{};this.data={disabled:[],events:{},history:[],trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],
startIndex:0,endIndex:0,previousUpdateTime:-1},loading:[],loadingListener:!1};var e=function(a){if(a.media.readyState>=2){var b=a.media.duration,b=b!=b?Number.MAX_VALUE:b+1;c.addTrackEvent(a,{start:b,end:b});a.media.addEventListener("timeupdate",function(c){a.data.timeupdateEvent=c},!1);var o=function(){var b=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,j=a.data.trackEvents,p=j.byEnd,i=j.byStart,e=j.animating,s=a.data.timeupdateEvent,f=0;if(d<b){for(;p[j.endIndex]&&p[j.endIndex].end<=
b;)if(!p[j.endIndex]._natives||a[p[j.endIndex]._natives.type]){if(p[j.endIndex]._running===!0)p[j.endIndex]._running=!1,p[j.endIndex]._natives.end.call(a,s,p[j.endIndex]);j.endIndex++}else{c.removeTrackEvent(a,p[j.endIndex]._id);return}for(;i[j.startIndex]&&i[j.startIndex].start<=b;)if(!i[j.startIndex]._natives||a[i[j.startIndex]._natives.type]){if(i[j.startIndex].end>b&&i[j.startIndex]._running===!1&&a.data.disabled.indexOf(i[j.startIndex]._natives.type)===-1)i[j.startIndex]._running=!0,i[j.startIndex]._natives.start.call(a,
s,i[j.startIndex]),i[j.startIndex]._natives.frame&&e.push(i[j.startIndex]);j.startIndex++}else{c.removeTrackEvent(a,i[j.startIndex]._id);return}for(;f<e.length;)e[f]._running==!1?e.splice(f,1):(e[f]._natives.frame.call(a,s,e[f],b),f++)}else if(d>b){for(;i[j.startIndex]&&i[j.startIndex].start>b;)if(!i[j.startIndex]._natives||a[i[j.startIndex]._natives.type]){if(i[j.startIndex]._running===!0)i[j.startIndex]._running=!1,i[j.startIndex]._natives.end.call(a,s,i[j.startIndex]);j.startIndex--}else{c.removeTrackEvent(a,
i[j.startIndex]._id);return}for(;p[j.endIndex]&&p[j.endIndex].end>b;)if(!p[j.endIndex]._natives||a[p[j.endIndex]._natives.type]){if(p[j.endIndex].start<=b&&p[j.endIndex]._running===!1&&a.data.disabled.indexOf(i[j.endIndex]._natives.type)===-1)p[j.endIndex]._running=!0,p[j.endIndex]._natives.start.call(a,s,p[j.endIndex]),p[j.endIndex]._natives.frame&&e.push(p[j.endIndex]);j.endIndex--}else{c.removeTrackEvent(a,p[j.endIndex]._id);return}for(;f<e.length;)e[f]._running==!1?e.splice(f,1):(e[f]._natives.frame.call(a,
s,e[f],b),f++)}j.previousUpdateTime=b;k(o)};k(o)}else g.setTimeout(function(){e(a)},1)};e(this);return this}}};c.p.init.prototype=c.p;c.forEach=function(a,c,j){if(!a||!c)return{};j=j||this;if(b&&a.forEach===b)return a.forEach(c,j);for(var d in a)e.call(a,d)&&c.call(j,a[d],d,a);return a};c.extend=function(a){var b=a,j=f.call(arguments,1);c.forEach(j,function(a){for(var c in a)b[c]=a[c]});return b};c.extend(c,{error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+
c.guid.counter)},sizeOf:function(a){var c=0,b;for(b in a)c++;return c},isArray:Array.isArray||function(a){return q.call(a)==="[object Array]"},nop:function(){},position:function(a){var a=a.getBoundingClientRect(),b={},j=l.documentElement,d=l.body,e,f,h;e=j.clientTop||d.clientTop||0;f=j.clientLeft||d.clientLeft||0;h=g.pageYOffset&&j.scrollTop||d.scrollTop;j=g.pageXOffset&&j.scrollLeft||d.scrollLeft;e=Math.ceil(a.top+h-e);f=Math.ceil(a.left+j-f);for(var v in a)b[v]=Math.round(a[v]);return c.extend({},
b,{top:e,left:f})},disable:function(a,c){var b=a.data.disabled;b.indexOf(c)===-1&&b.push(c);return a},enable:function(a,c){var b=a.data.disabled,d=b.indexOf(c);d>-1&&b.splice(d,1);return a}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate mute volume duration paused".split(/\s+/g),function(c){a[c]=function(a){if(typeof this.media[c]==="function")return this.media[c](),this;return a!==!1&&a!==null&&typeof a!=="undefined"?(this.media[c]=a,this):
this.media[c]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return-~this.media.currentTime},exec:function(a,b){c.addTrackEvent(this,{start:a,end:a+1,_running:!1,_natives:{start:b||c.nop,end:c.nop,type:"exec"}});return this},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled.indexOf(a)>-1?"enable":"disable"](this,a)}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload  ",
MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;c.events={isNative:function(a){for(var b=c.Events.Natives.split(/\s+/g),d=0;d<b.length;d++)if(b[d]===a)return!0;return!1},getInterface:function(a){if(!c.events.isNative(a))return!1;
var b=c.Events,d,p;for(p in b)p!=="Natives"&&b[p].indexOf(a)>-1&&(d=p);return d},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){if(this.data.events[a]&&c.sizeOf(this.data.events[a])){var d=c.events.getInterface(a);if(d)return d=l.createEvent(d),d.initEvent(a,!0,!0,g,1),this.media.dispatchEvent(d),this;c.forEach(this.data.events[a],function(a){a.call(this,b)},this)}return this},listen:function(a,b){var d=this,p=!0;this.data.events[a]||(this.data.events[a]={},p=!1);this.data.events[a][b.name||
b.toString()+c.guid()]=b;!p&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(b){c.forEach(d.data.events[a],function(a){typeof a==="function"&&a.call(d,b)})},!1);return this},unlisten:function(a,c){if(this.data.events[a]&&this.data.events[a][c])return delete this.data.events[a][c],this;this.data.events[a]=null;return this}}};c.forEach(["trigger","listen","unlisten"],function(a){c.p[a]=c.events.fn[a]});c.protect={natives:"load play pause currenttime playbackrate mute volume duration removeplugin roundtime trigger listen unlisten".split(/\s+/)};
c.addTrackEvent=function(a,b){if(b._natives)b._id=!b.id?c.guid(b._natives.type):b.id,a.data.history.push(b._id),b._natives.start=b._natives.start||c.nop,b._natives.end=b._natives.end||c.nop;b.start=c.util.toSeconds(b.start,a.options.framerate);b.end=c.util.toSeconds(b.end,a.options.framerate);var d=a.data.trackEvents.byStart,p=a.data.trackEvents.byEnd,e;for(e=d.length-1;e>=0;e--)if(b.start>=d[e].start){d.splice(e+1,0,b);break}for(e=p.length-1;e>=0;e--)if(b.start>=p[e].start){p.splice(e+1,0,b);break}};
c.removePlugin=function(a,b){if(!b){var b=a,a=c.p,d=c.registry.length,e;for(e=0;e<d;e++)if(c.registry[e].name===b){c.registry.splice(e,1);delete c.registryByName[b];delete a[b];return}}d=a.data.trackEvents.byStart;e=a.data.trackEvents.byEnd;var f,h;for(f=0,h=d.length;f<h;f++)d[f]&&d[f]._natives&&d[f]._natives.type===b&&e[f]&&e[f]._natives&&e[f]._natives.type===b&&(d.splice(f,1),e.splice(f,1),f--,h--,a.data.trackEvents.startIndex<=f&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--))};
c.removeTrackEvent=function(a,b){var d=a.data.history.length,e=0,f=[],h=[],g=[];c.forEach(a.data.trackEvents.byStart,function(c,d){c._id||(f.push(a.data.trackEvents.byStart[d]),h.push(a.data.trackEvents.byEnd[d]));c._id&&(c._id!==b&&(f.push(a.data.trackEvents.byStart[d]),h.push(a.data.trackEvents.byEnd[d])),c._id===b&&(e=d,c._natives._teardown&&c._natives._teardown.call(a,c)))});e<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;e<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;
a.data.trackEvents.byStart=f;a.data.trackEvents.byEnd=h;for(var v=0;v<d;v++)a.data.history[v]!==b&&g.push(a.data.history[v]);a.data.history=g};c.getTrackEvents=function(a){var b=[];c.forEach(a.data.trackEvents.byStart,function(a){a._id&&b.push(a)});return b};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,
this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else{var e=["start","end"],f={},h=typeof b==="function";d||(d=b.manifest||{});var g=function(b,f){if(!f)return this;f._natives=b;f._natives.type=a;f._running=!1;f._natives.manifest=d;if(!("start"in f))f.start=0;if(!("end"in f))f.end=this.duration();
if("_setup"in b&&typeof b._setup==="function"){if(!f.target){var h="options"in d&&d.options;f.target=h&&"target"in h&&h.target}b._setup.call(this,f)}c.addTrackEvent(this,f);c.forEach(b,function(a,b){b!=="type"&&e.indexOf(b)===-1&&this.listen(b,a)},this);return this};if(d||"manifest"in b)c.manifest[a]=d||b.manifest;f[a]=function(a){return g.call(this,h?b.call(this,a):b,a)};c.extend(c.p,f);var v={fn:f[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(f,v,{type:a}));c.registryByName[a]=
v;return f}};c.plugin.getDefinition=function(a){var b=c.registryByName;if(b[a])return b[a];c.error("Cannot inherit from "+a+"; Object does not exist")};c.plugin.delegate=function(a,b,c){return function(){var d=arguments;c.forEach(function(c){c[b]&&c[b].apply(a,d)})}};c.plugin.inherit=function(a,b,d,f){function h(a,b){var d=b||c.plugin.getDefinition(a).parents,f;for(f in d)if(e.call(d,f)){var j=d[f];h(j);g.indexOf(j)===-1&&g.push(j)}}var g=[];h(a,c.isArray(b)?b:[b]);g.push(a);f=c.plugin(a,function(a){var b=
this,d;d=g.map(function(d){d=c.plugin.getDefinition(d).base;return d.call&&d.call(b,a)||d});return{_setup:c.plugin.delegate(b,"_setup",d),start:c.plugin.delegate(b,"start",d),end:c.plugin.delegate(b,"end",d)}},f||d.manifest);a=c.plugin.getDefinition(a);a.base=d;a.parents=b;return f};c.inherit=c.plugin.inherit;c.parsers={};c.parser=function(a,b,d){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");else if(typeof b==="function"&&!d&&(d=b,b=""),!(typeof d!==
"function"||typeof b!=="string")){var f={};f[a]=function(a,f){if(!a)return this;var p=this;c.xhr({url:a,dataType:b,success:function(a){var b,c,h=0,a=d(a).data||[];if(b=a.length){for(;h<b;h++){c=a[h];for(var o in c)if(e.call(c,o)&&p[o])p[o](c[o])}f&&f()}}});return this};c.extend(c.p,f);return f}};var t=/\?/,u={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:!0,xhr:function(){return new g.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&
(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else if(a=c.extend({},u,a),a.ajax=a.xhr(),a.ajax){if(a.type==="GET"&&a.data)a.url+=(t.test(a.url)?"&":"?")+a.data,a.data=null;a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}};c.xhr.httpData=function(a){var b,c=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{c=JSON.parse(a.ajax.responseText)}catch(d){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,
json:c};a.dataType&&(b=b[a.dataType]);a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,d){if(d&&l.querySelectorAll('script[src="'+a+'"]').length)b&&b(!0);else{var f=l.head||l.getElementsByTagName("head")[0]||l.documentElement,e=l.createElement("script"),h=a.split("?")[1],g=!1,q=[],k,n;h&&!d&&(q=h.split("&"));q.length&&(n=q[q.length-1].split("="));k=q.length?n[1]?n[1]:n[0]:"jsonp";!h&&!d&&(a+="?callback="+k);k&&!d&&(window[k]&&(k=c.guid(k)),window[k]=function(a){b&&b(a);g=!0},a=a.replace(n.join("="),
n[0]+"="+k));e.onload=e.onreadystatechange=function(){if(!e.readyState||/loaded|complete/.test(e.readyState))d&&b&&b(),g&&(delete window[k],f.removeChild(e))};e.src=a;f.insertBefore(e,f.firstChild)}};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,!0)};c.util={toSeconds:function(a,b){var d=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/;if(typeof a==="number")return a;else typeof a==="string"?d.test(a)||c.error("Invalid time format"):c.error("Invalid time format");
var d=a.split(":"),f=d.length-1,e=d[f];if(e.indexOf(";")>-1){var e=e.split(";"),h=0;b&&typeof b==="number"&&(h=parseFloat(e[1],10)/b);d[f]=parseInt(e[0],10)+h}if(d.length===1)return parseFloat(d[0],10);else if(d.length===2)return parseInt(d[0],10)*60+parseFloat(d[1],10);else if(d.length===3)return parseInt(d[0],10)*3600+parseInt(d[1],10)*60+parseFloat(d[2],10)}};g.Popcorn=c;l.addEventListener("DOMContentLoaded",function(){var a=l.querySelectorAll("[data-timeline-sources]");c.forEach(a,function(b,
d){var f=a[d],e,h,g;if(!f.id)f.id=c.guid("__popcorn");f.nodeType&&f.nodeType===1&&(g=c("#"+f.id),e=(f.getAttribute("data-timeline-sources")||"").split(","),e[0]&&c.forEach(e,function(a){h=a.split("!");h.length===1&&(h=a.split("."),h[0]="parse"+h[h.length-1].toUpperCase(),h[1]=a);if(e[0]&&g[h[0]])g[h[0]](h[1])}),g.autoplay&&g.play())})},!1)}})(window,window.document);(function(g){g&&g.plugin("code",function(g){if(!g.onStart||typeof g.onStart!=="function")throw"Popcorn Code Plugin Error: onStart must be a function.";if(g.onEnd&&typeof g.onEnd!=="function")throw"Popcorn Code Plugin Error: onEnd  must be a function.";if(g.onFrame&&typeof g.onFrame!=="function")throw"Popcorn Code Plugin Error: onFrame  must be a function.";return{start:function(h,a){a.onStart(a)},end:function(h,a){if(a.onEnd)a.onEnd(a)},frame:g.onFrame}},{about:{name:"Popcorn Code Plugin",version:"0.1",
author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame"},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(window.Popcorn);(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0;g.plugin("europeana",function(a){var b,f,e,g,d,n=this,r=!1,k,c,t,u;if(!a||!a.id)return{_setup:function(){}};u=function(a){(a.keyCode||a.which)===27&&t()};k=function(a){if(!l(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);t();return!1}};c=function(a){if(!l(a)){r=n.media.paused;n.pause();f.removeEventListener("click",c,!1);window.addEventListener("click",
k,!0);window.addEventListener("keydown",u,!0);b.classList.add("active");b.style.cssText="";if(e&&16/9*0.4*(void 0).height/(void 0).width>0.8)b.style.width=(void 0).width/(void 0).height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};t=function(a){if(!l(a)){b.classList.remove("active");b.style.width=e;if(g||d)b.style.top=g,b.style.left=d,b.style.position="absolute";f.addEventListener("click",c,!1);window.removeEventListener("keydown",
u,!0);window.removeEventListener("click",k,!0);r||n.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","europeana");b.id="europeana"+h;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";h++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"europeana target container doesn't exist";
if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;f=document.createElement("div");f.style.position="relative";b.appendChild(f);var o=new XMLHttpRequest;o.open("GET","europeana.php?id="+a.id);o.onreadystatechange=function(){var i;function b(a){return{srw:"http://www.loc.gov/zing/srw/",diag:"http://www.loc.gov/zing/srw/diagnostic/",xcql:"http://www.loc.gov/zing/cql/xcql/",mods:"http://www.loc.gov/mods/v3",europeana:"http://www.europeana.eu",enrichment:"http://www.europeana.eu/schemas/ese/enrichment/",
dcterms:"http://purl.org/dc/terms/",dc:"http://purl.org/dc/elements/1.1/",dcx:"http://purl.org/dc/elements/1.1/",tel:"http://krait.kb.nl/coop/tel/handbook/telterms.html",xsi:"http://www.w3.org/2001/XMLSchema-instance"}[a]||null}if(o.readyState===4&&o.status===200){var h,k=o.responseXML;if(k){var l=!k.ownerDocument?k.documentElement:k.ownerDocument.documentElement;h=(h=k.evaluate("//dc:title",l,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null))&&h.singleNodeValue?h.singleNodeValue.firstChild.nodeValue||
"":"";var n=k.evaluate("//dc:description",l,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null),n=n&&n.singleNodeValue?n.singleNodeValue.firstChild.nodeValue||"":"",v=k.evaluate("//dc:source",l,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null);v=v&&v.singleNodeValue?v.singleNodeValue.firstChild.nodeValue||"":(v=k.evaluate("//europeana:provider",l,b,XPathResult.FIRST_ORDERED_NODE_TYPE,null))&&v.singleNodeValue?v.singleNodeValue.firstChild.nodeValue||"":"";v&&(v="/"+v);i=(k=k.evaluate("//europeana:object",l,b,XPathResult.FIRST_ORDERED_NODE_TYPE,
null))&&k.singleNodeValue?k.singleNodeValue.firstChild.nodeValue||"":"",k=i;l=document.createElement("div");l.setAttribute("class","content");var r=document.createElement("article");r.appendChild(document.createTextNode(n));l.appendChild(r);l.appendChild(document.createElement("br"));f.appendChild(l);n=document.createElement("div");n.setAttribute("class","info");h=h.replace("<","&lt;");h=h.replace(">","&gt;");n.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="http://www.europeana.eu/portal/record/'+
a.id+'.html" target="_new">Europeana'+v+'</a></span></div><div><a href="http://www.europeana.eu/portal/record/'+a.id+'.html" target="_new">'+h+'</a></div><div class="watch">view details</div>';n.getElementsByClassName("minimize").item(0).addEventListener("click",t,!1);f.appendChild(n);k?(h=document.createElement("img"),h.src=k,h.onload=function(){a.loaded=!0},l.insertBefore(h,l.firstChild)):a.loaded=!0;e=a.width;g=a.top;d=a.left;f.addEventListener("click",c,!1)}}};o.send(null);var s=a.end-a.start;
if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,s/8);else if(a.fadeIn>s)a.fadeIn=s;s-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>s)a.fadeIn=s;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,f=1;a<c.fadeIn?f=a/c.fadeIn:d>c.end-c.fadeOut&&(f=(c.end-d)/c.fadeOut);
b.style.opacity=f}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",
type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",type:"text",label:"Number of Images"}}})}})(window.Popcorn);(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0;g.plugin("flickr",function(a){var b,f,e,q,d,n,r=a.numberofimages||4,k,c,t,u,o=a.padding||"5px",s=a.border||"0px",j=this,p=!1,x,B,z,v;v=function(a){(a.keyCode||a.which)===27&&z()};x=function(a){if(!l(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);z();return!1}};B=function(a){if(!l(a)){p=j.media.paused;j.pause();f.removeEventListener("click",B,!1);window.addEventListener("click",
x,!0);window.addEventListener("keydown",v,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};z=function(a){if(!l(a)){b.classList.remove("active");b.style.width=c;if(t||u)b.style.top=t,b.style.left=u,b.style.position="absolute";f.addEventListener("click",B,!1);window.removeEventListener("keydown",v,!0);window.removeEventListener("click",x,!0);p||j.play();if(a)a.preventDefault&&
a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","flickr");b.id="flickr"+h;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";h++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"flickr target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=
a.left;f=document.createElement("div");f.style.position="relative";b.appendChild(f);var J=function(){q="http://api.flickr.com/services/feeds/photos_public.gne?";e&&(q+="id="+e+"&");a.tags&&(q+="tags="+a.tags+"&");q+="lang=en-us&format=json&jsoncallback=flickr";g.xhr.getJSONP(q,function(b){f.innerHTML="<p style='padding:"+o+";'>"+b.title+"<p/>";g.forEach(b.items,function(b,e){if(e<r)d=document.createElement("a"),d.setAttribute("href",b.link),d.setAttribute("target","_blank"),n=document.createElement("img"),
n.setAttribute("src",b.media.m),n.setAttribute("height",k),n.setAttribute("width",c),n.setAttribute("style","border:"+s+";padding:"+o),d.appendChild(n),f.appendChild(d),a.loaded=!0;else return!1})})},L=function(){e?setTimeout(function(){L()},5):(q="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",q+="username="+a.username+"&api_key="+a.apikey+"&format=json&jsoncallback=flickr",g.getJSONP(q,function(a){e=a.user.nsid;J()}))},G=function(){if(j.media&&j.media.buffered){var b,
d,e=!1,h,p,l=j.media.buffered;for(b=0,d=l.length;b<d;b++)if(h=l.start(b),p=l.end(b),h>j.media.duration&&(h=0),h<=a.end&&p>=a.start){e=!0;break}if(!e){setTimeout(G,10);return}}q="http://api.flickr.com/services/rest/?method=flickr.photos.getInfo";a.apikey&&(q+="&api_key="+a.apikey);q+="&photo_id="+a.photoid+"&lang=en-us&format=json&jsoncallback=flickr";g.xhr.getJSONP(q,function(b){if(b&&b.stat==="ok"&&b.photo){var b=b.photo,d=document.createElement("img");d.src="http://farm"+b.farm+".static.flickr.com/"+
b.server+"/"+b.id+"_"+b.secret+"_m.jpg";d.style.width="100%";var e=a.url;e||(e=b.urls&&b.urls.url&&b.urls.url[0]&&b.urls.url[0]._content?b.urls.url[0]._content:"http://www.flickr.com/photos/"+b.owner.nsid+"/"+b.id+"/");f.appendChild(d);var i=document.createElement("div");i.setAttribute("class","info");i.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>photo<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
e+'" target="_new">Flickr</a></span></div><div><a href="'+e+'" target="_new">'+b.title._content+'</a></div><div class="watch">view photo</div>';i.getElementsByClassName("minimize").item(0).addEventListener("click",z,!1);f.appendChild(i);c=a.width;t=a.top;u=a.left;d.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)b=c[3]||"",c=parseFloat(c[1]),c=c*d.height/d.width,f.style.height=k=c+b;a.loaded=!0},!1);f.addEventListener("click",
B,!1)}})};if(a.url&&!a.photoid){var C=/^((https?:\/\/)?(www\.)?flickr\.com\/photos\/[^\/]+\/)?(\d+)/.exec(a.url);if(C&&C.length>=5)a.photoid=C[4]}a.photoid?G():a.username&&a.apikey?L():(e=a.userid,J());C=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,C/8);else if(a.fadeIn>C)a.fadeIn=C;C-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>C)a.fadeIn=C;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display=
"none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},userid:{elem:"input",type:"text",label:"UserID"},
tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username"},apikey:{elem:"input",type:"text",label:"Api_key"},target:"flickr-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},padding:{elem:"input",type:"text",label:"Padding"},border:{elem:"input",type:"text",label:"Border"},numberofimages:{elem:"input",type:"text",label:"Number of Images"}}})}})(window.Popcorn);var googleCallback;
(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0,a=0,b=!1,f=!1,e,q;googleCallback=function(a){typeof window.google!=="undefined"&&window.google.maps&&window.google.maps.Geocoder&&window.google.maps.LatLng?(e=new window.google.maps.Geocoder,f=!0):setTimeout(function(){googleCallback(a)},1)};q=function(){document.body?(b=!0,g.getScript("http://maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){q()},1)};
g.plugin("googlemap",function(d){var g,r,k,c,t=!1,u=this,o,s=!1,j,p,x,B,z,v,J;b||q();d.map=null;B=function(a){(a.keyCode||a.which)===27&&x()};j=function(a){if(l(a))return!0;var b=a.target;do if(b===k)return!0;while(b=b.parentNode);console.log("otherwindows",a);x();return!1};p=function(a){if(l(a))return!0;s=u.media.paused;u.pause();t||o();if(d.map)d.map.getDiv().style.display="block";c.removeEventListener("click",p,!1);window.addEventListener("click",j,!0);window.addEventListener("keydown",B,!0);k.classList.add("active");
k.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};x=function(a){if(l(a))return!0;if(d.map)d.map.getDiv().style.display="none";k.classList.remove("active");k.style.width=z;if(v||J)k.style.top=v,k.style.left=J,k.style.position="absolute";c.addEventListener("click",p,!1);window.removeEventListener("keydown",B,!0);window.removeEventListener("click",j,!0);s||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1};d.loaded=!1;k=document.createElement("div");k.setAttribute("class","googlemap");k.id="googlemap"+h;if(d.width)k.style.width=d.width;if(d.height)k.style.height=d.height;k.style.display="none";h++;if(document.getElementById(d.target))document.getElementById(d.target).appendChild(k);else throw"googlemap target container doesn't exist";if(d.top||d.left)k.style.position="absolute",k.style.top=d.top,k.style.left=d.left;
c=document.createElement("div");c.style.position="relative";k.appendChild(c);var L=function(){if(u.media&&u.media.buffered){var a,b,e=!1,f,h,j=u.media.buffered;for(a=0,b=j.length;a<b;a++)if(f=j.start(a),h=j.end(a),f>u.media.duration&&(f=0),f<=d.end&&h>=d.start){e=!0;break}if(!e){setTimeout(L,10);return}}a="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=320x320&maptype=roadmap&"+[["center",d.center||d.location],["markers",d.location],["visible",d.location+"|"+d.center]].map(function(a){return a[0]+
"="+encodeURIComponent(a[1])}).join("&");var k=document.createElement("img");k.src=a;k.style.width="100%";c.appendChild(k);c.appendChild(g);b=document.createElement("div");b.setAttribute("class","info");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>map<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a+'" target="_new">Google Maps</a></span></div><div><a href="'+a+'" target="_new">'+d.location+
'</a></div><div class="watch">view map</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",x,!1);c.appendChild(b);z=d.width;v=d.top;J=d.left;k.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b;if(d.width&&!d.height&&(b=a.exec(d.width))&&b.length>1)a=b[3]||"",b=parseFloat(b[1]),b=b*k.height/k.width,c.style.height=b+a;d.loaded=!0},!1);c.addEventListener("click",p,!1)};L();var G=d.end-d.start;if(isNaN(d.fadeIn))d.fadeIn=Math.min(0.25,G/8);else if(d.fadeIn>
G)d.fadeIn=G;G-=d.fadeIn;if(isNaN(d.fadeOut))d.fadeOut=Math.min(0.25,(d.end-d.start)/8);else if(d.fadeOut>G)d.fadeIn=G;if(!d.type)d.type="ROADMAP";g=document.createElement("div");g.id="actualmap"+a;g.style.width="100%";g.style.height="100%";g.style.top=0;g.style.left=0;g.style.position="absolute";a++;o=function(){f?d.location?(t=!0,e.geocode({address:d.location},function(a,b){b===google.maps.GeocoderStatus.OK?(d.lat=a[0].geometry.location.lat(),d.lng=a[0].geometry.location.lng(),r=new google.maps.LatLng(d.lat,
d.lng),d.debug="now i have my map",d.map=new google.maps.Map(g,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:r,map:d.map,title:d.location})):console.log("cannot get google maps data",b)})):(r=new google.maps.LatLng(d.lat,d.lng),d.debug="now i have my damn map",d.map=new google.maps.Map(g,{mapTypeId:google.maps.MapTypeId[d.type]||google.maps.MapTypeId.HYBRID,draggable:!0}),new google.maps.Marker({position:r,map:d.map,title:d.location})):
setTimeout(function(){o()},5)};return{start:function(a,b){var c=function(){if(!(u.media.currentTime>=b.end||u.media.currentTime<b.start))b.loaded?k.style.display="":setTimeout(c,1)};c();var d=this,e=function(){if(b.map){b.map.getDiv().style.display="block";google.maps.event.trigger(b.map,"resize");b.map.setCenter(r);if(b.zoom&&typeof b.zoom!=="number")b.zoom=+b.zoom;b.zoom=b.zoom||8;b.map.setZoom(b.zoom);if(b.heading&&typeof b.heading!=="number")b.heading=+b.heading;if(b.pitch&&typeof b.pitch!=="number")b.pitch=
+b.pitch}else d.media.currentTime>=b.start&&d.media.currentTime<=b.end&&setTimeout(function(){e()},13)};e()},end:function(a,b){k.style.display="none";if(b.map)b.map.getDiv().style.display="none"},_teardown:function(a){document.getElementById(a.target).removeChild(k);k=c=g=a.map=r=null},frame:function(a,b,c){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);k.style.opacity=d}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},
options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN"],label:"Type"},zoom:{elem:"input",type:"text",label:"Zoom"},lat:{elem:"input",type:"text",label:"Lat"},lng:{elem:"input",type:"text",label:"Lng"},location:{elem:"input",type:"text",label:"Location"},heading:{elem:"input",type:"text",label:"Heading"},pitch:{elem:"input",type:"text",label:"Pitch"}}})}})(window.Popcorn);(function(g){g&&g.plugin("html",{manifest:{about:{name:"Popcorn html Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"html-container",html:{elem:"input",type:"text",label:"Text"},fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(g){g.container=g.target&&g.target!=="html-container"?document.getElementById(g.target):
this.container;var h=g.end-g.start;if(isNaN(g.fadeIn))g.fadeIn=0;else if(g.fadeIn>h)g.fadeIn=h;h-=g.fadeIn;if(isNaN(g.fadeOut))g.fadeOut=0;else if(g.fadeOut>h)g.fadeIn=h;g.div=document.createElement("div");g.className&&g.div.setAttribute("class",g.className);g.div.style.display="none";g.div.innerHTML=g.html;g.container.appendChild(g.div)},start:function(g,h){h.div.style.display=""},end:function(g,h){h.div.style.display="none"},frame:function(g,h,a){var g=a-h.start,b=1;g<h.fadeIn?b=g/h.fadeIn:a>h.end-
h.fadeOut&&(b=(h.end-a)/h.fadeOut);h.div.style.opacity=b}})})(window.Popcorn);(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0;g.plugin("image",function(a){var b,f,e,g,d,n,r=this,k=!1,c,t,u,o;if(a.url){o=function(a){(a.keyCode||a.which)===27&&u()};c=function(a){if(!l(a)){var c=a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);u();return!1}};t=function(a){if(!l(a)){k=r.media.paused;r.pause();f.removeEventListener("click",t,!1);window.addEventListener("click",c,!0);window.addEventListener("keydown",
o,!0);b.classList.add("active");b.style.cssText="";if(g&&16/9*0.4*e.height/e.width>0.8)b.style.width=e.width/e.height*7.2/16*100+"%";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};u=function(a){if(!l(a)){b.classList.remove("active");b.style.width=g;if(d||n)b.style.top=d,b.style.left=n,b.style.position="absolute";e.style.width="100%";f.addEventListener("click",t,!1);window.removeEventListener("keydown",o,!0);window.removeEventListener("click",
c,!0);k||r.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","image");b.id="image"+h;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";h++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);else throw"image target container doesn't exist";if(a.top||a.left)b.style.position=
"absolute",b.style.top=a.top,b.style.left=a.left;f=document.createElement("div");f.style.position="relative";b.appendChild(f);var s=function(){if(r.media&&r.media.buffered){var b,c,h=!1,j,k,l=r.media.buffered;for(b=0,c=l.length;b<c;b++)if(j=l.start(b),k=l.end(b),j>r.media.duration&&(j=0),j<=a.end&&k>=a.start){h=!0;break}if(!h){setTimeout(s,10);return}}e=document.createElement("img");e.src=a.url;e.style.width="100%";f.appendChild(e);b=document.createElement("div");b.setAttribute("class","info");c=
a.source||"Image";h=a.title;a.link&&(h='<a href="'+a.link+'" target="_new">'+h+"</a>",c='<a href="'+a.link+'" target="_new">'+c+"</a>");b.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>image<span class="hiding"> | <span class="popcorn-source">source</span>: '+c+"</span></div><div>"+h+'</div><div class="watch">view image</div>';b.getElementsByClassName("minimize").item(0).addEventListener("click",u,!1);f.appendChild(b);g=
a.width;d=a.top;n=a.left;e.addEventListener("load",function(){var b=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,c;if(a.width&&!a.height&&(c=b.exec(a.width))&&c.length>1)b=c[3]||"",c=parseFloat(c[1]),c=c*e.height/e.width,f.style.height=c+b;a.loaded=!0},!1);f.addEventListener("click",t,!1)};s();var j=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,j/8);else if(a.fadeIn>j)a.fadeIn=j;j-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>j)a.fadeIn=j;return{start:function(a,
c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}}},{about:{name:"Popcorn Image Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",
label:"Out"},target:"image-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"}}})}})(window.Popcorn);(function(g){if(g){var l=0,h=function(a){var f=a.container=document.createElement("div"),e=f.style,q=a.media;h=g.nop;var d=function(){var h=a.position();e.fontSize="18px";e.width=q.offsetWidth+"px";e.top=h.top+q.offsetHeight-f.offsetHeight-40+"px";e.left=h.left+"px";setTimeout(d,10)};f.id="subtitlediv";e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";d();document.body.appendChild(f)},a=function(a){if(a.languagesrc){if(typeof a.languagesrc===
"function")return a.languagesrc();if(a.languagesrc.tagName==="SELECT")return a.languagesrc.options[a.languagesrc.selectedIndex].value;if(a.languagesrc.value!==void 0)return a.languagesrc.value}};g.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"},
fadeIn:{elem:"input",type:"text",label:"Text"},fadeOut:{elem:"input",type:"text",label:"Text"}}},_setup:function(b){var f=document.createElement("div"),e=document.getElementById(b.accessibilitysrc);f.id="subtitle-"+l;if(b.cssText)f.style.cssText=b.cssText;f.style.display="none";f.setAttribute("lang",b.language);l++;(!this.container&&!b.target||b.target==="subtitle-container")&&h(this);b.container=b.target&&b.target!=="subtitle-container"?document.getElementById(b.target):this.container;document.getElementById(b.container.id).appendChild(f);
b.innerContainer=f;b.showSubtitle=function(){b.innerContainer.innerHTML=b.text};b.toggleSubtitles=function(){};if(b.languagesrc){var g;if(typeof b.languagesrc==="string"&&(g=document.getElementById(b.languagesrc)))b.languagesrc=g;b.selectedLanguage=a(b);if(!this.languageSources)this.languageSources={};this.languageSources[b.languagesrc]||(this.languageSources[b.languagesrc]={});if(!this.languageSources[b.languagesrc][b.target]){this.languageSources[b.languagesrc][b.target]=!0;var d=this;this.updateSubtitleLanguage=
function(){b.toggleSubtitles();a(b);var e=d.currentTime(),f,h;for(f=d.data.trackEvents.startIndex-1,h=d.data.trackEvents.byStart;f>=0;f--){var c=h[f];if(c._natives.type!=="subtitle"||c.end<e)break;c.innerContainer.style.display=c.language===a(c)?"":"none";c.showSubtitle(c,c.text)}};b.languagesrc.addEventListener&&b.languagesrc.addEventListener("change",this.updateSubtitleLanguage,!1)}}if(e)b.accessibility=e,b.toggleSubtitles=function(){b.selectedLanguage=a(b);if(b.accessibility.checked||b.selectedLanguage!==
(b.language||""))b.display="",b.container.style.display=b.display;else if(b.selectedLanguage===(b.language||""))b.display="none",b.container.style.display=b.display},b.accessibility.addEventListener("change",b.toggleSubtitles,!1),b.toggleSubtitles();f=b.end-b.start;if(isNaN(b.fadeIn))b.fadeIn=Math.min(0.25,f/8);else if(b.fadeIn>f)b.fadeIn=f;f-=b.fadeIn;if(isNaN(b.fadeOut))b.fadeOut=Math.min(0.25,(b.end-b.start)/8);else if(b.fadeOut>f)b.fadeIn=f},start:function(b,f){if(f.language===a(f))f.innerContainer.style.display=
"",f.showSubtitle(f,f.text)},end:function(a,f){f.innerContainer.style.display="none";f.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)},frame:function(a,f,e){var a=e-f.start,h=1;a<f.fadeIn?h=a/f.fadeIn:e>f.end-f.fadeOut&&(h=(f.end-e)/f.fadeOut);f.innerContainer.style.opacity=h}})}})(window.Popcorn);(function(g){if(g){var l=0;g.plugin("videoComment",function(h){function a(a){return a<10?"0"+a:a}if(!h.text)return!1;var b,f,e=this;b=document.createElement("div");b.setAttribute("class","video-comment");b.id="video-comment"+l;b.style.display="none";b.setAttribute("lang",h.language);l++;if(document.getElementById(h.target))document.getElementById(h.target).appendChild(b);else throw"comment target container doesn't exist";var g,d=new Date(h.date);g=a(d.getMonth()+1)+"."+a(d.getDate());d.getFullYear()!==
(new Date).getFullYear()&&(g+="."+a(d.getFullYear()));var n=document.createElement("time");n.setAttribute("datetime",d.getUTCFullYear()+"-"+a(d.getUTCMonth()+1)+"-"+a(d.getUTCDate())+"T"+a(d.getUTCHours())+":"+a(d.getUTCMinutes())+":"+a(d.getUTCSeconds())+"Z");n.innerHTML=g;b.appendChild(n);g=document.createElement("span");g.setAttribute("class","author");g.appendChild(document.createTextNode(h.author||"Anonymous"));b.appendChild(g);g=document.createElement("p");var d=/https?:\/\/([a-zA-Z0-9\.]+\.[a-zA-Z]{2,6}[^\s\n\r\t$]*)/gi,
r;for(r=0;n=d.exec(h.text);)g.appendChild(document.createTextNode(h.text.substr(r,n.index-r))),r=document.createElement("a"),r.setAttribute("href",n[0]),r.setAttribute("target","_new"),n[1].length>20?r.appendChild(document.createTextNode(n[1].substr(0,17)+"...")):r.appendChild(document.createTextNode(n[1])),r.addEventListener("click",function(){f=!1;e.pause()},!0),g.appendChild(r),r=n.index+n[0].length;r<h.text.length&&g.appendChild(document.createTextNode(h.text.substr(r)));b.appendChild(g);g=document.createElement("div");
g.setAttribute("class","flag");g.appendChild(document.createTextNode("Flag this as inappropriate"));g.addEventListener("click",function(){var a=b.getAttribute("class"),a=a.split(" ");a.indexOf("flagged")<0&&(a.push("flagged"),b.setAttribute("class",a.join(" ")));h.flagCallback&&h.flagCallback(h.id)},!1);b.appendChild(g);g=document.createElement("div");g.setAttribute("class","unflag");g.appendChild(document.createTextNode("unflag this comment"));g.addEventListener("click",function(){var a,c=b.getAttribute("class"),
c=c.split(" ");a=c.indexOf("flagged");a>=0&&(c.splice(a,1),b.setAttribute("class",c.join(" ")));h.flagCallback&&h.flagCallback(h.id,!0)},!1);b.appendChild(g);b.addEventListener("mouseover",function(){var a=setTimeout(function(){f=!e.media.paused;e.media.pause()},500);b.onmouseout=function(){clearTimeout(a);f&&e.media.play()}},!1);return{start:function(){b.style.display=""},end:function(){b.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(b)},
frame:function(a,c,d){var a=d-c.start,e=1,f=0;a<0.5?f=-207*(1-a/0.5)+"px":d>c.end-0.5&&(e=(c.end-d)/0.5);b.style.marginRight=f;b.style.opacity=e}}},{about:{name:"Popcorn Video Comments Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"}}})}})(window.Popcorn);(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0;g.plugin("wikipedia",function(a){var b,f,e,q,d,n,r,k=this,c=!1,t,u,o,s;if(a&&(a.url||a.id)){if(a.id)e=a.id,q=window.language||a.language||"en",a.url="http://en.wikipedia.org/wiki/"+e;else if(e=/(https?:\/\/)?((en)\.)?wikipedia\.org\/wiki\/(.*)\/?/.exec(a.url),q=window.language||a.language||e[3]||"en",e=e[4],!e)return;s=function(a){(a.keyCode||a.which)===27&&o()};t=function(a){if(!l(a)){var c=
a.target;do if(c===b)return!0;while(c=c.parentNode);console.log(a);o();return!1}};u=function(a){if(!l(a)){c=k.media.paused;k.pause();f.removeEventListener("click",u,!1);window.addEventListener("click",t,!0);window.addEventListener("keydown",s,!0);b.classList.add("active");b.style.cssText="";if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};o=function(a){if(!l(a)){b.classList.remove("active");b.style.width=d;if(n||r)b.style.top=
n,b.style.left=r,b.style.position="absolute";f.addEventListener("click",u,!1);window.removeEventListener("keydown",s,!0);window.removeEventListener("click",t,!0);c||k.play();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};a.loaded=!1;b=document.createElement("div");b.setAttribute("class","wikipedia");b.id="wikipedia"+h;if(a.width)b.style.width=a.width;if(a.height)b.style.height=a.height;b.style.display="none";h++;if(document.getElementById(a.target))document.getElementById(a.target).appendChild(b);
else throw"wikipedia target container doesn't exist";if(a.top||a.left)b.style.position="absolute",b.style.top=a.top,b.style.left=a.left;f=document.createElement("div");f.style.position="relative";b.appendChild(f);g.xhr.getJSONP("http://"+q+".wikipedia.org/w/api.php?action=parse&props=text&page="+e+"&format=json&callback=wikipedia",function(b){if(b&&b.parse){var c=b.parse.text["*"],c=c.substr(c.indexOf("<p>")+3),c=c.substr(0,c.indexOf("</p>")),c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,
""),e=[],h,k,l,s,e=e.concat(b.parse.images);for(s=0;s<e.length;s++)if(l=e[s].substr(-4).toLowerCase(),l===".jpg"){k=e[s];break}else l===".png"&&(h=e[s]);k||(k=h);var t=document.createElement("div");t.setAttribute("class","content");h=document.createElement("article");h.appendChild(document.createTextNode(c));t.appendChild(h);t.appendChild(document.createElement("br"));f.appendChild(t);c=document.createElement("div");c.setAttribute("class","info");b=b.parse.displaytitle;b=b.replace("<","&lt;");b=b.replace(">",
"&gt;");c.innerHTML='<div class="media"><span class="hiding minimize" style="float: right; margin-right: 20px;">minimize window</span>wiki<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+a.url+'" target="_new">wikipedia</a></span></div><div><a href="'+a.url+'" target="_new">'+b+'</a></div><div class="watch">read article</div>';c.getElementsByClassName("minimize").item(0).addEventListener("click",o,!1);f.appendChild(c);d=a.width;n=a.top;r=a.left;f.addEventListener("click",
u,!1);k?(k="http://"+q+".wikipedia.org/w/api.php?action=query&prop=imageinfo&titles=File:"+k+"&iiprop=url|size&iiurlwidth=200&iiurlheight=200&format=json&callback=wikipediaImage",g.xhr.getJSONP(k,function(b){var c;b.query.pages&&b.query.pages[0]&&(c=b.query.pages[0].imageinfo[0]);if(c)b=document.createElement("img"),b.src=c.thumburl||c.url,b.onload=function(){a.loaded=!0},t.insertBefore(b,t.firstChild)})):a.loaded=!0}});e=a.end-a.start;if(isNaN(a.fadeIn))a.fadeIn=Math.min(0.25,e/8);else if(a.fadeIn>
e)a.fadeIn=e;e-=a.fadeIn;if(isNaN(a.fadeOut))a.fadeOut=Math.min(0.25,(a.end-a.start)/8);else if(a.fadeOut>e)a.fadeIn=e;return{start:function(a,c){var d=function(){c.loaded?b.style.display="":setTimeout(d,1)};d()},end:function(){b.style.display="none"},_teardown:function(a){(a=document.getElementById(a.target))&&a.removeChild(b)},frame:function(a,c,d){var a=d-c.start,e=1;a<c.fadeIn?e=a/c.fadeIn:d>c.end-c.fadeOut&&(e=(c.end-d)/c.fadeOut);b.style.opacity=e}}}},{about:{name:"Popcorn Wikipedia Plugin",
version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},url:{elem:"input",type:"text",label:"url"},target:"wikipedia-container"}})}})(window.Popcorn);(function(g){function l(a){if(!a)return!1;if(a.which)return a.which===3;if(a.button)return a.button===2}if(g){var h=0,a=!1,b=!1,f=function(){if(document.body){a=!0;var e=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){b=!0;e&&e()};g.getScript("http://www.youtube.com/player_api")}else setTimeout(function(){f()},1)};g.plugin("youtube",function(e){var q,d,n,r,k,c,t,u=this,o=!1,s,j,p,x;a||f();x=function(a){var b=a.keyCode||a.which;if(b===27)p();else{if(b===32)t&&t.pauseVideo&&
(t.getPlayerState()===1?t.pauseVideo():t.getPlayerState()===2&&t.playVideo()),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};s=function(a){if(!l(a)){var b=a.target;do if(b===q)return!0;while(b=b.parentNode);console.log(a);p();return!1}};j=function(a){if(!l(a)){o=u.media.paused;u.pause();d.removeEventListener("click",j,!1);window.addEventListener("click",s,!0);window.addEventListener("keydown",x,!0);q.classList.add("active");
q.style.cssText="";t&&t.playVideo&&t.playVideo();if(a)a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};p=function(a){if(!l(a)){t&&t.pauseVideo&&t.pauseVideo();q.classList.remove("active");q.style.width=n;if(r||k)q.style.top=r,q.style.left=k,q.style.position="absolute";d.addEventListener("click",j,!1);window.removeEventListener("keydown",x,!0);window.removeEventListener("click",s,!0);o||u.play();if(a)a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0;return!1}};e.loaded=!1;q=document.createElement("div");q.setAttribute("class","youtube");q.id="youtube"+h;if(e.width)q.style.width=e.width;if(e.height)q.style.height=e.height;q.style.display="none";h++;if(document.getElementById(e.target))document.getElementById(e.target).appendChild(q);else throw"youtube target container doesn't exist";if(e.top||e.left)q.style.position="absolute",q.style.top=e.top,q.style.left=e.left;d=document.createElement("div");
d.style.position="relative";q.appendChild(d);var B=function(){if(u.media&&u.media.buffered){var a,f,h=!1,l,o,i=u.media.buffered;for(a=0,f=i.length;a<f;a++)if(l=i.start(a),o=i.end(a),l>u.media.duration&&(l=0),l<=e.end&&o>=e.start){h=!0;break}if(!h){setTimeout(B,10);return}}c="http://gdata.youtube.com/feeds/api/videos/"+e.videoid+"?v=2&alt=jsonc&callback=youtube";g.xhr.getJSONP(c,function(a){if(a&&a.data){var c=a.data;(a=e.url)||(a="http://www.youtube.com/watch?v="+c.id);var f=document.createElement("img");
f.src=c.thumbnail.hqDefault;f.style.width="100%";d.appendChild(f);var g=document.createElement("div");g.id="ytplayer-"+c.id;g.setAttribute("class","player");d.appendChild(g);var h=function(){b?t=new window.YT.Player("ytplayer-"+c.id,{height:320,width:240,videoId:c.id,playerVars:{origin:document.location.protocol+"//"+document.location.hostname},events:{onReady:function(){}}}):setTimeout(h,1)},g=document.createElement("div");g.setAttribute("class","info");g.innerHTML='<div class="media">video<span class="hiding"> | <span class="popcorn-source">source</span>: <a href="'+
a+'" target="_new">YouTube</a></span></div><div><a href="'+a+'" target="_new">'+c.title+'</a></div><div class="watch">watch video</div>';d.appendChild(g);a=document.createElement("span");a.innerHTML="minimize window";a.setAttribute("class","minimize");a.addEventListener("click",p,!1);d.appendChild(a);h();n=e.width;r=e.top;k=e.left;f.addEventListener("load",function(){var a=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/,b;if(e.width&&!e.height&&(b=a.exec(e.width))&&b.length>1)a=b[3]||"",b=parseFloat(b[1]),b=
b*f.height/f.width,d.style.height=b+a;e.loaded=!0},!1);d.addEventListener("click",j,!1)}})};if(e.url&&!e.videoid){var z=/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]*)/i.exec(e.url);if(z&&z.length>=5)e.videoid=z[4]}e.videoid&&B();z=e.end-e.start;if(isNaN(e.fadeIn))e.fadeIn=Math.min(0.25,z/8);else if(e.fadeIn>z)e.fadeIn=z;z-=e.fadeIn;if(isNaN(e.fadeOut))e.fadeOut=Math.min(0.25,(e.end-e.start)/8);else if(e.fadeOut>z)e.fadeIn=z;return{start:function(a,b){var c=function(){b.loaded?
q.style.display="":setTimeout(c,1)};c()},end:function(){q.style.display="none";p()},_teardown:function(a){p();(a=document.getElementById(a.target))&&a.removeChild(q)},frame:function(a,b,c){if(b.loaded){var a=c-b.start,d=1;a<b.fadeIn?d=a/b.fadeIn:c>b.end-b.fadeOut&&(d=(b.end-c)/b.fadeOut);q.style.opacity=d}}}},{about:{name:"Popcorn YouTube Plugin",version:"0.1",author:"Brian Chirls",website:"http://chirls.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",
label:"Out"},target:"youtube-container",height:{elem:"input",type:"text",label:"Height"},width:{elem:"input",type:"text",label:"Width"},top:{elem:"input",type:"text",label:"Top"},left:{elem:"input",type:"text",label:"Left"}}})}})(window.Popcorn);(function(g){if(g){var l={start:function(){},end:function(){}};g.plugin("words",function(g){var a,b,f,e,q,d;if(!g)return l;if(!g.target||!g.text)return l;a=this.media;b=g.target;if(typeof b==="string"&&(b=document.getElementById(b),!b))return l;f=document.createElement("div");f.style.cssText=g.style||"";if((d=g.top)||d===0)isNaN(d)||(d+="px"),f.style.top=d,f.style.position="absolute";if((d=g.left)||d===0)isNaN(d)||(d+="px"),f.style.left=d,f.style.position="absolute";if((d=g.right)||d===0)isNaN(d)||
(d+="px"),f.style.right=d,f.style.position="absolute";if((d=g.bottom)||d===0)isNaN(d)||(d+="px"),f.style.bottom=d,f.style.position="absolute";if(g.align)f.style.textAlign=g.align;f.style.display="none";g.classes?g.classes.length&&g.classes.join?f.setAttribute("class","popcorn-words "+g.classes.join(" ")):f.setAttribute("class","popcorn-words "+g.classes.split(/,\s\n\r/).join(" ")):f.setAttribute("class","popcorn-words");g.link?(e=document.createElement("a"),e.setAttribute("href",g.link),g.linkTarget&&
e.setAttribute("target",g.linkTarget),e.addEventListener("click",function(){a.pause()},!1),f.appendChild(e)):e=f;q=g.text.split(/[\n\r]/);for(d=0;d<q.length;d++)d&&e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode(q[d]));b.appendChild(f);g.container=f;(function(){var a,b,d=["onLoad","onStart","onFrame","onEnd"];for(a=0;a<d.length;a++)b=d[a],g[b]&&typeof g[b]==="string"&&window[g[b]]&&typeof window[g[b]]==="function"&&(g[b]=window[g[b]])})();if(typeof g.onLoad==="function")g.onLoad(g);
return{start:function(a,b){f.style.display="";if(typeof b.onStart==="function")try{b.onStart(b)}catch(d){}},frame:function(a,b,d){if(typeof b.onFrame==="function")try{b.onFrame(b,d)}catch(c){}},end:function(a,b){f.style.display="none";if(typeof b.onEnd==="function")try{b.onEnd(b)}catch(d){}},_teardown:function(a){f.parentNode&&(f.parentNode.removeChild(f),f=null,delete a.container)}}},{about:{name:"Popcorn Words Plugin",version:0.1,author:"Brian Chirls",website:"http://chirls.com"},options:{start:{elem:"input",
type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},text:{elem:"input",type:"text",label:"Text"},link:{elem:"input",type:"text",label:"Link (URL)"},classes:{elem:"input",type:"text",label:"List of classes to apply to text container"},style:{elem:"input",type:"text",label:"CSS to apply to text"},align:{elem:"select",label:"CSS to apply to text"},top:{elem:"input",type:"number",label:"Top position"},left:{elem:"input",type:"number",label:"Left position"},bottom:{elem:"input",type:"number",
label:"Bottom position"},right:{elem:"input",type:"number",label:"Right position"}}})}})(window.Popcorn);(function(g){function l(a){var a=Math.floor(a),b=a%60,a=(a-b)/60;b<10&&(b="0"+b);if(a>59){var c=Math.floor(a/60);a%=60;a<10&&(a="0"+a);return c+":"+a+":"+b}return a+":"+b}function h(a,b,c,d){var e,f,g=[],h=[],j,k,l=Date.now(),m,n;typeof a==="string"&&(a=i.getElementById(a));if(a)if(Modernizr.cssanimations){a.style.MozTransitionProperty="";a.style.webkitTransitionProperty="";a.style.oTransitionProperty="";a.style.transitionProperty="";for(e in b){f=b[e];g.push(e);if(f.from!==void 0)a.style[e]=f.from;
h.push(f.to)}j=g.join(",");setTimeout(function(){a.style.MozTransitionProperty=j;a.style.webkitTransitionProperty=j;a.style.oTransitionProperty=j;a.style.transitionProperty=j;a.style.MozTransitionDuration=c+"s";a.style.webkitTransitionDuration=c+"s";a.style.oTransitionDuration=c+"s";a.style.transitionDuration=c+"s";d&&(m=function(){d();a.removeEventListener("transitionend",m,!0);a.removeEventListener("webkitTransitionEnd",m,!0);a.removeEventListener("oTransitionEnd",m,!0)},a.addEventListener("transitionend",
m,!0),a.addEventListener("webkitTransitionEnd",m,!0),a.addEventListener("oTransitionEnd",m,!0));for(e=0;e<g.length;e++)a.style[g[e]]=h[e]},0)}else{k=/(\d*(\.\d*)?)\s*(px|em|\%|em|rem)?/;for(e in b)if(f=b[e],(j=k.exec(f.from))&&j.length>1&&j[1])g.push({prop:e,from:parseFloat(j[1]),to:parseFloat(f.to),unit:j[3]}),a.style[e]=f.from;n=function(){var b=(Date.now()-l)/1E3,e=Math.min(b/c,1),f,h,i;for(f=0,h=g.length;f<h;f++)i=g[f],a.style[i.prop]=i.from+e*(i.to-i.from)+(i.unit||"");b<c?na(n,a):d&&d()};n()}}
function a(a,b,c,d){a.onmousedown=function(a){if(b)if(b(a||g.event)&&a.preventDefault)a.preventDefault();else return;if(c)i.onmousemove=function(a){c(a||g.event)};i.onmouseup=function(a){d&&d(a||g.event);i.onmousemove=null;i.onmouseup=null}};a.ontouchstart=function(e){e.preventDefault&&e.preventDefault();a.onmousedown=null;b&&b(e.touches[0]||g.event);if(c)i.ontouchmove=function(a){c(a.touches[0]||g.event);return!1};i.ontouchend=function(){d&&d();i.ontouchmove=null;i.ontouchend=null}}}function b(a){var b,
c;if(a)if(a.pageX!==void 0||a.pageY!==void 0)b=a.pageX,c=a.pageY;else if(a.clientX!==void 0||a.clientY!==void 0)b=a.clientX+i.body.scrollLeft+i.documentElement.scrollLeft,c=a.clientY+i.body.scrollTop+i.documentElement.scrollTop;return{x:b,y:c}}function f(a,b){var c=b;a.x-=b.clientLeft+b.offsetLeft;for(a.y-=b.clientTop+b.offsetTop;(c=c.offsetParent)&&c.nodeName!=="BODY";)a.x-=c.clientLeft+c.offsetLeft,a.y-=c.clientTop+c.offsetTop}function e(){if(ia){var a=N.height-17,b=a*(1-m.volume),c=ia;c.shadowOffsetX=
0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,N.width,N.height);c.lineWidth=7;c.lineCap="round";var d=c.createLinearGradient(0,0,7,0);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,a+8.5);c.stroke();b+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(8.5,b);c.stroke();c.beginPath();c.lineWidth=1;c.strokeStyle="rgb(96, 96, 96)";c.fillStyle="rgb(128, 128, 128)";
c.shadowOffsetX=1;c.shadowOffsetY=2;c.shadowBlur=5;c.shadowColor="rgba(0, 0, 0, 0.19)";c.arc(8.5,b,8.5,0,Math.PI*2,!0);c.fill();c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(8.5,b,3.5,0,Math.PI*2,!0);c.fill()}}function q(a){if(m.duration&&ba&&(a||!(wa===m.currentTime&&m.networkState>=4))){var b=D.width-17,a=b*m.currentTime/m.duration,c=ba;c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=0;c.clearRect(0,0,D.width,D.height);c.lineWidth=7;c.lineCap="round";
var d=c.createLinearGradient(0,0,0,7);d.addColorStop(0,"rgba(112, 112, 112, 0.38)");d.addColorStop(1,"rgba(241, 241, 241, 0.38)");c.strokeStyle=d;c.beginPath();c.moveTo(8.5,8.5);c.lineTo(b+8.5,8.5);c.stroke();var d=[],e,g,h,i=m.buffered,j=0;if(i){for(e=0,g=i.length;e<g;e++)h=i.start(e),h>m.duration&&(h=0),h!==j&&d.push({start:j,end:h}),j=i.end(e);j!==m.duration&&d.push({start:j,end:m.duration})}if(ca){e=j===m.duration?0:Math.floor(Date.now()/40)%8;c.strokeStyle=ca[e];for(e=0,g=d.length;e<g;e++)j=
d[e].start/m.duration*b,h=d[e].end/m.duration*b,c.beginPath(),c.moveTo(j+8.5,8.5),c.lineTo(h+8.5,8.5),c.stroke()}a+=8.5;c.strokeStyle="rgba(0, 0, 0, 0.3)";c.beginPath();c.moveTo(8.5,8.5);c.lineTo(a,8.5);c.stroke();b={x:da.x,y:da.y};f(b,D);b=Math.sqrt(Math.pow(b.x-a,2)+Math.pow(b.y-8.5,2))-20;b=Math.max(0,b);if(b<100&&(b=8.5*(1-b/100),b*2>7))c.beginPath(),c.lineWidth=1,c.fillStyle="rgb(128, 128, 128)",c.shadowOffsetX=1,c.shadowOffsetY=2,c.shadowBlur=5,c.shadowColor="rgba(0, 0, 0, 0.19)",c.arc(a,8.5,
b,0,Math.PI*2,!0),c.fill(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=0;c.beginPath();c.fillStyle="#02fdca";c.arc(a,8.5,3.5,0,Math.PI*2,!0);c.fill()}}function d(a){var b=g.innerWidth||800,c=g.innerHeight||b*9/16;if(a||b!==oa||c!==pa||!D.width){oa=b;pa=c;var d=U/V/(b/c),e,f,h,j,k,l;d>1.2?(l=Math.min(1,(d-1.2)/0.25),f=Math.min(l*30,Math.max(b-640,0)*0.1),h=Math.floor(b-f*2),k=h/U,j=Math.floor(V*k),e=(c*1.2/d-j)/2):d<1/1.05?(l=Math.min(1,(1/1.05-d)/0.2),e=Math.min(l*40,Math.max(b-360,0)*0.1),j=
Math.floor(c-e*2),k=j/V,h=Math.floor(U*k),f=(b*d/(1/1.05)-h)/2):(k=Math.min(c/V,b/U),h=Math.floor(U*k),j=Math.floor(V*k),f=(b-h)/2,e=(c-j)/2,l=0);i.body.style.overflow=h<640?"auto":"";if(qa!==l){if(l>0){if(Z.style.display!=="block")Z.style.display="block";Z.style.opacity=l;if($.style.display!=="block")$.style.display="block";$.style.opacity=l}else Z.style.display="none",$.style.display="none";qa=l}i.body.style.fontSize=Math.round(k*8)+"px";Q.style.width=h+"px";Q.style.height=j+"px";Q.style.marginLeft=
f+"px";Q.style.marginTop=e+"px";if(a||ra!==h){ra=h;a=D.parentNode;b=a.offsetWidth;for(c=0,d=a.childNodes.length;c<d;c++)e=a.childNodes[c],e.tagName&&e!==D&&(ja[e.id]===void 0&&e.offsetWidth>0&&(ja[e.id]=e.offsetWidth+6),b-=ja[e.id]);D.width=b-6;q(!0)}}K=Date.now()}function n(a){if(O&&(!a||!a.target||!(a.target!==a.currentTarget||a.target.classList.contains("button"))))i.getElementById("volume-controls").style.display="none",i.getElementById("settings-controls").style.display="none",i.getElementById("help-controls").style.display=
"none",i.getElementById("share-controls").style.display="none",O=!1}function r(a){var b=i.getElementById("comment-name"),c=i.getElementById("comment-email"),d=i.getElementById("comment-text"),e=i.getElementById("comment-post"),f;f=c.value;var g,h;for(g=0;g<f.length;g++)if(" \n\r\t\u000c".indexOf(f.charAt(g))<0)break;for(h=f.length-1;h>=g;h--)if(" \n\r\t\u000c".indexOf(f.charAt(h))<0)break;f=f.substring(g,h+1);b=b.value.length;f=!f.length||xa.test(f);if(a&&a.target===c)f?(i.getElementById("comment-email-invalid").style.display=
"none",c.classList.remove("error")):(i.getElementById("comment-email-invalid").style.display="block",c.classList.add("error"));b&=f;if(d.value.length>150){if(a&&a.target===d)a=i.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.add("error")}else if(a&&a.target===d)a=i.getElementById("comment-letter-count"),a.innerHTML=150-d.value.length,a.classList.remove("error");(b=(b=b&&d.value.length<=150)&&ea)?e.classList.remove("disabled"):e.classList.add("disabled");return b}
function k(){if(W){var a=Date.now()-K;q(a<=100);O&&a>5E3&&n();var b;if(m.paused||m.ended){if(sa!==(m.paused||m.ended))for(a=0,b=X.length;a<b;a++)X[a].style.opacity=1}else if(a<=5E3&&(a=da,W)){b=0.4*Q.offsetWidth;var c=Math.max(0,1-(Date.now()-K)/5E3),d,e,g,h,i,j;for(d=0,e=X.length;d<e;d++)h=X[d],i=h.offsetWidth,j=h.offsetHeight,g={x:a.x,y:a.y},f(g,h),i=g.x<0?-g.x:g.x>i?g.x-i:0,g=g.y<0?-g.y:g.y>j?g.y-j:0,g=Math.sqrt(i*i+g*g),g=1-0.8*(g/b),g<0.2?g=0.2:g>1&&(g=1),h.style.opacity=c*g}sa=m.paused||m.ended;
m.duration?(a=l(m.currentTime),b=a+" / "+l(m.duration)):(a="-:--",b="-:-- / -:--");if(ma.innerHTML!==b)ma.innerHTML=b;if(H&&aa.innerHTML!==a)aa.innerHTML=a}na(k,Q)}function c(){m.paused?m.play():m.ended?(m.currentTime=0,m.play()):m.pause()}function t(a){var b=i.getElementById(a+"-toggle");if(b)I[a]?(b.innerHTML=y==="de"?"ein":"On",b.classList.add("on")):(b.innerHTML=y==="de"?"aus":"Off",b.classList.remove("on"))}function u(){function a(b,c){var d=new XMLHttpRequest;d.open("GET","comments.php?"+(c?
"unflag":"flag")+"="+b,!0);d.send(null)}if(y){var b="comments.php?vtime="+(m.currentTime||0)+"&language="+y;if(fa[y]){if(Date.now()-fa[y]<5E3)return;b+="&since="+fa[y]/1E3}var c=new XMLHttpRequest;c.open("GET",b,!0);c.onreadystatechange=function(){if(c.readyState===4&&c.status===200){var b=JSON.parse(c.responseText),d,e,f;for(d=0,e=b.length;d<e;d++)if((f=b[d])&&!ga[f[0]])ga[f[0]]=f,w.videoComment({start:f[2],end:f[2]+5,id:f[0],author:f[4],text:f[5],date:f[1]*1E3,language:f[3],target:"comments",flagCallback:a})}};
c.send(null);fa[y]=Date.now()}}function o(a){!a&&E&&u();i.documentElement.setAttribute("lang",y);for(var b,c=["en","de"],a=0;a<c.length;a++)b=i.getElementById("language-"+c[a]),c[a]===y?b.classList.add("on"):b.classList.remove("on");var d,e,f,g;for(a in R)if(R.hasOwnProperty(a)){try{d=i.querySelectorAll(a)}catch(h){d=(d=i.getElementById(a.substr(1)))?[d]:[]}c=(R[a][y]||"").split("\n");for(f=0,g=d.length;f<g;f++)if((b=d[f])&&c.length&&c[0].length){for(;b.firstChild;)b.removeChild(b.firstChild);try{b.appendChild(i.createTextNode(c[0]));
for(e=1;e<c.length;e++)b.appendChild(i.createElement("br")),b.appendChild(i.createTextNode(c[e]))}catch(j){if(a==="#title")i.title=c.join(" ")}}}if(H){e=["comment-email","comment-name","comment-text"];b=[];d=[];for(a=0;a<e.length;a++)d.push(i.getElementById(e[a])),b.push(d[a].previousSibling.offsetWidth);for(a=0;a<e.length;a++)d[a].style.paddingLeft=b[a]+"px"}t("comments");t("subtitles");t("resources");w&&w.updateSubtitleLanguage&&w.updateSubtitleLanguage()}function s(){H=!0;m.pause();if(Math.abs(Y-
m.currentTime)>10)i.getElementById("comment-text").value="";var a;a=m.duration?l(m.currentTime):"-:--";if(H&&aa.innerHTML!==a)aa.innerHTML=a;i.getElementById("add-comment-controls").style.display="block";o(!0)}function j(a){if(!a.altKey&&!a.altGraphKey&&!a.metaKey&&(K=Date.now(),!H)){var b=a.keyCode||a.which;b>=65&&b<=90||b>=97&&b<=122||b>=256&&b<=658||b>=884&&b<=8191?(a.preventDefault(),s(),a=i.getElementById("comment-text"),a.value=String.fromCharCode(b),a.setSelectionRange(a.value.length,a.value.length),
a.focus(),r()):(b===32&&(c(),a.preventDefault()),K=Date.now())}}function p(){var a=new XMLHttpRequest;a.open("GET","save.php?language="+y,!0);a.send(null)}function x(a){var b;if(a!==M){E?(m.pause(),n()):(b=i.getElementById("youtube-container"),m&&m.pauseVideo&&m.pauseVideo());g.location.hash=a||"";if(M)i.getElementById(M).style.display="none";if(a){if(b)b.style.display="none";if(!M&&(i.getElementById("back-controls").style.display="block",i.getElementById("bottom-controls").style.display="none",P))P.style.display=
"block";i.getElementById(a).style.display="block";S.style.zIndex="1500";M=a}else if(M=!1,!M){S.style.zIndex="";i.getElementById("back-controls").style.display="";i.getElementById("bottom-controls").style.display="";if(P)P.style.display="";if(b)b.style.display=""}}}function B(){var a,b=new Image;b.onload=function(){ca=[];var c=i.createElement("canvas");c.height=7;c.width=8;var d=c.getContext("2d");for(a=0;a<8;a++)d.clearRect(0,0,8,7),d.drawImage(b,-a,0),d.drawImage(b,8-a,0),ca.push(ba.createPattern(c,
"repeat"))};b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAExJREFUeNpi/P//fzADA4MwAwLcAuIDUDYbE5DYDMRvkRSoAbEDlP0LpOAXPkWMQCtggmxA7ItuHRNUNQMuk5igRuFUxASlcSoCCDAA+ZwYM8U0vFEAAAAASUVORK5CYII=";var c=i.getElementsByClassName("fade");for(a=0;a<c.length;a++)X.push(c.item(a))}function z(){function c(a){var e;a.which?e=a.which===3:a.button&&(e=a.button===2);if(e)return!1;n();d=d&&m.paused;a=b(a);f(a,D);a=(a.x-8.5)/(D.offsetWidth-
17);a>=0&&a<=1&&(a*=m.duration,w.currentTime(a));m.pause();return!0}var d=!0;a(D,c,c,function(){d||(m.play(),d=!0)})}function v(){function c(a){var d;a.which?d=a.which===3:a.button&&(d=a.button===2);if(d)return!1;a=b(a);f(a,N);a=1-(a.y-8.5)/(N.offsetHeight-17);if(a>=0&&a<=1)m.volume=a;return!0}a(N,c,c,null)}function J(){if(A>m.duration)A=m.duration;if(A)m.currentTime=A,ka||m.play(),W=!0;if(la)m.muted=!0;z();k()}function L(){var a,b,c,d,e=!1;c=g.location.pathname.split("/");c=c.concat(g.location.hash.substr(1).split("/"));
for(d=c.length-1;d>=0;d--)if(a=c[d].toLowerCase(),a==="pause"?ka=!0:a==="mute"?la=!0:!b&&(a==="about"||a==="contact"||a==="disclaimer"||a==="terms-of-use")?b=a:!e&&a&&!isNaN(a)&&a>=0&&(e=!0,A=parseFloat(a)),b&&e&&la&&ka)break;if(ha=b)P?x(ha):F.style.display="none";else if(e&&m&&m.duration>A)m.currentTime=A}function G(){return y}function C(){E=!1;A=0;i.getElementById("no-video").style.display="block";R["#intro-caption"]={en:"With the popcorn.js and HTML5 video technology on board, Europeana Remix is at the vanguard of using audiovisual heritage in engaging people with their history.",
de:"Mit dem Popcorn.js und HTML5-Video-Technologie an Bord, ist Europeana Remix an der Spitze der Nutzung von Online-Video im Dialog mit Menschen mit ihrer Geschichte."};var a=i.createElement("script");a.setAttribute("type","text/javascript");a.src="http://www.youtube.com/player_api";var b=i.createElement("div");b.id="youtube-container";b.style.display="none";F.insertBefore(b,i.getElementById("intro-text"));g.onYouTubePlayerAPIReady=function(){m=new g.YT.Player("youtube-container",{width:640,height:320,
videoId:"8uLOWsWod7c",playerVars:{origin:i.location.protocol+"//"+i.location.hostname}})};i.body.appendChild(a);i.getElementById("no-video-continue").onclick=function(){i.getElementById("intro-text").style.display="none";b.style.display=""};i.body.classList.add("no-video")}var i=g.document,va=g.Popcorn,Z=i.getElementById("background"),$=i.getElementsByTagName("footer")[0],Q=i.getElementById("video-frame"),m=i.getElementById("video"),ma=i.getElementById("play-timer"),aa=i.getElementById("add-comment-timer"),
D=i.getElementById("progress"),N=i.getElementById("volume-canvas"),ia,ba,F=i.getElementById("intro"),S=i.getElementById("eu-logo"),P,ta,ua,w,A=0,ka=!1,la=!1,xa=RegExp("^[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[A-Z]{2}|aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)$","i"),na=function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||
g.msRequestAnimationFrame||function(a){g.setTimeout(a,16)}}(),wa,sa,K=0,fa={},oa,pa,ra,qa,M,ha,O=!1,Y=-10,da={},E=!0,I={comments:!0,resources:!0,subtitles:!0},W=!1,H=!1,ea=!1,ga={},T=[],y,R={"#title":{en:"A First World War friendship \u2013 an interactive HTML5 video by Europeana",de:"Eine Erste Weltkrieg Freundschaft - ein interaktiver HTML5 Video von Europeana"},"#about-button":{en:"About",de:"\u00fcber uns"},"#contact-button":{en:"Contact",de:"kontakt"},"#share-button":{en:"Share",de:"teilen"},
"#comments-button-text":{en:"User Comments:",de:"User-Kommentare:"},"#resources-button-text":{en:"Related Items:",de:"relatierte Artikel:"},"#subtitles-button-text":{en:"Subtitles:",de:"Untertitel"},"#language-button-text":{en:"Language:",de:"Sprache:"},"#back-button":{en:"Back to film",de:"Zur\u00fcck zum Film"},".popcorn-source":{en:"source",de:"Quelle"},"#write-comment-at":{en:"Write a comment at:",de:"Schreib einen Kommentar zu:"},"#comment-email-label":{en:"Email Address:",de:"E-Mail-Adresse:"},
"#comment-text-label":{en:"Comment:",de:"Kommentar:"},"#comment-tos":{en:"I agree to terms of use",de:"Ich stimme den Nutzungsbedingungen zu"},"#comment-post":{en:"Post My Comment",de:"absenden"},"#help-button":{en:"Help",de:"Hilfe"},"#help-window > div":{en:"Use this button:",de:"Diese taste dr\u00fccken:"},"#help-comment-p":{en:"(or just start typing) to leave a comment",de:"um einen Kommentar zu schreiben (oder fangen Sie einfach mit schreiben an)"},"#help-language-p":{en:"to change the language/subtitle settings",
de:"Um die Sprache Untertitel-Einstellungen zu \u00e4ndern"},"#help-settings-p":{en:"to toggle subtitles, related items and comments on or off",de:"um Untertitel, verwandte Artikel und Kommentare ein-oder auszuschalten"},"#intro-caption":{en:"An interactive experience around the story of an unlikely friendship during the First World War.",de:"Ein interaktives Erlebnis rund um die Geschichte einer ungew\u00f6hnlichen Freundschaft w\u00e4hrend des Ersten Weltkriegs."},"#no-video-browsers":{en:"Please be aware that for optimal performance, these browsers are recommended:",
de:"Bitte beachten Sie, dass f\u00fcr eine optimale Leistung die folgenden Browser empfohlen sind:"},"#no-video-continue-text":{en:"Click 'Continue' for the video without the interactive components.",de:"Klicken Sie auf 'Weiter\u2019 f\u00fcr das Video ohne die interaktiven Komponenten."},"#no-video-continue":{en:"Continue",de:"Weiter"},"#end-title":{en:"Like this story?\nHelp us build the next",de:"Gef\u00e4llt Ihnen diese Geschichte?\nHelfen Sie uns beim Aufbau der n\u00e4chsten!"},"#end-caption":{en:"Europeana wants to hear your family story about World War 1. Share your photos, letters and other memorabilia.",
de:"Europeana will Ihre Familiengeschichte \u00fcber den 1. Weltkrieg gerne h\u00f6ren. Teilen Sie Ihre Fotos, Briefe und andere Erinnerungsst\u00fccke."},"#play-again":{en:"Play Again",de:"wiederholen"},"#add-archive":{en:"Add to the Archive",de:"Mitmachen"},"#explore-archive":{en:"Explore the Archive",de:"Ansehen"},shareTwitter:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1 http://remix.europeana.eu #europeana",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK http://remix.europeana.eu #europeana"},
shareFacebook:{en:"Europeana Remix: an interactive video about an unlikely friendship in WW1",de:"Europeana Remix: ein interaktives Video \u00fcber eine ungew\u00f6hnliche Freundschaft in den 1. WK"}},ja={},X=[],ca,U=1024,V=576;(function(){L();g.addEventListener("hashchange",L,!1);if(Modernizr.video){w=va("#video");try{ia=N.getContext("2d"),ba=D.getContext("2d")}catch(a){}m.readyState>=2?J():m.addEventListener("loadedmetadata",J,!1);if(i.body&&A>1.5)i.body.style.backgroundColor="#000"}else C();d();
if(A>1.5)i.body.style.backgroundColor="#000";y=i.documentElement.getAttribute("lang")||"en";o();E&&(v(),B(),m.addEventListener("play",function(){i.getElementById("play-button").classList.add("active");K=Date.now();if(!W)A<1.5&&h("bottom-controls",{opacity:{from:0,to:1}},0.5),i.getElementById("intro-play").style.display="none",m.style.display="block",W=!0},!1),m.addEventListener("pause",function(){i.getElementById("play-button").classList.remove("active");K=Date.now()},!1),m.addEventListener("ended",
function(){i.getElementById("play-button").classList.remove("active")},!1),m.addEventListener("volumechange",function(){i.getElementById("volume-button").offsetHeight&&e();m.volume<0.05?i.getElementById("volume-button").classList.add("active"):i.getElementById("volume-button").classList.remove("active");if(g.localStorage)localStorage.euRemixVolume=m.volume},!1));m.addEventListener("click",n,!1);i.getElementById("resources").addEventListener("click",n,!1);i.getElementById("bottom-controls").addEventListener("click",
n,!1);i.getElementById("top-controls").addEventListener("click",n,!1);i.getElementById("play-button").addEventListener("click",c,!1);i.addEventListener("click",function(){},!1);i.getElementById("intro-en").addEventListener("click",function(){y="en";o();p()},!1);i.getElementById("intro-de").addEventListener("click",function(){y="de";o();p()},!1);if(E)i.getElementById("comments-button").addEventListener("click",function(){I.comments=!I.comments;t("comments");I.comments?w.enable("videoComment"):w.disable("videoComment")},
!1),i.getElementById("resources-button").addEventListener("click",function(){var a,b;I.resources=!I.resources;t("resources");if(I.resources)for(a=0,b=T.length;a<b;a++)w.enable(T[a]);else for(a=0,b=T.length;a<b;a++)w.disable(T[a])},!1),i.getElementById("subtitles-button").addEventListener("click",function(){I.subtitles=!I.subtitles;t("subtitles");I.subtitles?w.enable("subtitle"):w.disable("subtitle")},!1),i.getElementById("language-en").addEventListener("click",function(){y="en";o();p()},!1),i.getElementById("language-de").addEventListener("click",
function(){y="de";o();p()},!1),i.getElementById("logo-link").addEventListener("click",function(){m.pause()},!1),i.getElementById("settings-button").addEventListener("click",function(){var a=i.getElementById("settings-controls"),b=!a.offsetHeight;n();if(b)a.style.display="block",O=!0},!1),i.getElementById("volume-button").addEventListener("click",function(){var a=i.getElementById("volume-controls"),b=!a.offsetHeight;n();if(b)a.style.display="block",e(),O=!0},!1),i.getElementById("add-comment-button").addEventListener("click",
function(){(H=!H)?s():(Y=m.currentTime,i.getElementById("add-comment-controls").style.display="none")},!1),i.getElementById("comment-tos-checkbox").addEventListener("click",function(){ea=this.checked;r()},!1),ea=i.getElementById("comment-tos-checkbox").checked,i.getElementById("comment-post").addEventListener("click",function(){if(ea){var a=new FormData,b=i.getElementById("comment-email").value,c=i.getElementById("comment-name").value,d=i.getElementById("comment-text").value;a.append("language",y);
a.append("name",c);a.append("email",b);a.append("comment",d);a.append("time",m.currentTime);var e=new XMLHttpRequest;e.open("POST","save-comment.php",!0);e.send(a);e.onreadystatechange=function(){if(e.readyState===4)if(e.status===200){var a=JSON.parse(e.responseText);if(a.success){if((a=a.data)&&!ga[a[0]])ga[a[0]]=a,w.videoComment({start:a[2],end:a[2]+5,id:a[0],author:a[4],text:a[5],date:a[1]*1E3,language:a[3],target:"comments"});H=!1;Y=m.currentTime;i.getElementById("add-comment-controls").style.display=
"none";i.getElementById("comment-text").value=""}}else console.log("error saving comment")}}},!1),i.getElementById("end-close").addEventListener("click",function(){i.getElementById("end").style.display="none"},!0),i.getElementById("play-again").addEventListener("click",function(){m.currentTime=0;m.play()},!0),i.getElementById("comment-cancel").addEventListener("click",function(){H=!1;Y=m.currentTime;i.getElementById("add-comment-controls").style.display="none"},!0),i.getElementById("comment-name").addEventListener("change",
r,!1),i.getElementById("comment-email").addEventListener("change",r,!1),i.getElementById("comment-text").addEventListener("change",r,!1),i.getElementById("comment-name").addEventListener("keyup",r,!1),i.getElementById("comment-email").addEventListener("keyup",r,!1),i.getElementById("comment-text").addEventListener("keyup",r,!1);i.getElementById("about-button").addEventListener("click",function(){x("about")},!1);i.getElementById("contact-button").addEventListener("click",function(){x("contact")},!1);
i.getElementById("back-button").addEventListener("click",function(){x()},!1);i.getElementById("help-button").addEventListener("click",function(){var a=i.getElementById("help-controls"),b=!a.offsetHeight;n();if(b)a.style.display="block",O=!0},!1);i.getElementById("share-button").addEventListener("click",function(){var a=i.getElementById("share-controls"),b=!a.offsetHeight;n();if(b)a.style.display="block",O=!0},!1);i.getElementById("twitter-button").addEventListener("click",function(){var a=encodeURIComponent(g.location.protocol+
"//"+g.location.host+g.location.pathname),b=encodeURIComponent(R.shareTwitter[y]);ta=g.open("http://twitter.com/share?count=none&counturl="+a+"&text="+b+"&url=","europeana-share-tweet","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");ta.focus()},!1);i.getElementById("facebook-button").addEventListener("click",function(){var a=g.location.protocol+"//"+g.location.host+g.location.pathname,b=encodeURIComponent(R.shareFacebook[y]);
ua=g.open("http://facebook.com/sharer.php?u="+a+"&t="+b,"europeana-share-facebook","left="+Math.round(screen.width/2-275)+",top="+Math.round(screen.height/2-225)+",width=550,height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1");ua.focus()},!1);h("top-controls",{opacity:{from:0,to:1}},0.5);g.addEventListener("load",function(){d(!0)},!1);g.addEventListener("resize",d,!0);i.addEventListener("mousemove",function(a){K=Date.now();da=b(a)},!1);var f=[{url:"image/page-bg.jpg",category:"display"},
"image/background.jpg",{url:"css/style.css",mode:"font",id:"chevin",families:["Chevin-Light"],category:"display"},"image/bg.png","image/logo.png","image/icon_facebook.png","image/icon_twitter.png","image/radio.png","image/settings.png"];E&&(f=f.concat([{url:"video/otto-and-bernard.webm",element:m,id:"video",category:"play"},{url:"data/resources.txt?"+Date.now(),type:"json",category:"data",id:"resources"},{url:"data/subtitles.txt",type:"json",category:"data",id:"subtitles"},"image/playpause.png","image/check.png",
"image/comment.png","image/comments.png","image/volume.png","image/intro-play.png","image/media-icons.png"]));f=new Loaderator(f,"all",function(){if(!E)return!1;if(A>1.5)h("bottom-controls",{opacity:{from:0,to:1}},0.5);else{var a=i.getElementById("intro-play");a.style.display="block";a.addEventListener("click",function(){m.play()},!1)}g.addEventListener("keypress",j,!1)});f.addEventListener("all:chevin",function(){d();A<1.5||!E?(h("intro-text",{opacity:{from:0,to:1}},1),h("intro-en",{opacity:{from:0,
to:1}},1),h("intro-de",{opacity:{from:0,to:1}},1)):i.getElementById("intro-text").style.opacity=1});f.addEventListener("all:image/logo.png",function(){d();S.style.zIndex="1500";h(S,{opacity:{from:0,to:1}},1)});f.addEventListener("all:image/page-bg.jpg",function(a){a=a.element;a.id="page-background";P=a;F.parentNode.insertBefore(a,F.nextSibling);if(!E)F.style.display="block"});f.addEventListener("display",function(){ha&&!M&&x(ha);if(A<1.5||!E)F.style.display="block"});f.addEventListener("all:image/background.jpg",
function(a){d();a=a.element;F.insertBefore(a,F.firstChild);if(E){if(A<1.5){if(h(a,{opacity:{from:0,to:1}},1,function(){m.style.display="block"}),P)F.style.display="block"}else m.style.display="block";var b=i.getElementById("end"),a=a.cloneNode(!1);b.insertBefore(a,b.firstChild)}});E&&(f.addEventListener("all:video",function(a){a.element.style.visibility="visible";if(g.localStorage&&localStorage.euRemixVolume!==void 0)m.volume=localStorage.euRemixVolume;var b=i.getElementById("end"),c=i.getElementById("end-text"),
d=i.getElementById("end-close"),e=b.firstChild;w.code({start:"4:26",end:w.duration()-1,onStart:function(){b.style.display="block";d.style.display=""},onFrame:function(a,c){var d=Math.min((w.currentTime()-c.start)/1.5,1);if(b.style.opacity!==d)b.style.opacity=d},onEnd:function(a){if(w.currentTime()<a.start)b.style.display="";d.style.display="none"}});w.code({start:w.duration()-1,end:w.duration(),onStart:function(){if(!(e instanceof HTMLImageElement))e=b.firstChild;b.style.display="block";b.classList.add("final")},
onFrame:function(a,d){var f=Math.min((w.currentTime()-d.start)/0.5,1);if(e.style.opacity!==f)e.style.opacity=f;if(b.style.opacity<f)b.style.opacity=f;f=1-f;c.style.backgroundColor="rgba(255, 255, 255, "+f*0.85+")";c.style.borderColor="rgba(0, 0, 0, "+f*0.6+")"},onEnd:function(){b.style.cssText="";b.classList.remove("final")}})}),f.addEventListener("data:resources",function(a){var b={flickr:g.flickrApiKey||""},a=JSON.parse(a.element.responseText),c,d,e,f;for(c in a)if(a.hasOwnProperty(c)&&typeof w[c]===
"function"){for(e=0,f=a[c].length;e<f;e++){d=a[c][e];if(b[c])d.apikey=b[c];d.target="resources";if(d.fadeIn===void 0||isNaN(d.fadeIn))d.fadeIn=0.5;if(d.fadeOut===void 0||isNaN(d.fadeOut))d.fadeOut=0.5;w[c](d)}f&&T.indexOf(c)===-1&&(T.push(c),I.resources||w.disable(c))}}),f.addEventListener("data:subtitles",function(a){var b=JSON.parse(a.element.responseText);if(b)for(a=0;a<b.length;a++)b[a].languagesrc=G,w.subtitle(b[a])}),u(),g.addEventListener("keyup",function(a){var b=a.which||a.keyCode;if(H){if(K=
Date.now(),b===27)H=!1,Y=m.currentTime,i.getElementById("add-comment-controls").style.display="none",a.preventDefault()}else b===37?(m.currentTime-=0.04,console.log("left",m.currentTime)):b===39&&(m.currentTime+=0.04,console.log("right",m.currentTime))},!1),w.code({start:0,end:1.5,onStart:function(){F.style.display="block";i.body.style.backgroundColor="#fff";S.style.zIndex="1500"},onFrame:function(){var a=1-Math.min(w.currentTime()/1.5,1);F.style.opacity=a;a=Math.round(a*255);i.body.style.backgroundColor=
"rgb("+a+", "+a+", "+a+")"},onEnd:function(){i.body.style.backgroundColor="#000";F.style.display="none";S.style.zIndex=""}}))})()})(window);
